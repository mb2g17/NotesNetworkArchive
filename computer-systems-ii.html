<html>
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
        <link rel="stylesheet" href="css/computer-systems-ii.css" />
        <link rel="stylesheet" href="css/page.css" />
    </head>
    <body class="c84">
        <p class="c78 title" id="h.inl8zeigx9zp">
            <span class="c61 c77">Computer Systems II</span>
        </p>
        <p class="c73 subtitle" id="h.gf48srx5mrvd">
            <span class="c28 c61 c83">Joshua Gregory</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c56">
            <span class="c28 c11"
                ><a class="c9" href="#h.y1cdc48q0btk"
                    >Introduction (please read)</a
                ></span
            ><span class="c11 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c28 c11"
                ><a class="c9" href="#h.y1cdc48q0btk">9</a></span
            >
        </p>
        <p class="c53">
            <span class="c43 c28 c11"
                ><a class="c9" href="#h.46dcdvz0rucz">Embedded Systems</a></span
            ><span class="c43 c28 c11"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c28 c11"
                ><a class="c9" href="#h.46dcdvz0rucz">9</a></span
            >
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.2lgbi4l6dtsu"
                    >Cross Compilation</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.2lgbi4l6dtsu">9</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.7zgvrmn77v8d">Build Process</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.7zgvrmn77v8d">10</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.z5upshb9713i">Cross-linker</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.z5upshb9713i">10</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.wml7r0qn49a0">Cross-assembler</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wml7r0qn49a0">10</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.9mvfobj3tijw"
                    >Errors and Options</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.9mvfobj3tijw">10</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.l9harsq7rkfi"
                    >Intermediate Files</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.l9harsq7rkfi">11</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.yqvhqsmgmesp">Sections</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.yqvhqsmgmesp">11</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.b1s3ljgh73hl"
                    >Translation Units</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.b1s3ljgh73hl">12</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.vix8cn2gv31b"
                    >La Fortuna Hardware</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.vix8cn2gv31b">12</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1v01n6uoqdcl">Microcontroller</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1v01n6uoqdcl">12</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.fo0lvd9yt2dc"
                    >System on Chip (SoC)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fo0lvd9yt2dc">13</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.klggd1e7nh04"
                    >Embedded Computer</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.klggd1e7nh04">13</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.77rycm18d11e"
                    >La Ruota Della Fortuna (LaFortuna)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.77rycm18d11e">13</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.hnt72hs7dehi">Programming in C</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hnt72hs7dehi">14</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.lfbhtggo9dby">When to use C</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lfbhtggo9dby">15</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.gsqgib6agbc3">C in Practice</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.gsqgib6agbc3">16</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.vvicswtmn5ob"
                    >Header files: *.h</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.vvicswtmn5ob">16</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.vodd4rpncmjg"
                    >Things to be aware from the start</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.vodd4rpncmjg">16</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xmexx6rtuvn9">Unspecified</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xmexx6rtuvn9">16</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.8g4upon82gls">Undefined</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8g4upon82gls">17</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.l7jp9c4m7q6x"
                    >Memory-mapped I/O</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.l7jp9c4m7q6x">17</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.arqewl1tmhw5"
                    >How is software connected to Hardware?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.arqewl1tmhw5">18</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.c6mgeczzwbm">Control Registers</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.c6mgeczzwbm">18</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.5veyqbhadp7u"
                    >Special Instructions vs. Memory Mapping</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5veyqbhadp7u">19</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.1s6fpbn0mm7v"
                    >AT90USB1286: Address Spaces</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1s6fpbn0mm7v">20</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ncob50q0tdl4"
                    >AT90USB1286: Data Memory Map</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ncob50q0tdl4">20</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.htj34380vog8"
                    >Manipulating register bits</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.htj34380vog8">20</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.3d226kncda1j"
                    >Interrupt Handling &amp; Event Driven Programming</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.3d226kncda1j">21</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.zcqwq9kx14fy"
                    >Basic I/O Methods</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.zcqwq9kx14fy">21</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.wyndjc5819c6"
                    >Programmed I/O (Polling)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wyndjc5819c6">21</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.fdytf9bsd1wd"
                    >Interrupt-driven I/O</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fdytf9bsd1wd">21</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.3auerbllnuca">Interrupts</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.3auerbllnuca">21</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ubl4yhwfgnx">Program Flow</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ubl4yhwfgnx">21</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.qpyzckd54mm8"
                    >Interrupt Service Routines (ISR)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qpyzckd54mm8">22</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.poia44sh5cqd">Latency</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.poia44sh5cqd">22</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.yp4phc30yc1g">Maximum Latency</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.yp4phc30yc1g">23</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.myypxfj73doy">Jitter</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.myypxfj73doy">23</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.lyps8592h9ns"
                    >How to keep ISRs fast and simple?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lyps8592h9ns">23</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ssnzmqlvwz3r">ISRs in C</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ssnzmqlvwz3r">23</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.i0vb11gbv2qb"
                    >Event Driven Programming</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.i0vb11gbv2qb">24</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.8d3xxx7vfsy4">State Machines</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8d3xxx7vfsy4">24</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.rqc73rjswoss"
                    >Internal and External Events</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.rqc73rjswoss">25</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.73uhw16g0ckz">Events</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.73uhw16g0ckz">25</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1v3ojoqelno6"
                    >Interrupt Vectors &amp; Interrupt Service Routine</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1v3ojoqelno6">25</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.2rpa7pm9kf0i">Volatile</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.2rpa7pm9kf0i">26</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.u8drdcrp5qji"
                    >ISR Implementation</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.u8drdcrp5qji">26</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ddmsi5iopxr2"
                    >avr-libc&rsquo;s interrupt API</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ddmsi5iopxr2">26</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.y3w5566qk0fl"
                    >Memory Architecture</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.y3w5566qk0fl">26</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.94zk09lx0lzv"
                    >Harvard Architecture</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.94zk09lx0lzv">26</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.72pndtjr60uw"
                    >Von Neumann vs. Harvard Architecture</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.72pndtjr60uw">27</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.qrhco4ynz5cm"
                    >Types of Memory on AVR Microcontrollers</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qrhco4ynz5cm">27</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.9fchoi33nh3z"
                    >Memory Technology</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.9fchoi33nh3z">27</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.kjcliggojjch">Flash</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kjcliggojjch">28</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.amvqlzcwo2g4">EEPROM</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.amvqlzcwo2g4">28</a></span>
        </p>
        <p class="c4">
            <span class="c2"><a class="c9" href="#h.5t5kk0y8085t">SRAM</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5t5kk0y8085t">28</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.dnjyhgy4tdbg">Addressing</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.dnjyhgy4tdbg">28</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8u4q7mjjp4y2">RAM Layout</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8u4q7mjjp4y2">28</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.gqfa7cldfov">Heap/Stack</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.gqfa7cldfov">29</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xt8znop56uab"
                    >Heap/Stack Collision</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xt8znop56uab">29</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.2o04ijtzakly"
                    >Handling Memory in C</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.2o04ijtzakly">30</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.oldv0tjws5zw">Speed</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.oldv0tjws5zw">30</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.uivo2ha0ov4n"
                    >Don&rsquo;t be sloppy</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.uivo2ha0ov4n">30</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.fto10g9h8tnq"
                    >How is malloc implemented</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fto10g9h8tnq">30</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.qz974i7jdxpu">Device Drivers</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qz974i7jdxpu">31</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.la3nqb9xdgc7"
                    >Operating System (OS)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.la3nqb9xdgc7">31</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.k1t0y9is03vt"
                    >Uniform Interface</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.k1t0y9is03vt">31</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.sr38kqwt2clk"
                    >Management of Resources</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sr38kqwt2clk">31</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.w70ostbnykb6"
                    >Management of Interactions</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w70ostbnykb6">31</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.l1qx2ry7ha2y"
                    >OS Application Interface</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.l1qx2ry7ha2y">32</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jzmgsxi1cypo"
                    >Role of the Driver</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jzmgsxi1cypo">32</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.pecrqoqrrajo">Abstraction</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.pecrqoqrrajo">33</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.desaqoemk7ql"
                    >Potential Drivers on LaFortuna</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.desaqoemk7ql">33</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.teeqgx3rc22h"
                    >How to write a driver</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.teeqgx3rc22h">33</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.fr72j1l1ur64"
                    >Connecting Hardware to a Microcontroller</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fr72j1l1ur64">33</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.5v1zcspg5qgt"
                    >Connecting extra modules to LaFortuna</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5v1zcspg5qgt">33</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.wgwtulmditkc">TFT LCD Display</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wgwtulmditkc">33</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.b5s3kt6hq2og"
                    >ILI9341 TFT Display Driver</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.b5s3kt6hq2og">34</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1orhqj6u2hy8"
                    >Microcontroller Interface Modes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1orhqj6u2hy8">34</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.hhq8s0saaoh9"
                    >Real-time Scheduling</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hhq8s0saaoh9">34</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.w7g1djeid40y"
                    >Real-time Deadlines</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w7g1djeid40y">34</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1slhkq4ufxzs"
                    >CPU Utilization: U</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1slhkq4ufxzs">34</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8pyli3z1vf8l"
                    >Assumptions for Analysis</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8pyli3z1vf8l">35</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.w26kmjdazku5"
                    >Load from Set of Periodic Tasks</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w26kmjdazku5">35</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.irpoujlo39u7">Schedulability</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.irpoujlo39u7">35</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.jup0x6rlnc87">Simple Case</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jup0x6rlnc87">35</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ciy4f3m1nucv">Priority</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ciy4f3m1nucv">35</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.km5mvv4wjg9v"
                    >Fixed Priority Scheduling</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.km5mvv4wjg9v">36</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.qvf44dsh8hn9"
                    >Rate Monotonic Scheduling (RMS)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qvf44dsh8hn9">36</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.qfeoes5melcu"
                    >Requirements for RMS</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qfeoes5melcu">36</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.kna60tudnzdb">RMS Priority</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kna60tudnzdb">37</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.iw4xdg9fpgja"
                    >RMS is optimal for fixed priorities</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.iw4xdg9fpgja">37</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.pt6ntp10qom8"
                    >Harmonic Task Sets</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.pt6ntp10qom8">37</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.lwj9nmy68yku"
                    >RMS issues to consider</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lwj9nmy68yku">38</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.bz4bnamz4av5"
                    >Dynamic Priority Scheduling</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bz4bnamz4av5">38</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.vsfh4aqg3s38"
                    >Earliest Deadline First</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.vsfh4aqg3s38">38</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.lpgm9p74e84c"
                    >Earliest Deadline First (EDF)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lpgm9p74e84c">38</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.79bopy9zsayn"
                    >Multitasking &amp; RIOS</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.79bopy9zsayn">38</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.fz23jxe2m091"
                    >OS: Multiprogramming</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fz23jxe2m091">38</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.cxu5wwojcrd8">Processes</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.cxu5wwojcrd8">39</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.65kl7siqf8dq">Process States</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.65kl7siqf8dq">39</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.14l5ekt7qcp5"
                    >State Transitions of Processes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.14l5ekt7qcp5">39</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.mgs0ncbzdu6y">Scheduling</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.mgs0ncbzdu6y">39</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ug4qfrg38x71"
                    >Scheduling Algorithms</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ug4qfrg38x71">40</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.93qihmmtm9vz">Round Robin</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.93qihmmtm9vz">40</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.cdp9v3oxwdiy"
                    >Lottery Scheduling</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.cdp9v3oxwdiy">40</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.siloqlensfqm"
                    >Scheduling Scenarios</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.siloqlensfqm">40</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1jiy3ukycx2h"
                    >Context Switching</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1jiy3ukycx2h">41</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.lywi5xvcli68"
                    >Real-time Scheduling</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lywi5xvcli68">41</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.6cdfx85zeuj0"
                    >Constraints On Computation</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6cdfx85zeuj0">41</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.veftwvhljtwb"
                    >Real-Time Systems</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.veftwvhljtwb">41</a></span>
        </p>
        <p class="c10">
            <span class="c2"><a class="c9" href="#h.bydw0gdomt2h">RIOS</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bydw0gdomt2h">41</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.smtu6ypfclqn"
                    >Key Concept of RIOS</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.smtu6ypfclqn">41</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.w923my1zwdcm"
                    >Persistent Storage</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w923my1zwdcm">42</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.749jmshzvuiz">On LaFortuna</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.749jmshzvuiz">42</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.wpja0vq95nre">EEPROM</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wpja0vq95nre">42</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.3a0cjblpj0ib"
                    >CMOS Floating Gate Transistors</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.3a0cjblpj0ib">43</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.54n9jsnv6mbj"
                    >Speed vs. Endurance Trade-off</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.54n9jsnv6mbj">43</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.h0vvxrd5h44d"
                    >Amount of Data / Write Frequency</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.h0vvxrd5h44d">43</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xp1iodhyat1h"
                    >EEPROM on AT90USB1286 (LaFortuna Microcontroller)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xp1iodhyat1h">43</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.i03j9xbqtozo">Flash Memory</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.i03j9xbqtozo">43</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.v1p8w6lnfxm1">Flash Access</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.v1p8w6lnfxm1">44</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.kzvygm4jzhd9">File System</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kzvygm4jzhd9">44</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.o9o6yrp8paz8">Physical Layer</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.o9o6yrp8paz8">44</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.q7xhrhyjamtv"
                    >Mapping Logical Addresses to Physical Addresses</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.q7xhrhyjamtv">44</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.kaq55ilkglgu"
                    >Interface Protocol</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kaq55ilkglgu">45</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.px80pb591w9o"
                    >Serial Communication</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.px80pb591w9o">45</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.g417cko2jrv7">SPI Protocol</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.g417cko2jrv7">45</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.1nefmk7xbubj"
                    >Reading blocks from the card</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1nefmk7xbubj">47</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.wovibwiz1nx0"
                    >Debugging Embedded Applications</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wovibwiz1nx0">47</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.mw8pw6bngd8h">Debugging</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.mw8pw6bngd8h">47</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ijukdshqgoj7"
                    >Typical Run-time Errors</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ijukdshqgoj7">48</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.b1keqg6xfu2p"
                    >When is debugging hard?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.b1keqg6xfu2p">48</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jql21wucr2v2"
                    >General Approach to Debugging</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jql21wucr2v2">48</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.chvclny8jna8">Strategies</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.chvclny8jna8">48</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ekrdsslj2pv8"
                    >Device Under Test</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ekrdsslj2pv8">49</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ffpqupbyhfg1">Gather Data</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ffpqupbyhfg1">49</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.hcfn67ip4u4w">Access</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hcfn67ip4u4w">49</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.9ae5xskgj2jj">Timing</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.9ae5xskgj2jj">49</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.y4tas41zqrgi"
                    >Make Bug Reproducible</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.y4tas41zqrgi">50</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.v30p9joyy6ge"
                    >Debugging is a Science</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.v30p9joyy6ge">50</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.w1voo3gybd7c">Tools</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w1voo3gybd7c">50</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.de9j20b8gft1"
                    >Where can things go wrong?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.de9j20b8gft1">50</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.3nv50zp6w1zx"
                    >Typical Scenarios</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.3nv50zp6w1zx">50</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.9ol7uyfkpadh">Memory Problems</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.9ol7uyfkpadh">51</a></span>
        </p>
        <p class="c40">
            <span class="c2"
                ><a class="c9" href="#h.lztg9jy0jkz1">Memory Leak</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lztg9jy0jkz1">51</a></span>
        </p>
        <p class="c40">
            <span class="c2"
                ><a class="c9" href="#h.c9cc9qrgcccx"
                    >Memory Fragmentation</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.c9cc9qrgcccx">51</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.agrmye54oyi0"
                    >Available Stack Space</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.agrmye54oyi0">51</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8c767t2eqqer"
                    >Memory Corruption</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8c767t2eqqer">51</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.o6vcq9m9ydtj"
                    >How to Debug Memory Problems?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.o6vcq9m9ydtj">52</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.lgvbh99epgny">Compiler Support</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lgvbh99epgny">52</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.ic6x4w4148i3">FAT File Systems</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ic6x4w4148i3">52</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8g68znoubjrb">File System</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8g68znoubjrb">53</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.bp0vakwt1zoj">Implementation</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bp0vakwt1zoj">53</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.yujshyxuwgz7"
                    >FAT File System(s)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.yujshyxuwgz7">53</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.tl0oztccj2bc">FAT FS Metadata</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.tl0oztccj2bc">53</a></span>
        </p>
        <p class="c10">
            <span class="c2"><a class="c9" href="#h.1ushhca8f9fn">CP/M</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1ushhca8f9fn">53</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ux96m5ta7fvt">CP/M Disk Format</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ux96m5ta7fvt">53</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.6z45q891vc03"
                    >Directory entry (32 Bytes):</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6z45q891vc03">54</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.a4suk6mx12hr">Present FAT FSs</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.a4suk6mx12hr">54</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ot3o8fe5ihnv">FAT Layout</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ot3o8fe5ihnv">54</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.m0h032nqpl83"
                    >General &ldquo;Disk&rdquo; Layout</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.m0h032nqpl83">55</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ssseow66u3f6">FAT-FS Partition</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ssseow66u3f6">55</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.nocxaxk0cb91">Volume ID Sector</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.nocxaxk0cb91">55</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.agccv5s7sqfb">Volume ID:</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.agccv5s7sqfb">55</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.kkpu4km1hfv1"
                    >FAT-16 Directory Entry</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kkpu4km1hfv1">55</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8m02u5n3cqf9">Directory Entry</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8m02u5n3cqf9">55</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.hknzp74qgfa5">Short File Names</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hknzp74qgfa5">56</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.t87q2hufreu6">Attribute Byte</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.t87q2hufreu6">56</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.cjuyjt9jc376">FAT Entries</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.cjuyjt9jc376">56</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.52kblj20doup"
                    >Partition Table in MBR</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.52kblj20doup">57</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.uu9zjhl8g9rr">Reading FAT</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.uu9zjhl8g9rr">57</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.j4u46qvn8x8p">FAT start</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.j4u46qvn8x8p">57</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.e9j6u6ldbdlh">Root Start</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.e9j6u6ldbdlh">57</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.tgfj3boqyhrp">Data start</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.tgfj3boqyhrp">57</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.tbvkirqbmrts"
                    >Simplest way to read data from SD card</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.tbvkirqbmrts">58</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.bw2p9i783dg"
                    >FAT-FS Limitations</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bw2p9i783dg">58</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ijzhoaejl5y7"
                    >VFAT: Long File Names</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ijzhoaejl5y7">58</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.m6jvqd3f3g9w"
                    >Further additions to FAT-FS Family</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.m6jvqd3f3g9w">59</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.71th1q2lpdvh"
                    >Directory Entry: Fat16 vs. FAT32</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.71th1q2lpdvh">59</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.rejoxebc3j02"
                    >Recognising the FAT FS Type</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.rejoxebc3j02">59</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.g87b7t86smp8">The FAT</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.g87b7t86smp8">60</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.c3gn42qzfqhz">FAT Example</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.c3gn42qzfqhz">60</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1eiq3m4anvnt">FAT Structure</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1eiq3m4anvnt">60</a></span>
        </p>
        <p class="c53">
            <span class="c43 c28 c11"
                ><a class="c9" href="#h.q1sudv21pgbd"
                    >Reliability and Security</a
                ></span
            ><span class="c43 c28 c11"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c28 c11"
                ><a class="c9" href="#h.q1sudv21pgbd">61</a></span
            >
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.54o7fsi228m5"
                    >Reliability of Embedded Applications</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.54o7fsi228m5">61</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.woa6dtje392n">Embedded Systems</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.woa6dtje392n">61</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.l9yhpt1nvcgb">Common Issues</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.l9yhpt1nvcgb">61</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.cgfo00wdysyc">Hardware</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.cgfo00wdysyc">61</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.12qojre71uib">Software</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.12qojre71uib">61</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.db86m6mjxwog">What can happen?</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.db86m6mjxwog">62</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.g1lbw3sl5zg0"
                    >What can be done?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.g1lbw3sl5zg0">62</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xtouf89xkz96">The Situation:</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xtouf89xkz96">62</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.buc7h8ec9sz4"
                    >Mitigation Measures</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.buc7h8ec9sz4">62</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.kpatrzjw102p"
                    >Application Specific Failure Modes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.kpatrzjw102p">62</a></span>
        </p>
        <p class="c40">
            <span class="c2"
                ><a class="c9" href="#h.5dj16gosekw5">Example</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5dj16gosekw5">62</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.sok5dno0ggjp">How to respond?</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sok5dno0ggjp">62</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.v96puuvjekrw"
                    >Triple redundancy with voting</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.v96puuvjekrw">63</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.6arb5vq0x8zj"
                    >Protection Circuits</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6arb5vq0x8zj">63</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.4vm91f2f4ku0"
                    >Defensive Programming</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.4vm91f2f4ku0">63</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.xgfu23g6eklp"
                    >Reliability: Toyota Electronic Throttle Control</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xgfu23g6eklp">63</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.os4lbfs0ofy3">Michael Barr</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.os4lbfs0ofy3">63</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jiwga2gp6yzt"
                    >Embedded Systems Defined</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jiwga2gp6yzt">64</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.284kb8vqc1p9">Embedded Systems</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.284kb8vqc1p9">64</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.gyw08787dcle"
                    >Embedded systems in cars</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.gyw08787dcle">64</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.pwsu7pdwbr9p"
                    >Review of Toyota&rsquo;s Source Code</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.pwsu7pdwbr9p">64</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ey0fx669q4nf"
                    >Electronic Throttle Source Code</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ey0fx669q4nf">64</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.7qhxqg5ktavh"
                    >~18 Months With Code</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.7qhxqg5ktavh">64</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ny2yfutdna9g"
                    >Electronic Throttle Control</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ny2yfutdna9g">64</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.gdql0riwrk9z"
                    >Safety-Critical Systems</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.gdql0riwrk9z">65</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.jrg8pn1yjq62"
                    >What Could Go Wrong?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jrg8pn1yjq62">65</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.mgdfjlqk9www"
                    >Safety Has To Be Designed In</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.mgdfjlqk9www">65</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.h5y958ifdsp8"
                    >Electronic Throttle Control (ETCS)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.h5y958ifdsp8">65</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.cwn3543n5bbf"
                    >Summary of Conclusions</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.cwn3543n5bbf">65</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.6mc5zilefjqt"
                    >Unintended Acceleration (UA)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6mc5zilefjqt">65</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ri02b6tr5oaf"
                    >NASA&rsquo;s Code Review was bad</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ri02b6tr5oaf">65</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.bh6e5jsrbe44"
                    >Software Malfunctions Happen</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bh6e5jsrbe44">66</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.stcgdf1lodg9"
                    >Toyota&rsquo;s Operating System (OSEK)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.stcgdf1lodg9">66</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.tpz9ej5pqpda"
                    >Example of Unintended Acceleration</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.tpz9ej5pqpda">66</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.270llxutixx4"
                    >Software Causes of Memory Corruption</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.270llxutixx4">66</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.e0ku60fq0srk"
                    >Spaghetti Code Defined</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.e0ku60fq0srk">67</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jds5ecl054oc">Dinosaur Says:</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jds5ecl054oc">67</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.j649x6x195de"
                    >Toyota&rsquo;s Spaghetti Code</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.j649x6x195de">67</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.solmewkqrxud"
                    >Types of Spaghetti Code</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.solmewkqrxud">67</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.k16q0m4qh37d">Stack Anal.</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.k16q0m4qh37d">68</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.xp4pjhbeutb0">Recursion</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xp4pjhbeutb0">68</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.xugeb1kybjdt"
                    >Toyota&rsquo;s Stack Mistakes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xugeb1kybjdt">68</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.pxo2v5c721tt"
                    >Failed to Comply With&hellip;:</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.pxo2v5c721tt">68</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.l5fx7dvs3bhq">System Standards</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.l5fx7dvs3bhq">68</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.1ynhd7jdbnc5">Coding Standards</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1ynhd7jdbnc5">68</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.4shpnp7wyjis"
                    >Violating Coding Rules Causes Bugs</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.4shpnp7wyjis">69</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.xu9nb3x2snaf"
                    >Coding Standards (again)</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xu9nb3x2snaf">69</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.qspvbwltqbl2"
                    >NASA&rsquo;s Software Areas of Concern</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qspvbwltqbl2">69</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.c8sfgm6yjnex"
                    >Toyota&rsquo;s Defective &ldquo;Safety Layers&rdquo;</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.c8sfgm6yjnex">69</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.hia8oqu6ocij"
                    >Layer 1: Mirroring of Critical Variables</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hia8oqu6ocij">69</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.7dpyjko3ff5k"
                    >Throttle Command Design</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.7dpyjko3ff5k">70</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.8co1h7gpyb8w"
                    >UA VIA Memory Corruption</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.8co1h7gpyb8w">70</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.4fb6ey5qfiob"
                    >Layer 2: DTCs and Fail-Safe Modes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.4fb6ey5qfiob">70</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.73jqu52tpbr4"
                    >Layer 3: Watchdog Supervisor</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.73jqu52tpbr4">71</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.46t52wnq109j"
                    >Defective Watchdog Design</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.46t52wnq109j">71</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.6gxcfd9qi8yh"
                    >Layer 4: ESP-B2 Monitor CPU</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6gxcfd9qi8yh">71</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.d5x6xcnam0ar"
                    >Toyota Failed to Review Monitor CPU</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.d5x6xcnam0ar">71</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ndsv1avxzup3"
                    >Monitor CPU is Last Line of UA Defence</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ndsv1avxzup3">72</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.fzha8sbibx50"
                    >Toyota&rsquo;s Defective Software Process</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.fzha8sbibx50">72</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.5ww08xqftgyg"
                    >Toyota&rsquo;s Inadequate Software Process</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5ww08xqftgyg">72</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.onldq7d8ea6m">Stuff</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.onldq7d8ea6m">72</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.w5q5xbjty1c"
                    >Toyota&rsquo;s Defective Safety Culture</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w5q5xbjty1c">72</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xx5l5mblcy77"
                    >NASA sought what Barr Group found</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xx5l5mblcy77">72</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.hb8phg2tj0r9"
                    >Unreasonable Single Points of Failure</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.hb8phg2tj0r9">73</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.o7cxgqgwsfer"
                    >Individual Task Death Outcomes</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.o7cxgqgwsfer">73</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.p70nhq5bhkke"
                    >The Test Space is Effectively Infinite</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.p70nhq5bhkke">73</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.im4oleqkmwqn"
                    >UA forever if brake on at task death</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.im4oleqkmwqn">74</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.76krcloolqdu"
                    >Case-Specific Opinions</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.76krcloolqdu">74</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.6zwz7buhi45l"
                    >Other Similar Incident Criteria</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6zwz7buhi45l">74</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ckgl3gavybr8">Toyota Experts</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ckgl3gavybr8">75</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.n3e9vp234ocd"
                    >Reliability Continued</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.n3e9vp234ocd">75</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.k0gs3icq7xl">Context</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.k0gs3icq7xl">75</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.1q3locq0vbef">Classic Problem</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1q3locq0vbef">75</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.7hxabjb2bl3v"
                    >Interesting Problem</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.7hxabjb2bl3v">75</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.c7ss64dwflp">What can persist?</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.c7ss64dwflp">75</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.tsrj4n4gqfvr"
                    >Reliability in Embedded Systems</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.tsrj4n4gqfvr">76</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ux30end6pbrb"
                    >What can be done?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ux30end6pbrb">76</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.mb7tarlwi0g6">Integrity Checks</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.mb7tarlwi0g6">76</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.n2lyh2nmq8wv"
                    >Cyclic Redundancy Checksums</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.n2lyh2nmq8wv">77</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.np6u2x38i1pf"
                    >Which bit is wrong?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.np6u2x38i1pf">77</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.y78hlc6fy7s8">Redundant Codes</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.y78hlc6fy7s8">77</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.xlwqt7nwjs6u">Watchdogs</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xlwqt7nwjs6u">77</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jd8665532sa5">Fault Recovery</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jd8665532sa5">77</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.muf5261fbk1y"
                    >Autonomous Fault Recovery</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.muf5261fbk1y">77</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.h9hqrrdl14p5">Watchdog</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.h9hqrrdl14p5">78</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.x8q5l68dr694">Software Faults</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.x8q5l68dr694">78</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.wekdodbvlfdi"
                    >Watchdog in the AT90USB1286</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.wekdodbvlfdi">78</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.xaa4wb9cl4mr"
                    >Acting on the Watchdog</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xaa4wb9cl4mr">79</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ukquyxew5e6l">Usage Scenarios</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ukquyxew5e6l">79</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ppzntpl3urb8"
                    >Power Consumption</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ppzntpl3urb8">79</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.nvb7xem71409">Protection</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.nvb7xem71409">79</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.vgbu0dcveryd">Avr-libc support</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.vgbu0dcveryd">79</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.s6yih8d0qctq"
                    >Initialization Period</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.s6yih8d0qctq">80</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.i27uak5teph4"
                    >Watchdog is Practice</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.i27uak5teph4">80</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.d92vxzm1ivge">Software Reset</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.d92vxzm1ivge">80</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.qxobo4uoen1v"
                    >Watchdogs differ from device to device</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qxobo4uoen1v">81</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.oifvyyhcb196">Stuck Tasks</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.oifvyyhcb196">81</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.icgiv98pebri">Multi-tasking</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.icgiv98pebri">81</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.h1zvup8m8u8d">Monitor Task</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.h1zvup8m8u8d">81</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.ey3ejhmc73kt">Time Scales</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ey3ejhmc73kt">81</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.bnekb7xos19w"
                    >Event-driven Tasks</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bnekb7xos19w">81</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.rxnr19tlqjj6"
                    >Robust Monitoring</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.rxnr19tlqjj6">81</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.nluhwe2xuwtl"
                    >What do we do when the dog bites?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.nluhwe2xuwtl">82</a></span>
        </p>
        <p class="c10">
            <span class="c2"><a class="c9" href="#h.sh0tdfucmya6">?</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sh0tdfucmya6">82</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.f0x3o6mw4mv4"
                    >Security in Embedded Applications</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.f0x3o6mw4mv4">82</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.3j470tmn8ezd">Risks</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.3j470tmn8ezd">82</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.1arouq9lgqmt"
                    >Internet of Things Research</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.1arouq9lgqmt">82</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.lnvqzqbfmqdf">IoT Security</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lnvqzqbfmqdf">83</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.6o21bhuz6y76"
                    >Security in Microcontroller Applications</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.6o21bhuz6y76">83</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.t8y96eikikio">Threads?</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.t8y96eikikio">83</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.68p0urt46zfo">Issues</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.68p0urt46zfo">83</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.eljqxdlo2vol"
                    >What can be done?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.eljqxdlo2vol">83</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.lcy3d64sv77t"
                    >Attacks On Hardware</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.lcy3d64sv77t">84</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.7j7amcgdfr56"
                    >Why is hardware attacked?</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.7j7amcgdfr56">84</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.jqzjlvj8clmx">Attack Methods</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jqzjlvj8clmx">84</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.rd30ac8fzmny"
                    >Firmware as Attack Vector</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.rd30ac8fzmny">84</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.uiamvpsh0s3n"
                    >Subverted Firmware on Drives</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.uiamvpsh0s3n">84</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.5bwtdcuo8u0t"
                    >Subverted Firmware on USB Drives</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5bwtdcuo8u0t">85</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.nsoyxctjnxdm"
                    >Attack on physical infrastructure</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.nsoyxctjnxdm">85</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.2nfmfnlyc7jc"
                    >IT- based attacks on physical systems</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.2nfmfnlyc7jc">85</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.mhpws9uomd9b"
                    >Infrastructure Security</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.mhpws9uomd9b">85</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.zauooj11p82v"
                    >Process Control Honey Pot</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.zauooj11p82v">85</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.h4r2aulv8d6q"
                    >Serious damage to blast furnace in Germany</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.h4r2aulv8d6q">86</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.bovr0v1aot8q"
                    >ThyssenKrupp, May 2013</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bovr0v1aot8q">86</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.72756wt9ow2w"
                    >Vulnerability in pacemakers</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.72756wt9ow2w">86</a></span>
        </p>
        <p class="c22">
            <span class="c2"
                ><a class="c9" href="#h.bdyk4c441mw8"
                    >Cybersecurity of Infrastructure</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.bdyk4c441mw8">86</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.sga6fow4u1zo">Stuxnet</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sga6fow4u1zo">86</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.sm25vfr7ctwo"
                    >Outline of how Stuxnet worked</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sm25vfr7ctwo">87</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.jbhjva8daswm"
                    >Ralph Langner: To Kill a Centrifuge</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jbhjva8daswm">87</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.9e271qvm1oc7"
                    >Iran&rsquo;s approach to uranium enrichment</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.9e271qvm1oc7">87</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.uvhc2jw43gs5"
                    >Cascade Protection System</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.uvhc2jw43gs5">87</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.spf8wy82mj0n"
                    >Over Pressure Attacks</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.spf8wy82mj0n">87</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.surx5xrb895t"
                    >Rotor Speed Attack: Pushing the Envelope</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.surx5xrb895t">87</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.gcte4tmc9d9e"
                    >Stuxnet Relations</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.gcte4tmc9d9e">88</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.jqbjcaceqlgp">Engineering</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.jqbjcaceqlgp">88</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.23d4geuxa7eo"
                    >Exploited Vulnerabilities</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.23d4geuxa7eo">88</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.sasqpieel2it">Targeting</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.sasqpieel2it">88</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.qb3dg2gs6muh">Impact</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.qb3dg2gs6muh">89</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.xlg5vt5rp99s">Stuff</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.xlg5vt5rp99s">89</a></span>
        </p>
        <p class="c4">
            <span class="c2"><a class="c9" href="#h.5og9myt31w0d">Duqu</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5og9myt31w0d">89</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.yv71ksfuw4z2">Stuxnet relation</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.yv71ksfuw4z2">90</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.nan5sozeicj7">Duqu Attack</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.nan5sozeicj7">90</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.le5kd3vhbce"
                    >Duqu: Installation</a
                ></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.le5kd3vhbce">90</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.ie87pqdu6o43">Duqu vs. Stuxnet</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.ie87pqdu6o43">91</a></span>
        </p>
        <p class="c4">
            <span class="c2"
                ><a class="c9" href="#h.2elu00rxzhz2">Duqu Logging</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.2elu00rxzhz2">92</a></span>
        </p>
        <p class="c53">
            <span class="c43 c28 c11"
                ><a class="c9" href="#h.uj0uscev42no">TL;DR</a></span
            ><span class="c43 c28 c11"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c28 c11"
                ><a class="c9" href="#h.uj0uscev42no">92</a></span
            >
        </p>
        <p class="c53">
            <span class="c43 c28 c11"
                ><a class="c9" href="#h.twn2jkhp93yd"
                    >Actual useful stuff to know for the exam</a
                ></span
            ><span class="c43 c28 c11"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c28 c11 c43"
                ><a class="c9" href="#h.twn2jkhp93yd">95</a></span
            >
        </p>
        <p class="c10">
            <span class="c2"><a class="c9" href="#h.whae3pgef2l0">RMS</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.whae3pgef2l0">95</a></span>
        </p>
        <p class="c10">
            <span class="c2"
                ><a class="c9" href="#h.w6xw52gy3cre">FAT FS</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.w6xw52gy3cre">96</a></span>
        </p>
        <p class="c65">
            <span class="c2"
                ><a class="c9" href="#h.5ng8e3lgc44t">RIOS and ISRs</a></span
            ><span class="c2"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c2"><a class="c9" href="#h.5ng8e3lgc44t">98</a></span>
        </p>
        <h1 class="c64" id="h.y1cdc48q0btk">
            <span class="c45">Introduction (please read)</span>
        </h1>
        <p class="c1">
            <span class="c11 c41"
                >These notes are basically just copying from the lecture
                slides</span
            ><span class="c6"
                >, with possible additional info added for further explanation.
                They are definitely not as good as Matt&rsquo;s notes, but
                writing notes is a good way to study, and if others can read
                this and get value from it then that&rsquo;s great :D</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                >Edit: These were made when the module ran in 2018/2019.
                Contents may have changed and stuff, but hopefully this will be
                largely useful.</span
            >
        </p>
        <h1 class="c64" id="h.46dcdvz0rucz">
            <span class="c45">Embedded Systems</span>
        </h1>
        <h2 class="c23" id="h.2lgbi4l6dtsu">
            <span class="c52">Cross Compilation</span>
        </h2>
        <p class="c1">
            <span class="c6"
                >Source code needs to be compiled to an executable to be run.
                This is usually done on the same machine.</span
            >
        </p>
        <ul class="c0 lst-kix_isdng8cc3v2m-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Source code -&gt; Compiler -&gt; Executable</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >But cross complication is where the executable is meant to be
                run on a different machine. Source code is compiled on a host,
                then executed on a target.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >This is done when compilation on the target is impossible /
                impracticable.</span
            >
        </p>
        <p class="c1"><span class="c6">Examples: </span></p>
        <ul class="c0 lst-kix_yhcy8eli6xf1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The first compiler or OS to be put onto new hardware</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low capability targets: embedded systems</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >The architecture of the host and target may be very
                different.</span
            >
        </p>
        <ul class="c0 lst-kix_mb4vmo422pd5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Memory architecture (von Neumann / Harvard)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Word size (64 bit / 8 bit)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Order of bytes in word (endianness)</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >[Endianness is the sequential order in which bytes are arranged
                into larger numerical values when stored in memory or when
                transmitted over digital links.]</span
            >
        </p>
        <h3 class="c20" id="h.7zgvrmn77v8d">
            <span class="c13">Build Process</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 194.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image4.png"
                    style="
                        width: 602px;
                        height: 194.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >This process includes the cross-compiler, cross-linker and
                cross-assembler.</span
            >
        </p>
        <h4 class="c17" id="h.z5upshb9713i">
            <span class="c7">Cross-linker</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >[A computer utility program that takes one or more object files
                generated by a compiler or an assembler and combines them into a
                single executable file, library file, or another
                &#39;object&#39; file.]</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 220px;
                    height: 269px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image23.png"
                    style="
                        width: 220px;
                        height: 269px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.wml7r0qn49a0">
            <span class="c7">Cross-assembler</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >[An assembler that generates machine language for a different
                type of computer than the one the assembler is running
                in.]</span
            >
        </p>
        <h4 class="c17" id="h.9mvfobj3tijw">
            <span class="c7">Errors and Options</span>
        </h4>
        <p class="c1">
            <span class="c6">When in the build process you may need to:</span>
        </p>
        <ul class="c0 lst-kix_kwgueag7vpnt-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Interpret error messages</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Consider configuration options</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >There are many options to steer the build process, important
                ones include:</span
            >
        </p>
        <ul class="c0 lst-kix_1w9gaxoy6ndw-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compiler optimization</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compiler warnings</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Selection of libraries (paths and variants)</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.l9harsq7rkfi">
            <span class="c7">Intermediate Files</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 594.79px;
                    height: 285.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image56.png"
                    style="
                        width: 594.79px;
                        height: 285.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">Intermediate Files:</span></p>
        <ul class="c0 lst-kix_mboklncj444c-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.c</span
                ><span class="c6">&nbsp;- C source code</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.i</span
                ><span class="c6">&nbsp;- In preprocess stage:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_mboklncj444c-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Header files included (the &#39;#include&#39;
                    instruction)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Macros replaced (the &#39;#define&#39; instruction)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Comments removed</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Conditional compilation (instructions &#39;#if&#39;,
                    &#39;#ifdef&#39;, &#39;#else&#39;, &#39;#elif&#39;,
                    &#39;#endif&#39;)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_mboklncj444c-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.o</span
                ><span class="c6"
                    >&nbsp;- Object file, created for each source file before
                    linking (relocatable)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.elf </span
                ><span class="c6"
                    >- Executable and Linkable Format, defines the structure for
                    binaries, libraries, and core files. Platform independent
                    binary interface for object files,
                </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.hex </span
                ><span class="c6"
                    >- Raw hex data (can be flashed on microcontrollers)</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Other files</span></p>
        <ul class="c0 lst-kix_sp0b2h7lj39n-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">a.out / .exe </span
                ><span>- Executable files, </span><span class="c11">A</span
                ><span>ssembler </span><span class="c11">O</span
                ><span class="c6">utput</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">.so / dll </span><span>- </span
                ><span class="c11">S</span><span>hared </span
                ><span class="c11">O</span><span>bject, </span
                ><span class="c11">D</span><span>ynamically </span
                ><span class="c11">L</span
                ><span class="c6">inked, library files</span>
            </li>
        </ul>
        <h4 class="c17" id="h.yqvhqsmgmesp">
            <span class="c7">Sections</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Memory segments are laid out with virtual addresses.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.e99b0cdf4035b62956de4832697e6f43877ab6c1"></a><a id="t.0"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c26" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Section</span></p>
                    </td>
                    <td class="c68" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Use</span></p>
                    </td>
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Location</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c26" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">.text</span></p>
                    </td>
                    <td class="c68" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Instructions</span></p>
                    </td>
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Flash Memory</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c26" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">.rodata</span></p>
                    </td>
                    <td class="c68" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Read-only data</span>
                        </p>
                    </td>
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Flash Memory</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c26" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">.data</span></p>
                    </td>
                    <td class="c68" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Initialised global variables</span>
                        </p>
                    </td>
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Flash copied to RAM</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c26" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">.bss</span></p>
                    </td>
                    <td class="c68" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Uninitialised global variables</span
                            >
                        </p>
                    </td>
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">RAM zeroed out</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >There are 24 section types defined in ELF, but you don&rsquo;t
                need to know the rest (I hope)</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_4ryfvb2egqr5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>The </span><span class="c11">compiler</span
                ><span
                    >&nbsp;assigns program and data to sections, taking into
                    account the scope and </span
                ><span>qualifiers</span><span class="c6">&nbsp;like const</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>The </span><span class="c11">linker </span
                ><span class="c6">places the sections to virtual memory</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>The </span><span class="c11">loader </span
                ><span class="c6">places the sections in physical memory</span>
            </li>
        </ul>
        <h4 class="c17" id="h.b1s3ljgh73hl">
            <span class="c7">Translation Units</span>
        </h4>
        <p class="c1"><span class="c6">C-Source code has three scopes</span></p>
        <ol class="c0 lst-kix_wdnaheid1pc6-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Program wide scope</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">File scope</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Block scope</span>
            </li>
        </ol>
        <p class="c1">
            <span class="c6">Programs are organized in files</span>
        </p>
        <p class="c1">
            <span>Files can be compiled independently (</span
            ><span class="c11">.c </span><span>-&gt; </span
            ><span class="c11">.o</span><span class="c6">)</span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 265.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image22.png"
                    style="
                        width: 602px;
                        height: 265.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c23" id="h.vix8cn2gv31b">
            <span class="c52">La Fortuna Hardware</span>
        </h2>
        <p class="c1">
            <span class="c6"
                >Embedded Hardware comes in made different shapes and
                sizes:</span
            >
        </p>
        <ul class="c0 lst-kix_7neu43e3y11i-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Microcontrollers</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">System-on-Chip</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Embedded Computers</span>
            </li>
        </ul>
        <h3 class="c20" id="h.1v01n6uoqdcl">
            <span class="c13">Microcontroller</span>
        </h3>
        <p class="c1">
            <span class="c6">Some properties of microcontrollers are:</span>
        </p>
        <ul class="c0 lst-kix_om4sqmce95gp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Low power requirements (a few mA [milliamps])</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Flash Memory for programs: 4-128 kB</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">RAM: typically from 0-32 kB</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Easy to program in C or C++</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cross-compiler setup relatively simple</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In-system-programmers are cheap </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_om4sqmce95gp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >[The ability of the microcontroller to be programmed while
                    installed in a complete system, rather than requiring the
                    chip to be programmed prior]</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_om4sqmce95gp-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In quantity they can be very cheap</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Very low sleep power</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Can be extremely small and low capability</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_om4sqmce95gp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">(e.g., 4-bit CPU, no RAM only registers)</span>
            </li>
        </ul>
        <h3 class="c20" id="h.fo0lvd9yt2dc">
            <span class="c13">System on Chip (SoC)</span>
        </h3>
        <p class="c1">
            <span class="c6">Some properties of systems on a chip are:</span>
        </p>
        <ul class="c0 lst-kix_j104rymcubix-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Typically ARM Core CPUs</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Flash and RAM in MB range</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cross-compiler setup is complex</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Often used with cloud-based cross-compiler</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Micro Python on SoC</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j104rymcubix-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >SoC is now powerful enough to run scripting languages, like
                    micro python</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Fills the gaps between low-level C-programming and full
                    embedded computer</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.klggd1e7nh04">
            <span class="c13">Embedded Computer</span>
        </h3>
        <p class="c1">
            <span class="c6">Some properties of embedded computers are:</span>
        </p>
        <ul class="c0 lst-kix_4vues9gemrsd-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Convenient development with login console</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Sufficient computing capability for image processing</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Current consumption several 100 mA</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >System boot time makes frequent sleeping not
                    efficient</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Complex Interrupt architecture makes precise timing of I/O
                    difficult</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Often combined with microcontroller for better control of
                    I/O</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >As you can see, choosing a piece of embedded hardware has
                trade-offs, and the right hardware will depend on the task you
                want to achieve.</span
            >
        </p>
        <h3 class="c20" id="h.77rycm18d11e">
            <span class="c13">La Ruota Della Fortuna (LaFortuna)</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 196.5px;
                    height: 273.79px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image61.png"
                    style="
                        width: 196.5px;
                        height: 273.79px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h3>
        <p class="c1">
            <span class="c6">The LaFortuna is a Microcontroller (&mu;C)</span>
        </p>
        <ul class="c0 lst-kix_8brs6e1mwc5s-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Computer on a single chip</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low power (compared to SoC)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Easy low level use</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Programmable over USB</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Dev Kit:</span></p>
        <ul class="c0 lst-kix_lt568j197hd7-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">LaFortuna</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">SD Card</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">USB Cable</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">A box for it</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>Microcontroller Board with </span
            ><span class="c19 c11">AT90USB1286</span>
        </p>
        <ul class="c0 lst-kix_x7otrxpmrp5p-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">8-bit AVR controller</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Colour display</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Rotary encoder</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">5 buttons</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Micro SD card</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Audio &amp; USB connector</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Digital I/O, Analogue I (rotary input)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Serial port, JTAG</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >8 MHz, Voltage (constant current) = 3.3 V</span
                >
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">8 KB RAM</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">128 KB Flash Memory</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>4 KB </span><span>EEPROM</span
                ><span class="c11">&nbsp;</span><span>(</span
                ><span class="c11">E</span><span>lectrically </span
                ><span class="c11">E</span><span>rasable </span
                ><span class="c11">P</span><span>rogrammable </span
                ><span class="c11">R</span><span>ead-</span
                ><span class="c11">O</span><span>nly </span
                ><span class="c11">M</span><span>emory)</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">4 Timers</span></li>
            <li class="c1 c3 li-bullet-0">
                <span>8 ch. 10 bit ADC (</span><span class="c11">A</span
                ><span>nalogue-to-</span><span class="c11">D</span
                ><span>igital </span><span class="c11">C</span
                ><span class="c6">onverter)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>320&times;240 TFT display, 18 bit colour (</span
                ><span class="c11">T</span><span>hin </span
                ><span class="c11">F</span><span>ilm </span
                ><span class="c11">T</span><span class="c6">ransistor)</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">AVR Microcontroller</span></p>
        <ul class="c0 lst-kix_fz9k4b3girgu-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Complete computer on a single chip</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Very popular series of microcontroller</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Available in many sizes and configurations</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>See LaFortuna schematic for more in depth details: </span
            ><span class="c66"
                ><a
                    class="c9"
                    href="https://www.google.com/url?q=https://secure.ecs.soton.ac.uk/notes/comp2215/rscs/lafortuna-schem.pdf&amp;sa=D&amp;source=editors&amp;ust=1623676818693000&amp;usg=AOvVaw3DHLY6qbWH5ToM4qY290bz"
                    >https://secure.ecs.soton.ac.uk/notes/comp2215/rscs/lafortuna-schem.pdf</a
                ></span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >See AVR Microcontroller datasheet for more in depth details:
            </span>
        </p>
        <p class="c1">
            <span class="c66"
                ><a
                    class="c9"
                    href="https://www.google.com/url?q=https://secure.ecs.soton.ac.uk/notes/comp2215/rscs/at90usb1286_doc7593.pdf&amp;sa=D&amp;source=editors&amp;ust=1623676818694000&amp;usg=AOvVaw1NgyI5ztQZFvZzUPTwDKdf"
                    >https://secure.ecs.soton.ac.uk/notes/comp2215/rscs/at90usb1286_doc7593.pdf</a
                ></span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h2 class="c23" id="h.hnt72hs7dehi"><span>Programming in C</span></h2>
        <ul class="c0 lst-kix_26hv31uag7fi-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Created in the early 70&rsquo;s</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >On PDP11 with 24 KB of RAM (early UNIX: 12 KB)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">For the development of UNIX</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Outcome:</span></p>
        <ul class="c0 lst-kix_5bgh9furat0h-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Minimalist -&gt; easy to learn and implement</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Pragmatic -&gt; trumps aesthetics</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Portable and close to the hardware</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Core language has no I/O and no dynamic memory
                    management</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >&hellip; In many ways ideal for embedded systems.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >C puts the programmer in full control and doesn&rsquo;t get in
                their way. There are some subtle pitfalls. For efficiency
                reasons there are no safety nets at runtime. It has a terse
                syntax that is not very restrictive - but has little redundancy.
                It&rsquo;s very likely the compiler will find an interpretation
                for your code.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">C can be written in very obfuscated ways. </span>
        </p>
        <p class="c1">
            <span class="c6"
                >[Obfuscation is the deliberate act of creating source or
                machine code that is difficult for humans to understand.]</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 460px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image3.png"
                    style="
                        width: 602px;
                        height: 460px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >This means it&rsquo;s ideal to smuggle malicious code past a
                review, to use backdoors, security stuff. If bugs make it past
                the review, why would it stop some carefully crafted code?</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >C is still a very popular and in demand language to this
                day.</span
            >
        </p>
        <h3 class="c20" id="h.lfbhtggo9dby">
            <span class="c13">When to use C</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Where C is used, there is typically no alternative:</span
            >
        </p>
        <ul class="c0 lst-kix_149axgmfclo3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">If low-level hardware access is required</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Driver</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Privileged CPU mode</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Configuration of hardware (e.g. memory management
                    unit)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">When runtime resources are critical</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">When realtime behaviour is critical</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">For very low capability systems</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Can run on systems without RAM</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software for new hardware</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">C often first language available</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Highly portable programs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_149axgmfclo3-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Under the right restrictions (ANSI89, POSIX)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Command line only</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >C is also great for short bit of code that benefit from
                optimisation:</span
            >
        </p>
        <ol class="c0 lst-kix_1zjfdy27bpsc-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Write everything in Python</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Profile </span></li>
        </ol>
        <ul class="c0 lst-kix_1zjfdy27bpsc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >[A form of dynamic program analysis that measures the
                    space/time complexity of code, usage of certain
                    instructions, frequency and duration of function
                    calls.]</span
                >
            </li>
        </ul>
        <ol class="c0 lst-kix_1zjfdy27bpsc-0" start="3">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Replace the hotspots with C</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_1zjfdy27bpsc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Hotspots are like bottlenecks of the code</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">The code will now be more efficient.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">C in Embedded Systems</span></p>
        <ul class="c0 lst-kix_culqvrpjmfw9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Typically a small amount of code</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Often large number of deployments</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_culqvrpjmfw9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">C is a worthwhile trade-off</span>
            </li>
        </ul>
        <h3 class="c20" id="h.gsqgib6agbc3">
            <span class="c13">C in Practice</span>
        </h3>
        <ul class="c0 lst-kix_gj9axzocrjrh-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Most widely supported version: C89</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >At present in common use: a subset of C99</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Portability:</span></p>
        <ul class="c0 lst-kix_y0cb0eilqomd-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">From one processor type to another</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_y0cb0eilqomd-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Same series: ATmega644P &rarr; AT90USB1286</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Different architecture: AT90USB1286 &rarr; ARM
                    CortexM0</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_y0cb0eilqomd-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >From board to board: Arduino &rarr; LaFortuna</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >From compiler to compiler: AVRstudio &rarr; gcc &rarr;
                    clang</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.vvicswtmn5ob">
            <span class="c13">Header files: *.h</span>
        </h3>
        <ul class="c0 lst-kix_rkdr6dksr4y8-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Contains declarations for exposed functions and
                    variables</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Included with preprocessor commands</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_rkdr6dksr4y8-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >In source file that holds corresponding definitions</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >In source files that make use of the declared
                    functions</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">...serves also as documentation</span>
            </li>
        </ul>
        <h3 class="c20" id="h.vodd4rpncmjg">
            <span class="c13">Things to be aware from the start</span>
        </h3>
        <ul class="c0 lst-kix_frb4hrawpa8t-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unspecified Behaviours</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Undefined Behaviours</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unexpected Behaviours</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_frb4hrawpa8t-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Programmer makes incorrect assumptions</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Verify your assumptions!</span>
            </li>
        </ul>
        <h4 class="c17" id="h.xmexx6rtuvn9">
            <span class="c7">Unspecified</span>
        </h4>
        <ul class="c0 lst-kix_prv3q6x454fp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Adapt to hardware, e.g. size of int</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_prv3q6x454fp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Know what your compile does: make a limits.h file</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Explicitly direct it: make a stdint.h file</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_prv3q6x454fp-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Freedom for the compiler design</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_prv3q6x454fp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Implementation-Defined Behaviour</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span>For gcc: </span
                ><span class="c66"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://gcc.gnu.org/wiki/avr-gcc&amp;sa=D&amp;source=editors&amp;ust=1623676818705000&amp;usg=AOvVaw2jb008JPwUw1S6s4i6LDkI"
                        >https://gcc.gnu.org/wiki/avr-gcc</a
                    ></span
                ><span class="c6">&nbsp;</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_prv3q6x454fp-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Know what happens!</span>
            </li>
        </ul>
        <h4 class="c17" id="h.8g4upon82gls">
            <span class="c7">Undefined</span>
        </h4>
        <ul class="c0 lst-kix_srch4v4m2jnh-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Error for which the standard does not prescribe any
                    action</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">It is not clear what will happen</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Arbitrary behaviour at arbitrary time</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Don&rsquo;t go there!</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">In some contexts Zero (0) is special:</span>
        </p>
        <ul class="c0 lst-kix_7on33njm8zcw-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Any value that is not 0 is true</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A zero byte (&lsquo;\0&rsquo;) marks the end of
                    string</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A pointer to the address 0 (NULL) is invalid</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >(Testing for zero is generally fast on any hardware.)</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Also be aware:</span></p>
        <ul class="c0 lst-kix_u45gqua1s4m1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The rules for type promotions and conversions</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Operator precedence</span>
            </li>
        </ul>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 518.31px;
                    height: 370.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image49.png"
                    style="
                        width: 518.31px;
                        height: 370.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >You don&rsquo;t need to know by heart for the exam. But
                don&rsquo;t sprinkle around parentheses because you are too lazy
                to look it up. Parenthesis should indicate that the programmer
                deliberately overwrites the precedence rules, rather than
                indicating ignorance of the rules.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h2 class="c23" id="h.l7jp9c4m7q6x">
            <span class="c52">Memory-mapped I/O</span>
        </h2>
        <p class="c1">
            <span class="c43 c58">(Finally a real topic&hellip;)</span>
        </p>
        <p class="c1">
            <span>A microcontroller is made up of: </span
            ><span class="c19 c11">CPU, Memory, Hardware Modules.</span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 353.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image24.png"
                    style="
                        width: 602px;
                        height: 353.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.arqewl1tmhw5">
            <span class="c13">How is software connected to Hardware?</span>
        </h3>
        <h4 class="c17" id="h.c6mgeczzwbm">
            <span class="c7">Control Registers</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Control registers are sets of flip flops which are not only
                connected for reading and writing: their inputs or outputs are
                wired into other circuits.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >[A flip-flop is a circuit that has two stable states and can be
                used to store state information.]</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 526.5px;
                    height: 286.43px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image42.png"
                    style="
                        width: 526.5px;
                        height: 286.43px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >How does the CPU interact with the control registers?</span
            >
        </p>
        <p class="c1"><span class="c6">Two methods:</span></p>
        <ol class="c0 lst-kix_fg68yue8ewpp-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">I/O instructions</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_fg68yue8ewpp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Instruction set of processor has special I/O commands</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">I/O commands control I/O port registers</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_fg68yue8ewpp-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Memory Mapped I/O</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_fg68yue8ewpp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >I/O registers have addresses in reserved memory space</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Memory access</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6">In some CPUs a mix of both methods is used.</span>
        </p>
        <h4 class="c17" id="h.5veyqbhadp7u">
            <span class="c7">Special Instructions vs. Memory Mapping</span>
        </h4>
        <ul class="c0 lst-kix_j1pi1mh135pg-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Size of address space</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Convenience of access</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j1pi1mh135pg-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Different addressing modes</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j1pi1mh135pg-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Size of instruction set</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j1pi1mh135pg-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Instruction bits are precious</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j1pi1mh135pg-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cache complications!</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_j1pi1mh135pg-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Input registers will change without instructions from the
                    CPU</span
                >
            </li>
        </ul>
        <hr style="page-break-before: always; display: none" />
        <p class="c1 c15"><span class="c6"></span></p>
        <h4 class="c17" id="h.1s6fpbn0mm7v">
            <span class="c7">AT90USB1286: Address Spaces</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: -0px 0px;
                    border: 1.33px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 370.54px;
                    height: 186.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image17.png"
                    style="
                        width: 370.54px;
                        height: 186.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h4>
        <ul class="c0 lst-kix_c3m5qhejmy4g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Program Memory: </span>
            </li>
        </ul>
        <p class="c1 c75"><span class="c6">0x00000 &rarr; 0x1FFFF</span></p>
        <ul class="c0 lst-kix_ni475caazc7u-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">EEPROM:</span></li>
        </ul>
        <p class="c1 c75"><span class="c6">0x0000 &rarr; 0x0FFF</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >C assumes a single address space (von Neumann
                architecture).</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Workaround: the intended address space is indicated to the
                linker by a specific big offset.</span
            >
        </p>
        <h4 class="c17" id="h.ncob50q0tdl4">
            <span class="c7">AT90USB1286: Data Memory Map</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 1.33px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 328.49px;
                    height: 374.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image21.png"
                    style="
                        width: 328.49px;
                        height: 374.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h4>
        <p class="c1">
            <span class="c6"
                >All hardware modules on the microcontroller are configured by
                writing to I/O registers.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >All communication from these modules is facilitated by reading
                and writing I/O registers.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Note that even the general purpose registers are mapped into
                memory address space.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">PORTF</span><span>, </span
            ><span class="c11">DDRF</span><span>&nbsp;and </span
            ><span class="c11">PINF</span
            ><span class="c6"
                >&nbsp;registers are mapped to a unique memory address.</span
            >
        </p>
        <p class="c1">
            <span class="c11">io.h</span
            ><span class="c6"
                >&nbsp;will include a set of C-preprocessor #define statements
                that define constant labels (e.g., DDRF) for the correct address
                of that register in the target chip.</span
            >
        </p>
        <h4 class="c17" id="h.htj34380vog8">
            <span class="c7">Manipulating register bits</span>
        </h4>
        <ul class="c0 lst-kix_f26ok3ixoa0w-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">8-bit registers</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f26ok3ixoa0w-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Unsigned </span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Type: uint8_t</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">stdint.h: typedef unsigned char uint8 t</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f26ok3ixoa0w-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Setting a bit (=1)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f26ok3ixoa0w-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c37">DDRB</span><span>&nbsp;</span
                ><span class="c63">|=</span><span>&nbsp;</span
                ><span class="c6 c57">_BV(PBx)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c37">Register name</span><span>&nbsp;</span
                ><span class="c63">Binary OR</span><span>&nbsp;</span
                ><span class="c57"
                    >Macro generates a byte with xth bit set to 1, otherwise
                    0</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_f26ok3ixoa0w-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Clearing a bit (=0)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f26ok3ixoa0w-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c37">DDRB</span><span>&nbsp;</span
                ><span class="c48">&amp;=</span><span>&nbsp;</span
                ><span class="c6 c62">~_BV(PBx)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c37">Register name</span><span>&nbsp;</span
                ><span class="c48">Binary AND</span><span>&nbsp;</span
                ><span class="c62"
                    >Macro generates a byte with xth bit set to 0, otherwise
                    1</span
                >
            </li>
        </ul>
        <h2 class="c23" id="h.3d226kncda1j">
            <span class="c52"
                >Interrupt Handling &amp; Event Driven Programming</span
            >
        </h2>
        <p class="c1">
            <span class="c79">(Okay, this is even a realer topic)</span>
        </p>
        <h3 class="c20" id="h.zcqwq9kx14fy">
            <span class="c13">Basic I/O Methods</span>
        </h3>
        <h4 class="c17" id="h.wyndjc5819c6">
            <span class="c7">Programmed I/O (Polling)</span>
        </h4>
        <ul class="c0 lst-kix_pkuh2ghomgps-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >CPU sits in a tight loop until input is available or output
                    can be accepted</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Occupies CPU (&ldquo;busy waiting&rdquo;)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Very fast reaction possible</span>
            </li>
        </ul>
        <h4 class="c17" id="h.fdytf9bsd1wd">
            <span class="c7">Interrupt-driven I/O</span>
        </h4>
        <ul class="c0 lst-kix_oab09bulfqtm-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardware signal can change program flow</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span
                    >CPU can do other work (or sleep) unless I/O is
                    possible</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Other I/O methods like Direct memory Access (DMA) or dedicated
                I/O computers (e.g. a graphics card) use interrupts to
                communicate with the CPU.</span
            >
        </p>
        <h3 class="c20" id="h.3auerbllnuca">
            <span class="c13">Interrupts</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >The solution to overcome the inefficiency of programmed I/O is
                a possibility to interrupt the CPU when I/O devices are ready to
                receive or deliver data.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Important: the CPU needs to be able to continue where it was
                interrupted after the interrupt has been dealt with.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c19 c11"
                >State of the interrupted process needs to be preserved.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >(Exception: if interrupt should abort execution because of an
                irrecoverable fault)</span
            >
        </p>
        <h4 class="c17" id="h.ubl4yhwfgnx">
            <span class="c7">Program Flow</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 374.5px;
                    height: 232.77px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image34.png"
                    style="
                        width: 374.5px;
                        height: 232.77px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6">&ldquo;Precise Interrupt&rdquo;:</span>
        </p>
        <ol class="c0 lst-kix_xzvy9yv2ojjb-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >State of program counter (PC) is preserved</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Everything before PC has been fully executed</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Nothing beyond the PC has been started</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Execution state of instruction at the PC is know</span
                >
            </li>
        </ol>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">When interrupt arrives:</span></p>
        <ol class="c0 lst-kix_vefr7lmd82ti-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Processor completes current instruction</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Processor acknowledges interrupt</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardware saves some state:</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-1 start" start="1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Program Counter (PC)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Process status word (PSW)</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-0" start="4">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >PC register is loaded with value from interrupt vector
                    table
                </span>
            </li>
        </ol>
        <p class="c1 c15 c75"><span class="c6"></span></p>
        <p class="c1">
            <span class="c39 c16">Control now handed to software&hellip;</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ol class="c0 lst-kix_vefr7lmd82ti-0" start="5">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software disables interrupts</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Saves additional state</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-1 start" start="1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Registers -&gt; Stack</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-0" start="7">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">May re-enable interrupts</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-1 start" start="1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Easier if not enabled</span>
            </li>
        </ol>
        <ol class="c0 lst-kix_vefr7lmd82ti-0" start="8">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Services the interrupt -&gt; ISR (Interrupt Service
                    Routine)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Resotres state (software)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Enable interrupts</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardware: restores PSW and PC</span>
            </li>
        </ol>
        <h3 class="c20" id="h.qpyzckd54mm8">
            <span class="c13">Interrupt Service Routines (ISR)</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Procedure that is executed when the interrupt occurs and that
                handles the interrupt.</span
            >
        </p>
        <p class="c1"><span class="c6">Two important rules:</span></p>
        <ol class="c0 lst-kix_aqocmrcar23a-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Keep them fast</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_aqocmrcar23a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Avoid loops</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Avoid heavy instructions (no printf())</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Should not block (no scanf())</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_aqocmrcar23a-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Keep them simple</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_aqocmrcar23a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Debugging ISRs is hard</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Why fast?</span></p>
        <ul class="c0 lst-kix_5zp6bq38cl7x-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If they are fast you can usually block all
                    interrupts:</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_5zp6bq38cl7x-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Life is simpler if you do not need to make your ISRs
                    interruptible</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Stack size bounds are simpler to establish</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">No need for reentrant ISRs</span>
            </li>
        </ul>
        <h4 class="c17" id="h.poia44sh5cqd"><span class="c7">Latency</span></h4>
        <ul class="c0 lst-kix_n0as142615l3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >How long does it take until the CPU can respond?</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Is this delay deterministic?</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Deterministic latency may be important in real-time
                applications: e.g., human operators and also control algorithms
                can adapt to deterministic latency, but struggle with random
                delays in control lines.</span
            >
        </p>
        <h4 class="c17" id="h.yp4phc30yc1g">
            <span class="c7">Maximum Latency</span>
        </h4>
        <p class="c1">
            <span class="c6">We have latency due to hardware:</span>
        </p>
        <ul class="c0 lst-kix_ezglmwexqxb5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Current instruction is completed</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardware support to save state</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6">We also have latency due to software</span>
        </p>
        <ul class="c0 lst-kix_mk0g6xh70vkf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software to save state</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Maximum length of critical sections that disable
                    interrupts</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.myypxfj73doy"><span class="c7">Jitter</span></h4>
        <ul class="c0 lst-kix_42b5ugf6vgel-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Instructions cannot be interrupted</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_42b5ugf6vgel-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">C.f. DMA/CPU halting</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_42b5ugf6vgel-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Some instructions take more than one clock cycle</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The response time depends on the instruction executed when
                    the interrupt arrives</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.lyps8592h9ns">
            <span class="c7">How to keep ISRs fast and simple?</span>
        </h4>
        <ul class="c0 lst-kix_xu5rpe4bpozg-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Keep interrupts off during ISR</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.f33862ee904f150caf91056628659568479c3cf3"></a><a id="t.1"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c11 c19">Advantage</span>
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Disadvantage</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">No worries about stack depth</span>
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Latency</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >No overhead for re-entrant code</span
                            >
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Lost interrupts</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1">
            <span class="c6">ISR needs to be short/fast (always bounded)</span>
        </p>
        <ul class="c0 lst-kix_xcq0fm4vcde-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Move the data that needs processing to some buffer</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Set a global flag -&gt; volatile uint8_t</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Return immediately</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Check the flag in the main loop and do the work there</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.ssnzmqlvwz3r">
            <span class="c7">ISRs in C</span>
        </h4>
        <ul class="c0 lst-kix_aro9bd9yuf6z-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The C Language unfortunately has no support for ISRs</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Declaring ISRs is compiler specific</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">(See avr-libc documentation)</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Instructions are not interrupted, but&hellip;</span
            >
        </p>
        <ul class="c0 lst-kix_rw306w9aoqxq-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >C statements are typically compiled into multiple CPU
                    instructions</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">C statements can be interrupted!</span>
            </li>
        </ul>
        <h3 class="c20" id="h.i0vb11gbv2qb">
            <span class="c13">Event Driven Programming</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 325.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image50.png"
                    style="
                        width: 602px;
                        height: 325.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >The main loop may be empty or in a sleep command.</span
            >
        </p>
        <h4 class="c17" id="h.8d3xxx7vfsy4">
            <span class="c7">State Machines</span>
        </h4>
        <ul class="c0 lst-kix_28ncawvhm9yf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Moore machine:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_28ncawvhm9yf-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Output depends only on state</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_28ncawvhm9yf-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Forever loop</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Events drive the transitions</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Example:</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 404.48px;
                    height: 288.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image44.png"
                    style="
                        width: 404.48px;
                        height: 288.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >They are similar to automatons. Used in this module as more of
                a model to understand event driven programming.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h4 class="c17" id="h.rqc73rjswoss">
            <span class="c7">Internal and External Events</span>
        </h4>
        <p class="c1"><span class="c6">Internal:</span></p>
        <ul class="c0 lst-kix_lni6ppsj1lus-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">A timer overflow</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Completion of ADC conversion</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">External:</span></p>
        <ul class="c0 lst-kix_m68749kx6ek5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Analog comparator exceeds threshold </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Keyboard input</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Display refresh cycle</span>
            </li>
        </ul>
        <h4 class="c17" id="h.73uhw16g0ckz"><span class="c7">Events</span></h4>
        <p class="c1"><span class="c6">Things to consider:</span></p>
        <ul class="c0 lst-kix_isdrk05bwvmv-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Maximum arrival rate</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_isdrk05bwvmv-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Physical limit</span>
            </li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Scheduler</span></li>
        </ul>
        <ul class="c0 lst-kix_isdrk05bwvmv-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deadline for servicing</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_isdrk05bwvmv-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Cost if missed (hard to debug)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">What part is time sensitive</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_isdrk05bwvmv-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Longest time interrupts are disabled</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Impact on other realtime code</span>
            </li>
        </ul>
        <h3 class="c20" id="h.1v3ojoqelno6">
            <span class="c13"
                >Interrupt Vectors &amp; Interrupt Service Routine</span
            >
        </h3>
        <ul class="c0 lst-kix_fyjntbjm30cw-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Different interrupt sources &lt;- Events</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Each is associated with an ISR:</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >There needs to be an ISR for every interrupt source that is
                enabled. For the processor to know where to branch to, there is
                a table at the start of the program memory with the interrupt
                vector; the address of the ISR for each source.</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 457.76px;
                    height: 319.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image29.png"
                    style="
                        width: 457.76px;
                        height: 319.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">ISR: Things to watch out for:</span></p>
        <p class="c1"><span class="c6">Variables:</span></p>
        <ul class="c0 lst-kix_r4jgn3nztgl7-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A variable that is used in the ISR and the main program
                    needs to be declared volatile</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_r4jgn3nztgl7-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >This lets the compiler know that it can not be cached in a
                    register</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_r4jgn3nztgl7-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Multi-byte variables:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_r4jgn3nztgl7-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Access atomically outside ISR</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_r4jgn3nztgl7-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Registers</span></li>
        </ul>
        <ul class="c0 lst-kix_r4jgn3nztgl7-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Operations on registers that are used by the ISR and the
                    main program need to be atomic</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span>[</span
                ><span>Atomic = completes without interruption</span
                ><span class="c6">]</span>
            </li>
        </ul>
        <h4 class="c17" id="h.2rpa7pm9kf0i">
            <span class="c7">Volatile</span>
        </h4>
        <p class="c1"><span class="c6">Volatile is slow. </span></p>
        <ul class="c0 lst-kix_9wpaaqvmejz0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >It turns off all optimization for the variable</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If a volatile variable is used a lot in the ISR, copy it
                    into a local variable</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_9wpaaqvmejz0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >This will work if the ISR does keep interrupts
                    disabled</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.u8drdcrp5qji">
            <span class="c7">ISR Implementation</span>
        </h4>
        <ol class="c0 lst-kix_rvxgk3ilyon4-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Register ISR</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Enable interrupt at device level</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Globally enable interrupts</span>
            </li>
        </ol>
        <h4 class="c17" id="h.ddmsi5iopxr2">
            <span class="c7">avr-libc&rsquo;s interrupt API</span>
        </h4>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Facilitates Registering ISRs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Includes prologue and epilogue (reti();)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Switching on and off global interrupts </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c11">sei();</span
                ><span class="c6"
                    >&nbsp;- Enables interrupts by setting the global interrupt
                    mask.
                </span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c11">cli(); </span
                ><span class="c6"
                    >- Disables all interrupts by clearing the global interrupt
                    mask.</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Both functions actually compile into a single line of
                    assembly each, so there is no function call overhead.
                    However, their macros also imply a memory barrier which can
                    cause additional loss of optimization.</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Default configuration</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vd9fxnc9hlqc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Undefined ISR -&gt; reset</span>
            </li>
        </ul>
        <h2 class="c23" id="h.y3w5566qk0fl">
            <span class="c52">Memory Architecture</span>
        </h2>
        <h3 class="c20" id="h.94zk09lx0lzv">
            <span class="c13">Harvard Architecture</span>
        </h3>
        <p class="c1">
            <span class="c6">Separate memory for instructions and data.</span>
        </p>
        <p class="c1"><span class="c6">Program Bus:</span></p>
        <ul class="c0 lst-kix_ss45yknxacoe-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Flash 128 KB</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Data Bus:</span></p>
        <ul class="c0 lst-kix_4msbd5daix8y-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Registers (32&times;8 bit)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">SRAM 8 KB (Static Random Access Memory)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">EEPROM 4 KB</span>
            </li>
        </ul>
        <h3 class="c20" id="h.72pndtjr60uw">
            <span class="c13">Von Neumann vs. Harvard Architecture</span>
        </h3>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.5c2e2fd06a2c0fb1d1f337a04f654d5b7bec8e03"></a><a id="t.2"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Von Neumann</span>
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Harvard</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span
                                style="
                                    overflow: hidden;
                                    display: inline-block;
                                    margin: 0px 0px;
                                    border: 0px solid #000000;
                                    transform: rotate(0rad) translateZ(0px);
                                    -webkit-transform: rotate(0rad)
                                        translateZ(0px);
                                    width: 286px;
                                    height: 238.67px;
                                "
                                ><img
                                    alt=""
                                    src="assets/computer-systems-ii/image48.png"
                                    style="
                                        width: 286px;
                                        height: 238.67px;
                                        margin-left: 0px;
                                        margin-top: 0px;
                                        transform: rotate(0rad) translateZ(0px);
                                        -webkit-transform: rotate(0rad)
                                            translateZ(0px);
                                    "
                                    title=""
                            /></span>
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span
                                style="
                                    overflow: hidden;
                                    display: inline-block;
                                    margin: 0px 0px;
                                    border: 0px solid #000000;
                                    transform: rotate(0rad) translateZ(0px);
                                    -webkit-transform: rotate(0rad)
                                        translateZ(0px);
                                    width: 286px;
                                    height: 360px;
                                "
                                ><img
                                    alt=""
                                    src="assets/computer-systems-ii/image37.png"
                                    style="
                                        width: 286px;
                                        height: 360px;
                                        margin-left: 0px;
                                        margin-top: 0px;
                                        transform: rotate(0rad) translateZ(0px);
                                        -webkit-transform: rotate(0rad)
                                            translateZ(0px);
                                    "
                                    title=""
                            /></span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >No separation between data and program: CPU
                                decides what to execute</span
                            >
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Less bus congestion</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.qrhco4ynz5cm">
            <span class="c13">Types of Memory on AVR Microcontrollers</span>
        </h3>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.7cdfe9e1b231bf98ab7982df9fc75c3432c6d1ac"></a><a id="t.3"></a>
        <table class="c85">
            <tbody>
                <tr class="c27">
                    <td class="c34" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Bus</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Technology</span>
                        </p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Size</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Persistent</span>
                        </p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Writes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c34" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Program</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Flash</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">128 KB</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">yes</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">slow</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c34" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Data</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">EEPROM</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">4 KB</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">yes</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">slow</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c34" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Data</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">SRAM</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">8 KB</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">no</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">fast</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Slow writes not only impact performance, but need to be
                considered also from a reliability perspective (e.g., power
                failure).</span
            >
        </p>
        <h3 class="c20" id="h.9fchoi33nh3z">
            <span class="c13">Memory Technology</span>
        </h3>
        <h4 class="c17" id="h.kjcliggojjch"><span class="c7">Flash</span></h4>
        <ul class="c0 lst-kix_3zmynpk95638-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Non-volatile</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fast cell-level read</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Block write</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Write requires erase</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Limited number of writes (~100k?)</span>
            </li>
        </ul>
        <h4 class="c17" id="h.amvqlzcwo2g4"><span class="c7">EEPROM</span></h4>
        <ul class="c0 lst-kix_9zbf3viv4dy6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Non-volatile</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cell-level read</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cell-level write</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Limited number of writes (~100k?)</span>
            </li>
        </ul>
        <h4 class="c17" id="h.5t5kk0y8085t"><span class="c7">SRAM</span></h4>
        <ul class="c0 lst-kix_mtcg7o3zyixt-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Very fast</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Volatile</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cell level random read/write</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unlimited read/write</span>
            </li>
        </ul>
        <h3 class="c20" id="h.dnjyhgy4tdbg">
            <span class="c13">Addressing</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 392px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image7.png"
                    style="
                        width: 602px;
                        height: 392px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >Flash, RAM and EEPROM memory, all have address spaces starting
                at $0000.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.8u4q7mjjp4y2">
            <span class="c13">RAM Layout</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 543.42px;
                    height: 468.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image11.png"
                    style="
                        width: 543.42px;
                        height: 468.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.gqfa7cldfov">
            <span class="c7">Heap/Stack</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >RAM that is not taken up by the global variables and the local
                static variables is shared dynamically between the heap and the
                stack.</span
            >
        </p>
        <p class="c1"><span class="c16">Heap</span><span class="c6">:</span></p>
        <ul class="c0 lst-kix_hybj3ddmjeol-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Used to serve explicit runtime memory request</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Library functions may use this (io.h)</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c16">Stack</span><span class="c6">:</span>
        </p>
        <ul class="c0 lst-kix_8243d0a2h0ls-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Required for function calls</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Starts at the top of the RAM, grows down</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">In the RAM layout:</span></p>
        <ul class="c0 lst-kix_aoab4b2z7je2-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No memory management unit (hardware)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stack and Heap can collide</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Overwriting variables is unlikely (as at the top)</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.xt8znop56uab">
            <span class="c7">Heap/Stack Collision</span>
        </h4>
        <ul class="c0 lst-kix_6rew5pc88ldk-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stack growth</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6rew5pc88ldk-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Recursive function calls</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Large local variables (e.g., image array)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Many local variables</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6rew5pc88ldk-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Heap growth</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6rew5pc88ldk-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Beware of heap fragmentation</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Watch out for libraries</span>
            </li>
        </ul>
        <h3 class="c20" id="h.2o04ijtzakly">
            <span class="c13">Handling Memory in C</span>
        </h3>
        <ol class="c0 lst-kix_i447ycucqqeh-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">malloc(SIZE)</span>
            </li>
        </ol>
        <p class="c1 c75">
            <span class="c6">Request memory from the heap</span>
        </p>
        <ol class="c0 lst-kix_i447ycucqqeh-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Check whether the memory has been granted</span
                >
            </li>
        </ol>
        <ul class="c0 lst-kix_i447ycucqqeh-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >malloc() returns pointer to assigned memory</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >NULL pointer means you&rsquo;re out of memory</span
                >
            </li>
        </ul>
        <ol class="c0 lst-kix_i447ycucqqeh-0" start="3">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">free(POINTER)</span>
            </li>
        </ol>
        <p class="c1 c75"><span class="c6">Return memory to the heap</span></p>
        <ul class="c0 lst-kix_i447ycucqqeh-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">It&rsquo;s okay to free(NULL)</span>
            </li>
        </ul>
        <h4 class="c17" id="h.oldv0tjws5zw"><span class="c7">Speed</span></h4>
        <ul class="c0 lst-kix_zhe1n1d2gqu6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Calls to malloc() are relatively slow</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Memory allocation is critical for performance</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No checks are made</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_zhe1n1d2gqu6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Would just waste cycles most of the time</span>
            </li>
        </ul>
        <h4 class="c17" id="h.uivo2ha0ov4n">
            <span class="c7">Don&rsquo;t be sloppy</span>
        </h4>
        <ul class="c0 lst-kix_tmhrnb5zdsr4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Always check whether memory has been granted before using
                    it: NULL Pointer checks.</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Free the memory you have been assigned as early as
                    possible</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Only call free on address you are in charge of</span
                >
            </li>
        </ul>
        <p class="c1">
            <span>If you don&rsquo;t follow these rules you might </span
            ><span class="c16 c11">DIE</span><span class="c6">!</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Well&hellip; maybe not, but these things are more likely:</span
            >
        </p>
        <ul class="c0 lst-kix_vjd9skkraeo5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Immediate crashes </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vjd9skkraeo5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">The best case!</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vjd9skkraeo5-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Randomly occurring crashes</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vjd9skkraeo5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Hard to debug</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vjd9skkraeo5-0">
            <li class="c1 c3 li-bullet-0">
                <span>Memory leak</span><span class="c6">s</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vjd9skkraeo5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Only noticeable after long runt</span
                ><span class="c6">ime</span>
            </li>
        </ul>
        <h4 class="c17" id="h.fto10g9h8tnq">
            <span class="c7">How is malloc implemented</span>
        </h4>
        <ul class="c0 lst-kix_pnnnzqye5chl-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Record size of allocated blocks</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">2 Bytes pre-prended</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Maintain free list</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Linked with address in free block</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">malloc()</span></li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Find best match in freelist that can be used</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">free()</span></li>
        </ul>
        <ul class="c0 lst-kix_pnnnzqye5chl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Merge adjacent blocks</span>
            </li>
        </ul>
        <h2 class="c23" id="h.qz974i7jdxpu">
            <span class="c52">Device Drivers</span>
        </h2>
        <h3 class="c20" id="h.la3nqb9xdgc7">
            <span class="c13">Operating System (OS)</span>
        </h3>
        <h4 class="c17" id="h.k1t0y9is03vt">
            <span class="c7">Uniform Interface</span>
        </h4>
        <ul class="c0 lst-kix_dr3iq8ijiyjz-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">For users</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">For programs</span>
            </li>
        </ul>
        <h4 class="c17" id="h.sr38kqwt2clk">
            <span class="c7">Management of Resources</span>
        </h4>
        <ul class="c0 lst-kix_sprirwnjmjfd-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">CPU time</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Memory</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Access to devices</span>
            </li>
        </ul>
        <h4 class="c17" id="h.w70ostbnykb6">
            <span class="c7">Management of Interactions</span>
        </h4>
        <ul class="c0 lst-kix_us6f6k707tf1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Desired: networking, comms, among users/processes</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Undesired: protection, security</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">Uniform for device class or system:</span>
        </p>
        <p class="c1"><span class="c6">PC:</span></p>
        <ul class="c0 lst-kix_qsqyl0z3glem-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Terminal</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Keyboard</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Hard Disk</span></li>
        </ul>
        <p class="c1"><span class="c6">Embedded:</span></p>
        <ul class="c0 lst-kix_e2dahmqdkabj-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Serial Port?</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Memory Card?</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >A PC has a minimum guaranteed amount of I/O hardware. In
                contrast, embedded systems hardware configurations vary widely.
                Nevertheless if a type of I/O exist, a standardized form of
                access can be provided.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >This is where device drivers come in the layers of the
                system.</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 312.5px;
                    height: 221.56px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image40.png"
                    style="
                        width: 312.5px;
                        height: 221.56px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c19 c11"></span></p>
        <p class="c1">
            <span class="c11">Device driver</span
            ><span class="c6"
                >&nbsp;- In computing, a device driver is a computer program
                that operates or controls a particular type of device that is
                attached to a computer. A driver provides a software interface
                to hardware devices, enabling operating systems and other
                computer programs to access hardware functions without needing
                to know precise details about the hardware being used.</span
            >
        </p>
        <ul class="c0 lst-kix_vmachitjojhi-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c16">Wikipedia</span>
            </li>
        </ul>
        <h3 class="c20" id="h.l1qx2ry7ha2y">
            <span class="c13">OS Application Interface</span>
        </h3>
        <p class="c1"><span class="c6">Isolates software from</span></p>
        <ul class="c0 lst-kix_8gftkp8nnc1u-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Device details</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Device technology</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Communication protocol (bus type)</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >They may be stable over decades, and they are a bridge to user
                space</span
            >
        </p>
        <p class="c1"><span class="c6">They also:</span></p>
        <ul class="c0 lst-kix_t638qijupnxv-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Abstraction of Device</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_t638qijupnxv-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Character devices</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Block devices</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_t638qijupnxv-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Buffering</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Error handling</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Allocation</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_t638qijupnxv-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Naming</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Protection</span>
            </li>
        </ul>
        <h3 class="c20" id="h.jzmgsxi1cypo">
            <span class="c13">Role of the Driver</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 93.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image2.png"
                    style="
                        width: 602px;
                        height: 93.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >Aside from read/write requests the driver also may need
                to:</span
            >
        </p>
        <ul class="c0 lst-kix_n4bv19aitxjj-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Initialize the device</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Manage the power supply of the device</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n4bv19aitxjj-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Power up, standby, dower down</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n4bv19aitxjj-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Protect device from harmful commands</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Deal with availability -&gt; hot pluggable</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">For access to I/O registers</span></p>
        <ul class="c0 lst-kix_wtxqgqqk3p05-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">It needs privileged access</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Run in kernel space</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Require detailed knowledge of device hardware</span
            >
        </p>
        <ul class="c0 lst-kix_lxz6api9s8x9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Made by device manufacturer</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Security problem!</span>
            </li>
        </ul>
        <h4 class="c17" id="h.pecrqoqrrajo">
            <span class="c7">Abstraction</span>
        </h4>
        <ul class="c0 lst-kix_4qxvxou0r061-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Desired to simplify programming</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Desired for code lifetime/reuse</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">But:</span></p>
        <ul class="c0 lst-kix_mumy584wz4so-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">May get in the way for optimization</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_mumy584wz4so-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Physical device can differ from abstract model assumed by
                    OS</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.desaqoemk7ql">
            <span class="c7">Potential Drivers on LaFortuna</span>
        </h4>
        <ul class="c0 lst-kix_gxrt8pihbe3j-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Buttons and rotary encoder</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Display driver</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">File system</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_gxrt8pihbe3j-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">SD card</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">EEPROM?</span></li>
        </ul>
        <ul class="c0 lst-kix_gxrt8pihbe3j-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Audio output</span>
            </li>
        </ul>
        <h3 class="c20" id="h.teeqgx3rc22h">
            <span class="c13">How to write a driver</span>
        </h3>
        <p class="c1"><span class="c6">Start with data sheet</span></p>
        <ul class="c0 lst-kix_hfckmgxoig0a-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">What commands are available?</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">Any sample code provided?</span></p>
        <ul class="c0 lst-kix_1we1z45rl0uk-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Getting a complex device to react for the first time can be
                    a challenge</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Pay detailed attention to reset conditions and the required
                timing for initialization</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.fr72j1l1ur64">
            <span class="c13">Connecting Hardware to a Microcontroller</span>
        </h3>
        <p class="c1">
            <span class="c6">&hellip; typically challenging:</span>
        </p>
        <ul class="c0 lst-kix_24mny4yybn6f-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low-level hardware develops fast</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >To reach volume hardware is very adaptable -&gt; complex to
                    configure</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Documentation often poor</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Sample code generally poor</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Chips are often substituted with variants</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Chips have bugs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_24mny4yybn6f-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Know the Errata [A list of errors and their corrections
                    inserted]</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.5v1zcspg5qgt">
            <span class="c7">Connecting extra modules to LaFortuna</span>
        </h4>
        <p class="c1"><span class="c6">Precautions:</span></p>
        <ul class="c0 lst-kix_fkefhanlxgqa-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >While unconnected sensitive to electrostatics</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_fkefhanlxgqa-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Touch a metal case before handling</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Wrap in aluminium foil for storage</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fkefhanlxgqa-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Never reverse polarity on power supply lines</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If the microcontroller and the module run on different
                    voltage, check whether extra circuitry is needed</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.wgwtulmditkc">
            <span class="c13">TFT LCD Display</span>
        </h3>
        <ul class="c0 lst-kix_2hgi9u5pmibh-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Technical name: Displaytech DT022BTFT</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >2.2 inch Thin-Film-Transistor Liquid-Crystal Display</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >320 dots &times; 240 RGB pixels on 45.12 mm &times; 33.84
                    mm</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">262K colours (18 bit)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Driver: iltek ILI9341 or compatible</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_2hgi9u5pmibh-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Driver refers to the driver circuit driving the &gt; 100
                    lines of the display, not software driver providing the
                    device independent interface</span
                >
            </li>
        </ul>
        <p class="c1">
            <span>(</span
            ><span class="c16 c11"
                >You probably don&rsquo;t need to remember any of this lol</span
            ><span class="c6">)</span>
        </p>
        <h4 class="c17" id="h.b5s3kt6hq2og">
            <span class="c7">ILI9341 TFT Display Driver</span>
        </h4>
        <ul class="c0 lst-kix_jd87pn1uuo65-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">168 kB Video RAM</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >6-, 8-, 9-, 16-, 18-bits parallel interface</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">3-, 4- line serial interface</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Sleep and idle (8 color) mode</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Supports two color depth:</span></p>
        <ul class="c0 lst-kix_3egnd27kv177-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">262K colours (3 &times; 6 bits for RGB)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">65K colours (5-6-5 bits for RGB)</span>
            </li>
        </ul>
        <h3 class="c20" id="h.1orhqj6u2hy8">
            <span class="c13">Microcontroller Interface Modes</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >The interface mode is selected by hardware with pins.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                >Other devices (e.g., SD card) may start a negotiating process
                on the simplest/slowest interface.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >(look at the slides for some diagrams idk what they are showing
                really lol)</span
            >
        </p>
        <h2 class="c23" id="h.hhq8s0saaoh9">
            <span class="c52">Real-time Scheduling</span>
        </h2>
        <h3 class="c20" id="h.w7g1djeid40y">
            <span class="c13">Real-time Deadlines</span>
        </h3>
        <ul class="c0 lst-kix_x3m4qycr0aj3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks have deadlines</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks can be periodic or aperiodic</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Task duration can be constant or not</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">Deadline: </span
            ><span class="c6"
                >The latest time by which a task has to be completed.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_58dy83o6fd5b-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Often require predictable behaviour -&gt; guarantees</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.1slhkq4ufxzs">
            <span class="c13">CPU Utilization: U</span>
        </h3>
        <p class="c1">
            <span>U = c</span><span class="c14">total </span><span>- c</span
            ><span class="c14">idle </span><span class="c6">&lt;= 1</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">C total = Total CPU time available (100%)</span>
        </p>
        <p class="c1">
            <span class="c6"
                >C idle = Fraction of CPU time spent in idle task or
                sleeping</span
            >
        </p>
        <h3 class="c20" id="h.8pyli3z1vf8l">
            <span class="c13">Assumptions for Analysis</span>
        </h3>
        <ol class="c0 lst-kix_v5gb7ojxx0b9-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks are periodic</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_v5gb7ojxx0b9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Convert aperiodic tasks by polling</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_v5gb7ojxx0b9-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The deadline for a task is its next invocation</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Context switches take no time</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_v5gb7ojxx0b9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Leave some margin in duration and deadline</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.w26kmjdazku5">
            <span class="c13">Load from Set of Periodic Tasks</span>
        </h3>
        <p class="c1">
            <span>Given a set of tasks T</span><span class="c14">1</span
            ><span>..T</span><span class="c14">n</span
            ><span>&nbsp;with periodicity p</span><span class="c14">i</span
            ><span>&nbsp;and fixed CPU time c</span><span class="c14">i</span
            ><span>&nbsp;for T</span><span class="c14">i</span
            ><span class="c6">&nbsp;the utilization is:</span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 249px;
                    height: 182px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image46.png"
                    style="
                        width: 249px;
                        height: 182px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.irpoujlo39u7">
            <span class="c13">Schedulability</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Requirement: All tasks meet their deadlines all the time.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">A real time system is schedulable if:</span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 274px;
                    height: 132px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image41.png"
                    style="
                        width: 274px;
                        height: 132px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >(Assuming periodic tasks, with the next invocation as deadline
                and no overhead for context switching)</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">How to schedule it?</span></p>
        <p class="c1">
            <span class="c6">We need predictable worst case performance.</span>
        </p>
        <h4 class="c17" id="h.jup0x6rlnc87">
            <span class="c7">Simple Case</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >All tasks can finish within the period of the most frequent
                task.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Static cyclic scheduling possible: use table to assign time
                slots to tasks.</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 190.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image36.png"
                    style="
                        width: 602px;
                        height: 190.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.ciy4f3m1nucv">
            <span class="c7">Priority</span>
        </h4>
        <ol class="c0 lst-kix_uihzfa6qjfsa-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fixed (static) priority</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_uihzfa6qjfsa-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Assigned at compile time</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_uihzfa6qjfsa-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Dynamic priority</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_uihzfa6qjfsa-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Changes during runtime</span>
            </li>
        </ul>
        <h4 class="c17" id="h.km5mvv4wjg9v">
            <span class="c7">Fixed Priority Scheduling</span>
        </h4>
        <ul class="c0 lst-kix_bjq37o8n9b6e-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Simple</span></li>
        </ul>
        <ul class="c0 lst-kix_bjq37o8n9b6e-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Code (and changes) relatively easy to verify</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bjq37o8n9b6e-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Well understood</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjq37o8n9b6e-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Confidence in behaviour</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>Optimal fixed priority scheme: </span
            ><span class="c11">R</span><span>ate </span
            ><span class="c11">M</span><span>onotonic </span
            ><span class="c11">S</span><span class="c6">cheduling</span>
        </p>
        <h3 class="c20" id="h.qvf44dsh8hn9">
            <span class="c13">Rate Monotonic Scheduling (RMS)</span>
        </h3>
        <h4 class="c17" id="h.qfeoes5melcu">
            <span class="c7">Requirements for RMS</span>
        </h4>
        <ol class="c0 lst-kix_88b8ewkyzce9-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks are independent</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_88b8ewkyzce9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">No blocking for each other</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_88b8ewkyzce9-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks have fixed CPU requirement</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Free context switching</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deadline is task period</span>
            </li>
        </ol>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>If the conditions for </span><span class="c11">RMS</span
            ><span>&nbsp;are met, then it is </span
            ><span class="c11">optimal</span
            ><span class="c6"
                >&nbsp;to assign fixed priorities according to the period:</span
            >
        </p>
        <ul class="c0 lst-kix_q3si3pautwxe-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c39 c16"
                    >The most frequent task has highest priority</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Guaranteed scheduling for:</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 406.5px;
                    height: 136.79px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image14.png"
                    style="
                        width: 406.5px;
                        height: 136.79px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">n = number of tasks</span></p>
        <p class="c1">
            <span>c</span><span class="c14">i</span
            ><span class="c6">&nbsp;= duration of task</span>
        </p>
        <p class="c1">
            <span>p</span><span class="c14">i</span
            ><span class="c6">&nbsp;= period of task</span>
        </p>
        <h4 class="c17" id="h.kna60tudnzdb">
            <span class="c7">RMS Priority</span>
        </h4>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.324ac4f01d41f5a7dc184935693600394807b6af"></a><a id="t.4"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Task</span></p>
                    </td>
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Importance</span>
                        </p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Frequency</span>
                        </p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Priority</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">A</span></p>
                    </td>
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Very high (critical)</span>
                        </p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">2 Hz</span></p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">1</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">B</span></p>
                    </td>
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">High</span></p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0.1 Hz</span></p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">2</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">C</span></p>
                    </td>
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Medium</span></p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">50 Hz</span></p>
                    </td>
                    <td class="c47" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>0 </span><span class="c39 c16">high</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1">
            <span class="c16">The </span><span class="c16 c11">priority </span
            ><span class="c16">in </span><span class="c11 c16">RMS </span
            ><span class="c16">is directly derived from the </span
            ><span class="c16 c11">frequency </span
            ><span class="c16">of the task. It has </span
            ><span class="c16 c11">nothing </span
            ><span class="c16">to do with the </span
            ><span class="c16 c11">importance </span
            ><span class="c39 c16">of the task!</span>
        </p>
        <h4 class="c17" id="h.iw4xdg9fpgja">
            <span class="c7">RMS is optimal for fixed priorities</span>
        </h4>
        <ul class="c0 lst-kix_kjhyrmn2l9ph-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Use RMS, your own priority assignment cannot outperform
                    it</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >What if your task set does not satisfy U bound?</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >To guarantee scheduling for any task set that satisfies the
                conditions, the bound has to assume as worst-cast task
                set.</span
            >
        </p>
        <ul class="c0 lst-kix_f2mzagdoayrl-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Your task set may still be RMS schedulable</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >But you don&#39;t get the guarantee that it is</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Requires analysis of specific task set</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">If you are wasting 30% of the CPU time</span>
        </p>
        <ul class="c0 lst-kix_9di13h5zb6ea-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Run non-real time tasks as low priority in remaining CPU
                    time</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Optimize task periods to achieve a regular execution
                    pattern</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.pt6ntp10qom8">
            <span class="c13">Harmonic Task Sets</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Every task period is a multiple of the period of any higher
                priority task</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.e3ecffbddc7317cc8d23b1461dc076323ec10455"></a><a id="t.5"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Non-harmonic</span>
                        </p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Harmonic</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P1 = 17 ms</span></p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P1 = 15 ms</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P2 = 31 ms</span></p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P2 = 30 ms</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P3 = 130 ms</span></p>
                    </td>
                    <td class="c32" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">P3 = 120 ms</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_88zlg5bw99kb-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If possible make your task set harmonic and schedule with
                    RMS</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c16">RMS can reach </span
                ><span class="c16 c11">100% utilization</span
                ><span class="c16 c39">&nbsp;with harmonic task sets</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Harmonic task sets are easy to analyze</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_88zlg5bw99kb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Regular execution pattern</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_88zlg5bw99kb-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Note: shorter deadlines may be better!</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_88zlg5bw99kb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Decrease periods to make harmonic</span>
            </li>
        </ul>
        <h4 class="c17" id="h.lwj9nmy68yku">
            <span class="c7">RMS issues to consider</span>
        </h4>
        <ul class="c0 lst-kix_7my60z3eovxb-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >What happens in RMS scheduling in an overload
                    situation?</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Are the assumptions made for RMS analysis realistic?</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deadlines can be used instead of periods</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_7my60z3eovxb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Useful if deadlines are earlier than next period</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.bz4bnamz4av5">
            <span class="c13">Dynamic Priority Scheduling</span>
        </h3>
        <h4 class="c17" id="h.vsfh4aqg3s38">
            <span class="c7">Earliest Deadline First</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Is a high utilization possible with non-harmonic task
                sets?</span
            >
        </p>
        <ul class="c0 lst-kix_p1djk09y3200-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Dynamic change of priority</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Run most urgent task first</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Higher complexity in scheduler</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Utilization up to 100% possible</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">With and without preemption</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_p1djk09y3200-1 start">
            <li class="c1 c5 li-bullet-0">
                <span
                    >[preemption is the act of temporarily interrupting a task
                    being carried out by a computer system, without requiring
                    its cooperation, and with the intention of resuming the task
                    at a later time.]</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.lpgm9p74e84c">
            <span class="c7">Earliest Deadline First (EDF)</span>
        </h4>
        <ul class="c0 lst-kix_rxwg8bl7bpb1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span
                    style="
                        overflow: hidden;
                        display: inline-block;
                        margin: 0px 0px;
                        border: 0px solid #000000;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                        width: 401px;
                        height: 99px;
                    "
                    ><img
                        alt=""
                        src="assets/computer-systems-ii/image33.png"
                        style="
                            width: 401px;
                            height: 99px;
                            margin-left: 0px;
                            margin-top: 0px;
                            transform: rotate(0rad) translateZ(0px);
                            -webkit-transform: rotate(0rad) translateZ(0px);
                        "
                        title=""
                /></span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Scheduler is </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_rxwg8bl7bpb1-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">More complicated</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">More overhead</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_rxwg8bl7bpb1-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Can handle changing importance of tasks</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Can accommodate new tasks at runtime</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Can handle variable execution times</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Not stable under overload</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">EDF is optimal</span>
            </li>
        </ul>
        <h2 class="c23" id="h.79bopy9zsayn">
            <span class="c52">Multitasking &amp; RIOS</span>
        </h2>
        <h3 class="c20" id="h.fz23jxe2m091">
            <span class="c13">OS: Multiprogramming</span>
        </h3>
        <ul class="c0 lst-kix_2vp0hff8anzk-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Multiple programs available for execution on CPU</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If one process needs to wait for I/O, the CPU can work on
                    another process</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_2vp0hff8anzk-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Increased throughput</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Increased CPU utilization</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_2vp0hff8anzk-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Key issue: protection</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_2vp0hff8anzk-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Pseudo-parallelism [illusion of several programs running at
                    the same time, although its just rapid CPU context
                    switching.]</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.cxu5wwojcrd8">
            <span class="c13">Processes</span>
        </h3>
        <p class="c1">
            <span class="c11">Process / Task / Thread</span
            ><span class="c6"
                >&nbsp;- an abstraction of a program in execution</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >A process has an entry in the process table that typically
                contains:</span
            >
        </p>
        <ul class="c0 lst-kix_r03puw8kroqt-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Instruction counter and stack pointer</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Assigned address space</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Associated resources</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">State</span></li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Depending on the complexity of switching between, and the level
                of isolation among processes, you can also talk about tasks and
                threads.</span
            >
        </p>
        <h4 class="c17" id="h.65kl7siqf8dq">
            <span class="c7">Process States</span>
        </h4>
        <ul class="c0 lst-kix_yg1w6wknuww-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Running </span><span>-</span
                ><span class="c11">&nbsp;</span
                ><span class="c6">currently using the CPU</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Ready </span><span>-</span
                ><span class="c11">&nbsp;</span
                ><span class="c6"
                    >runnable, but stopped to let another process run</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Blocked </span
                ><span class="c6"
                    >- unable to run until an external event happens</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 557.23px;
                    height: 308.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image18.png"
                    style="
                        width: 557.23px;
                        height: 308.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >There is one running process, but also a ready set and blocked
                set of processes.</span
            >
        </p>
        <h4 class="c17" id="h.14l5ekt7qcp5">
            <span class="c7">State Transitions of Processes</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Processes typically alternate bursts of computing with I/O
                requests. While waiting for I/O they are blocked from CPU
                access.</span
            >
        </p>
        <ul class="c0 lst-kix_gopbu7nluo4u-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">When does a process become ready?</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">When does a process become blocked?</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>What can happen if more than one process is </span
                ><span class="c16">blocked</span><span class="c6">?</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>What should happen if more than one process is </span
                ><span class="c16">ready</span><span class="c6">?</span>
            </li>
        </ul>
        <h3 class="c20" id="h.mgs0ncbzdu6y">
            <span class="c13">Scheduling</span>
        </h3>
        <p class="c1">
            <span class="c11">Scheduler </span
            ><span class="c6"
                >- decides which process from the set of ready processes will
                get the CPU next.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >The requirements for the scheduler differ according to the
                nature of the processes and the computer system:</span
            >
        </p>
        <ul class="c0 lst-kix_qcwludrpxz3a-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Fairness</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Response time</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Throughput</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Turnaround</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">CPU utilization</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deadlines (hard/soft)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Predictability</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Adherence to policy</span>
            </li>
        </ul>
        <h4 class="c17" id="h.ug4qfrg38x71">
            <span class="c7">Scheduling Algorithms</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >According to what criteria can/should the scheduler
                select?</span
            >
        </p>
        <ul class="c0 lst-kix_q2ok9i702bns-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">First-come first-served</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Shortest job first</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Round robin</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_q2ok9i702bns-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Quanta, preemptive, context switch</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_q2ok9i702bns-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Shortest remaining time</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Priority scheduling</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Lottery scheduling</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_q2ok9i702bns-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Fraction of CPU, no guarantees</span>
            </li>
        </ul>
        <h4 class="c17" id="h.93qihmmtm9vz">
            <span class="c7">Round Robin</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Every process gets a time slices and is served in a fixed
                order</span
            >
        </p>
        <ul class="c0 lst-kix_6p75ckgx9e4e-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Short Quantum:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6p75ckgx9e4e-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Overhead of context switching is high</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6p75ckgx9e4e-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Long Quantum:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6p75ckgx9e4e-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Long response time</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Good efficiency -&gt; process block for I/O before quantum
                    expires</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_6p75ckgx9e4e-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Typically 20-50 ms</span>
            </li>
        </ul>
        <h4 class="c17" id="h.cdp9v3oxwdiy">
            <span class="c7">Lottery Scheduling</span>
        </h4>
        <ul class="c0 lst-kix_8k3eco3fusbf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Processes receive &ldquo;lottery tickets&rdquo; according
                    to share of CPU time they should have</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A ticket is chosen at random and the CPU is allocated to
                    process that holds the ticket</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Processes may share their tickets (client - server)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Easy to share CPU, but no guarantees</span>
            </li>
        </ul>
        <h3 class="c20" id="h.siloqlensfqm">
            <span class="c13">Scheduling Scenarios</span>
        </h3>
        <ul class="c0 lst-kix_xkiskrv8k5z3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Interactive Applications (maybe malicious)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_xkiskrv8k5z3-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">User on terminal</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Client on server</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xkiskrv8k5z3-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Real-time tasks (cooperative)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Batch processing (typically cooperative)</span>
            </li>
        </ul>
        <h3 class="c20" id="h.1jiy3ukycx2h">
            <span class="c13">Context Switching</span>
        </h3>
        <ul class="c0 lst-kix_i2g8l15cxx23-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>Switch from </span><span class="c11">user </span
                ><span>process to </span><span class="c11">kernel </span
                ><span class="c6">process</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Switch from </span><span class="c11">kernel </span
                ><span>process to </span><span class="c11">user </span
                ><span class="c6">process</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Context switching requires CPU time - this time is
                wasted.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Context switch overhead:</span></p>
        <ul class="c0 lst-kix_fk6knrphd9v8-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Save / restore:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fk6knrphd9v8-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Program counter</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Stack register(s)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Status register</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">General purpose registers</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Memory map</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">I/O status (outstanding requests)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fk6knrphd9v8-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Memory cache is invalidated</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Working set of pages is invalidated</span>
            </li>
        </ul>
        <h3 class="c20" id="h.lywi5xvcli68">
            <span class="c13">Real-time Scheduling</span>
        </h3>
        <h4 class="c17" id="h.6cdfx85zeuj0">
            <span class="c7">Constraints On Computation</span>
        </h4>
        <ol class="c0 lst-kix_nh54yhah5mb2-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Correct (normal system)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Within deadline</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_nh54yhah5mb2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Soft real-time systems (e.g., multimedia)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Hard real-time systems (e.g., flight control)</span
                >
            </li>
        </ul>
        <ol class="c0 lst-kix_nh54yhah5mb2-0" start="3">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Within power budget (new research area)</span>
            </li>
        </ol>
        <h4 class="c17" id="h.veftwvhljtwb">
            <span class="c7">Real-Time Systems</span>
        </h4>
        <ul class="c0 lst-kix_lna3wtlix42j-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Interaction with physical environment</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_lna3wtlix42j-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Vehicle, power plant, robot, assembly line</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_lna3wtlix42j-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Timing constraints</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_lna3wtlix42j-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >A correct reaction too late is not useful</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.bydw0gdomt2h"><span class="c13">RIOS</span></h3>
        <p class="c1">
            <span class="c11">RIOS </span
            ><span class="c6">- Riverside/Irvine Operating System</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_g1kj2h4w2n5k-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Minimalist but practical scheduler</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fixed priorities</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Preemptive multitasking</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Bounded stack usage</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">~20 lines of C -&gt; understandable</span>
            </li>
        </ul>
        <h4 class="c17" id="h.smtu6ypfclqn">
            <span class="c7">Key Concept of RIOS</span>
        </h4>
        <ul class="c0 lst-kix_z0iw5lvzuhu4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Tasks execute within ISR (!)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Preemption -&gt; Reentrant</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_z0iw5lvzuhu4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Nested interrupts</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Maintains its own stack of running tasks</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Careful with printf()</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_z0iw5lvzuhu4-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No self-preemption</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_z0iw5lvzuhu4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Stack depth bounded by total number of tasks</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Higher priority task in stack always on top</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>(See the slides for some code examples lol)</span>
        </p>
        <h2 class="c23" id="h.w923my1zwdcm">
            <span class="c52">Persistent Storage</span>
        </h2>
        <p class="c1">
            <span class="c16">Note: the </span
            ><span class="c16 c11">details </span
            ><span class="c16">persistent storage </span
            ><span class="c39 c16">section are not examinable. </span>
        </p>
        <ul class="c0 lst-kix_kvimdgaz0e8h-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">[Source: Klaus saying in lecture.]</span>
            </li>
        </ul>
        <h3 class="c20" id="h.749jmshzvuiz">
            <span class="c13">On LaFortuna</span>
        </h3>
        <ul class="c0 lst-kix_qn3mqq6vdy3d-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">EEPROM -&gt; Databus</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Flash Memory -&gt; Programbus</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Secure Digital (SD) Card -&gt; SPI</span>
            </li>
        </ul>
        <h3 class="c20" id="h.wpja0vq95nre"><span class="c13">EEPROM</span></h3>
        <p class="c1">
            <span class="c11">E</span><span>lectrically </span
            ><span class="c11">E</span><span>rasable </span
            ><span class="c11">P</span><span>rogrammable </span
            ><span class="c11">R</span><span>ead-</span
            ><span class="c11">O</span><span>nly </span
            ><span class="c11">M</span><span class="c6">emory</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_8snvykqmmxp6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Single memory cells can be written</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8snvykqmmxp6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">In contrast to Flash</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8snvykqmmxp6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Slow access</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8snvykqmmxp6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Parameter Storage</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Code tracing</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8snvykqmmxp6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Limited number of write cycles</span>
            </li>
        </ul>
        <h4 class="c17" id="h.3a0cjblpj0ib">
            <span class="c7">CMOS Floating Gate Transistors</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 289.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image8.png"
                    style="
                        width: 602px;
                        height: 289.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >Programming requires up to 20 V -&gt; stressing
                transistors</span
            >
        </p>
        <h4 class="c17" id="h.54n9jsnv6mbj">
            <span class="c7">Speed vs. Endurance Trade-off</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >In the design of an EEPROM, programming speed has to be traded
                against endurance.</span
            >
        </p>
        <ul class="c0 lst-kix_k5v0hgt0epe-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Internal high voltage</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_k5v0hgt0epe-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Increase: </span><span class="c67">fast</span
                ><span>&nbsp;</span><span>programming, </span
                ><span class="c49">low</span
                ><span class="c6">&nbsp;endurance</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_k5v0hgt0epe-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">HV Ramp Rate</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_k5v0hgt0epe-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Increase: </span><span class="c67">fast</span
                ><span>&nbsp;</span><span>programming, </span
                ><span class="c49">low</span
                ><span class="c6">&nbsp;endurance</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_k5v0hgt0epe-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Oxide Thickness</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_k5v0hgt0epe-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Increase: </span><span class="c49">slow</span
                ><span>&nbsp;programming, </span><span class="c67">high</span
                ><span>&nbsp;</span><span class="c6">endurance</span>
            </li>
        </ul>
        <h4 class="c17" id="h.h0vvxrd5h44d">
            <span class="c7">Amount of Data / Write Frequency</span>
        </h4>
        <p class="c1">
            <span class="c6">Sample application: Telephone &#9742;</span>
        </p>
        <ul class="c0 lst-kix_awoxdn8u4xg1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Last number redial -&gt; frequency writes</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Speed dial numbers -&gt; rare writes</span>
            </li>
        </ul>
        <p class="c1">
            <span>Small amounts of data, frequent writes: you can use a </span
            ><span class="c11">Ringbuffer</span><span class="c6">!</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h4 class="c17" id="h.xp1iodhyat1h">
            <span class="c7"
                >EEPROM on AT90USB1286 (LaFortuna Microcontroller)</span
            >
        </h4>
        <ul class="c0 lst-kix_p30y0fc58ooi-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Size: 4 KB</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Endurance: &gt;= 100k erase/write cycles</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_p30y0fc58ooi-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Cycles for each byte</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Can be destroyed quickly with an 8 MHz clock</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_p30y0fc58ooi-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >User Brown-out detection to avoid corruption</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.i03j9xbqtozo">
            <span class="c13">Flash Memory</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Flash Memory is the most common non-volatile storage for
                embedded systems.</span
            >
        </p>
        <ul class="c0 lst-kix_ijy9ugogc7gl-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >It is (still) relatively expensive, but embedded systems
                    usually do not have large amounts of memory</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">It is compact and robust to:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ijy9ugogc7gl-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Vibration</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Magnetic fields</span>
            </li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Dust</span></li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_ijy9ugogc7gl-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Very limited number of writes:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ijy9ugogc7gl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c11">MLC</span
                ><span class="c6"
                    >&nbsp;(Multi-Level Cell) flash with its 2-bits per cell:
                    ~5000 program/erase cycles</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c11">TLC </span
                ><span class="c6"
                    >(Triple-Level Cell) flash (3 layer cell NAND): &lt;1000
                    program/erase cycles</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_ijy9ugogc7gl-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Any number above this is virtual, not physical</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Trade-off among production-cost, capacity, and
                    lifetime</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.v1p8w6lnfxm1">
            <span class="c7">Flash Access</span>
        </h4>
        <ul class="c0 lst-kix_hl6hqwg7up8g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Read access to individual cells</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Write requires an erase cycle</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Erase is possible for block and sectors</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Sector erase allows pre-erasing of several blocks</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.kzvygm4jzhd9">
            <span class="c13">File System</span>
        </h3>
        <h4 class="c17" id="h.o9o6yrp8paz8">
            <span class="c7">Physical Layer</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >On SD cards about 1% of capacity is reserved for DRM (Digital
                Rights Management).</span
            >
        </p>
        <p class="c1">
            <span class="c6">Wear levelling required to extend lifetime.</span>
        </p>
        <h4 class="c17" id="h.q7xhrhyjamtv">
            <span class="c7"
                >Mapping Logical Addresses to Physical Addresses</span
            >
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 488.12px;
                    height: 344.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image60.png"
                    style="
                        width: 488.12px;
                        height: 344.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.kaq55ilkglgu">
            <span class="c7">Interface Protocol</span>
        </h4>
        <p class="c1"><span class="c6">3 Interface Methods:</span></p>
        <ol class="c0 lst-kix_j6fhda18j9go-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">1-bit SD Bus</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">4-bit SD Bus</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">SPI (Serial Peripheral Interface)</span>
            </li>
        </ol>
        <h3 class="c20" id="h.px80pb591w9o">
            <span class="c13">Serial Communication</span>
        </h3>
        <ul class="c0 lst-kix_xpkuy5qbqy8t-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Point to point</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Bus</span></li>
        </ul>
        <ul class="c0 lst-kix_xpkuy5qbqy8t-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Master/Slave</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Multi-master</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xpkuy5qbqy8t-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Needs to deal with collisions</span>
            </li>
        </ul>
        <p class="c1"><span>Types of serial communication:</span></p>
        <ul class="c0 lst-kix_f5s4kwafn9sw-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c16 c11 c54">Simplex</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f5s4kwafn9sw-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>One-direction only (like </span
                ><span class="c16">Broadcast Radio</span
                ><span class="c6">)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f5s4kwafn9sw-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c54 c16 c11">Half-Duplex</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f5s4kwafn9sw-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Bi-directional alternating (like</span
                ><span class="c16">&nbsp;Amateur Radio</span><span>,</span
                ><span>&nbsp;</span
                ><span class="c16">Push-Button Microphone</span
                ><span class="c6">)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f5s4kwafn9sw-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c54 c16 c11">Full-Duplex</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_f5s4kwafn9sw-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>Bi-directional at the same time (like </span
                ><span class="c16">Telephone</span><span class="c6">)</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_r83zkpejj0k6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">UART/USART</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_r83zkpejj0k6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Like RS232, but watch for voltage</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >If asynchronous: needs good clock on each side</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_r83zkpejj0k6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">SPI (Serial-peripheral Interface)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_r83zkpejj0k6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Full-duplex, hardware addressing, 10 MHz</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_wy7p1kouh9m1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>I</span><span class="c21">2</span
                ><span class="c6"
                    >C (Inter Integrated Circuit Communications)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >&ldquo;Two-wire protocol&rdquo; (data/clock), 50 kHz</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Software addressing (127 nodes)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">1-wire protocol</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Half-duplex, master/slave</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-0">
            <li class="c1 c3 li-bullet-0">
                <span>CAN (Controller Area Network)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Reliable multi-master</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wy7p1kouh9m1-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">USB</span></li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.g417cko2jrv7">
            <span class="c13">SPI Protocol</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 216px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image26.png"
                    style="
                        width: 602px;
                        height: 216px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 281.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image58.png"
                    style="
                        width: 602px;
                        height: 281.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">Reading in single block modus.</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h4 class="c17" id="h.1nefmk7xbubj">
            <span class="c7">Reading blocks from the card</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 480.36px;
                    height: 639.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image27.png"
                    style="
                        width: 480.36px;
                        height: 639.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h2 class="c23" id="h.wovibwiz1nx0">
            <span class="c52">Debugging Embedded Applications</span>
        </h2>
        <h3 class="c20" id="h.mw8pw6bngd8h">
            <span class="c13">Debugging</span>
        </h3>
        <ul class="c0 lst-kix_aiigfl87r19p-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compile-time errors (easy)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_aiigfl87r19p-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Syntax and semantic errors</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_aiigfl87r19p-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >Use the same debugging strategies as for host
                    programming</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_aiigfl87r19p-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Run-time errors (idiosyncratic)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fix the problem</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Text (may involve hardware)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Expand test suite (may involve hardware)</span>
            </li>
        </ul>
        <h4 class="c17" id="h.ijukdshqgoj7">
            <span class="c7">Typical Run-time Errors</span>
        </h4>
        <ul class="c0 lst-kix_n67mxbnuvjwc-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>Errors of intent </span><span>( </span
                ><span class="c16">if (i=1); { }</span
                ><span class="c6">&nbsp;)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Boundary violations</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n67mxbnuvjwc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Counter overflow</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Buffer overflow</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Wrong pointer (e.g., uninitialized)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n67mxbnuvjwc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unanticipated program flow</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n67mxbnuvjwc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Assumed atomicity, races&hellip;</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n67mxbnuvjwc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Incomplete state preservation</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n67mxbnuvjwc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">E.g., non-reentrant calls from ISR</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Big bugs in big products:</span></p>
        <ul class="c0 lst-kix_unhaqlseaj2b-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">IBM Interface Adapters</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Boeing 787</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c39 c16">See slides for more detail</span>
        </p>
        <h4 class="c17" id="h.b1keqg6xfu2p">
            <span class="c7">When is debugging hard?</span>
        </h4>
        <ul class="c0 lst-kix_iy23lcjbgsvb-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">New hardware</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Cause and effect distant in space and/or time</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Impact several millions of instructions later</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Symptoms give no hint of root cause</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Programmer has wrong model</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Misinterpreted macro expansion</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Code optimization may lead to very different code than what
                    the programmer uses for reasoning (removal/recording of
                    instructions)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Wrong assumption about architecture (e.g., memory
                    alignment)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Environmental effects</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Instrumentation alters the scene</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Bug does not appear in debugger</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Tools may be impractical (e.g., not enough memory)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stealth Bugs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Evidence removed by the bug</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Concurrent, event driven, real-time</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_iy23lcjbgsvb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Timing related, rare bugs</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >start/stop debugging (breakpoints) not suitable</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Often multiple microcontrollers interacting in a
                    system</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.jql21wucr2v2">
            <span class="c13">General Approach to Debugging</span>
        </h3>
        <p class="c1">
            <span class="c16">Debugging is not an </span
            ><span class="c16 c11">Art</span
            ><span class="c16">, it&rsquo;s experimental </span
            ><span class="c16 c11">Science</span><span class="c39 c16">!</span>
        </p>
        <h4 class="c17" id="h.chvclny8jna8">
            <span class="c7">Strategies</span>
        </h4>
        <ul class="c0 lst-kix_xjsl33dr1qpr-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Gather data</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Find how to make it reproducible</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Record symptoms (trace)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Isolate</span></li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Binary and heuristic search</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">In code space-time and run-time space</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Confirm your assumption</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Include hardware and signals</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Controlled experiments</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_xjsl33dr1qpr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">To find the root cause</span>
            </li>
        </ul>
        <h4 class="c17" id="h.ekrdsslj2pv8">
            <span class="c7">Device Under Test</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 268px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image57.png"
                    style="
                        width: 602px;
                        height: 268px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.ffpqupbyhfg1">
            <span class="c13">Gather Data</span>
        </h3>
        <h4 class="c17" id="h.hcfn67ip4u4w"><span class="c7">Access</span></h4>
        <ul class="c0 lst-kix_bjkjyqud5sus-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software Instrumentation</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Difficult because of resource constraints (memory,
                    speed)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardware Instrumentation</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Easier in embedded systems, but free pins are rare</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Re-purpose pins</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Bus lines while peripheral not enabled/selected</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >EEPROM write line without applying write-voltage</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Input switches, SD card detection switch</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Use existing LED(s)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bjkjyqud5sus-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Slow patterns for humans</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Fast flicker for communication</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Requires (simple) reading hardware, or phone camera</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.9ae5xskgj2jj"><span class="c7">Timing</span></h4>
        <ul class="c0 lst-kix_oigk9sdjg6m9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Switch pins on function entry/exit and show on
                    oscilloscope</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Very low cost: listen on pins through a headphone</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.y4tas41zqrgi">
            <span class="c7">Make Bug Reproducible</span>
        </h4>
        <ul class="c0 lst-kix_btlhvwcpndbo-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">What is fault condition?</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_mni3sdka7gvt-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >What discriminates it from normal operation?</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_mni3sdka7gvt-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Use as trigger for data gathering</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Use as stop for trace ring-buffer</span>
            </li>
        </ul>
        <h4 class="c17" id="h.v30p9joyy6ge">
            <span class="c7">Debugging is a Science</span>
        </h4>
        <ul class="c0 lst-kix_5pz2kzcftw2f-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Make targeted minimal changes</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Keep a good record of the change and the effect</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_5pz2kzcftw2f-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Versioning system (branches/tags)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_5pz2kzcftw2f-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >Possible include log output / timing profiles</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_5pz2kzcftw2f-1">
            <li class="c1 c5 li-bullet-0"><span class="c6">Log book</span></li>
        </ul>
        <ul class="c0 lst-kix_5pz2kzcftw2f-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Construct hypotheses</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_5pz2kzcftw2f-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >What do you think might actually be happening and
                    why?</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.w1voo3gybd7c"><span class="c13">Tools</span></h3>
        <ul class="c0 lst-kix_5teucjor4nuv-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Simulators</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In-circuit emulators</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">JTAG/BDM debuggers</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Digital (storage) oscilloscopes</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_5teucjor4nuv-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Possible DAC</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_5teucjor4nuv-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Logic analysers</span>
            </li>
        </ul>
        <h3 class="c20" id="h.de9j20b8gft1">
            <span class="c13">Where can things go wrong?</span>
        </h3>
        <ul class="c0 lst-kix_c8422algo26r-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Hardware</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Source code</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fuse settings</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compiler options</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_c8422algo26r-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Clock speed settings</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Optimisation options</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_c8422algo26r-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Persistent parameters (EEPROM or Flash)</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Always document the requirements in the source code. Automate
                and version the build process.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.3nv50zp6w1zx">
            <span class="c13">Typical Scenarios</span>
        </h3>
        <ul class="c0 lst-kix_raivgcsa3wxc-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Device Dead</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_raivgcsa3wxc-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Watchdog?</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Undefined interrupt vectors?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Error in initialization?</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_raivgcsa3wxc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Periodic failure</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_raivgcsa3wxc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Memory problem?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Boundary violation? (overflow?)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_raivgcsa3wxc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Random failure</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_raivgcsa3wxc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Memory problem?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Timing problem?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Atomicity violation?</span>
            </li>
        </ul>
        <h4 class="c17" id="h.9ol7uyfkpadh">
            <span class="c7">Memory Problems</span>
        </h4>
        <ul class="c0 lst-kix_cu15i0bw942m-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Corruption</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Leaks</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fragmentation</span>
            </li>
        </ul>
        <h5 class="c33" id="h.lztg9jy0jkz1">
            <span class="c2">Memory Leak</span>
        </h5>
        <ul class="c0 lst-kix_1mq3pte8egjm-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Program allocates small amounts of memory and never frees
                    it up</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Over time system runs out of memory and (if well behaved)
                    resets</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cycle repeats</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_1mq3pte8egjm-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Know when a library call allocates memory!</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Beware that malloc() and free() are not reentrant!</span
                >
            </li>
        </ul>
        <h5 class="c33" id="h.c9cc9qrgcccx">
            <span class="c2">Memory Fragmentation</span>
        </h5>
        <ul class="c0 lst-kix_3vsz5m4d1xdf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">malloc() serves consecutive memory</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">free() calls merge adjacent blocks</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Pay attention to the memory map produced by the linker and
                watch the available stack space.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Note that you might use malloc() indirectly, e.g., printf() may
                use it.</span
            >
        </p>
        <h3 class="c20" id="h.agrmye54oyi0">
            <span class="c13">Available Stack Space</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Determine memory available for dynamic allocation/stack:</span
            >
        </p>
        <p class="c1">
            <span class="c6">Use command: avr-nm -n myprog.elf</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Look for the symbol _end. It is the first address in RAM that
                is not allocated by a variable.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >The addresses from _end to the end of the SRAM is what is
                available for stack and malloc().</span
            >
        </p>
        <h3 class="c20" id="h.8c767t2eqqer">
            <span class="c13">Memory Corruption</span>
        </h3>
        <ul class="c0 lst-kix_yooiq1qq9yv5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Dangling pointer</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stack touches heap</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Array index exceeds boundary</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Outdated preserved state</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_yooiq1qq9yv5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >E.g., a struct still holds pointer to memory that was
                    freed</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >There is no memory protection on microcontrollers: delays
                detection of memory corruption.</span
            >
        </p>
        <h3 class="c20" id="h.o6vcq9m9ydtj">
            <span class="c13">How to Debug Memory Problems?</span>
        </h3>
        <p class="c1">
            <span class="c6">On host computer or large embedded system;</span>
        </p>
        <ul class="c0 lst-kix_1jwj82j5lxl5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Valgrind&rsquo;s memory tools</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_1jwj82j5lxl5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c66"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=http://valgrind.org/docs/manual/mc-manual.html&amp;sa=D&amp;source=editors&amp;ust=1623676818837000&amp;usg=AOvVaw2R3DP2XMNBbzv1nFH_1EW_"
                        >http://valgrind.org/docs/manual/mc-manual.html</a
                    ></span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >On a microcontroller, there is not enough RAM for fancy
                tools&hellip; especially not if there is already a memory
                issue.</span
            >
        </p>
        <ul class="c0 lst-kix_lejcj85z2w6h-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >malloc() is nice code, you can interface with it</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >See Code to Observe Fragmentation for an example of looking
                into the malloc() data structures to track fragmentation.</span
            >
        </p>
        <h3 class="c20" id="h.lgvbh99epgny">
            <span class="c13">Compiler Support</span>
        </h3>
        <ul class="c0 lst-kix_ssf97tcj4a5r-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Assert</span></li>
        </ul>
        <ul class="c0 lst-kix_ssf97tcj4a5r-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">#define assert(p) if (p) else ( ACTION )</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ssf97tcj4a5r-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Predefined labels:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ssf97tcj4a5r-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">__FILE__, __LINE__</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ssf97tcj4a5r-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Pre-processor:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ssf97tcj4a5r-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Conditional compilation</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Carefully consider whether the debug code should stay in the
                product or not</span
            >
        </p>
        <p class="c1">
            <span
                >This is often a trade-off between reliability and
                security.</span
            >
        </p>
        <h2 class="c23" id="h.ic6x4w4148i3">
            <span class="c52">FAT File Systems</span>
        </h2>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 369.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image1.png"
                    style="
                        width: 602px;
                        height: 369.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.8g68znoubjrb">
            <span class="c13">File System</span>
        </h3>
        <ul class="c0 lst-kix_eujnwp31kq2t-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Important component of OS</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_eujnwp31kq2t-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">DOS: disk operating system</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_eujnwp31kq2t-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Non-volatile storage of large amount of information</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">File structure</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Naming, access</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">File operations</span>
            </li>
        </ul>
        <h4 class="c17" id="h.bp0vakwt1zoj">
            <span class="c7">Implementation</span>
        </h4>
        <ul class="c0 lst-kix_ejfi4xmang0b-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Physical layer -&gt; Block device</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low level format</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Firmware</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low level protocol (driver level)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Meta data: master boot record</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Partitioning</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Files systems in partition</span>
            </li>
        </ul>
        <h3 class="c20" id="h.yujshyxuwgz7">
            <span class="c13">FAT File System(s)</span>
        </h3>
        <p class="c1"><span class="c6">A simple file system:</span></p>
        <ul class="c0 lst-kix_bi6azfvc7yxs-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Relatively easy to understand</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Requires not many resources</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">FAT </span><span>- </span
            ><span class="c11">F</span><span>ile </span
            ><span class="c11">A</span><span>llocation </span
            ><span class="c11">T</span><span class="c6">able</span>
        </p>
        <h4 class="c17" id="h.tl0oztccj2bc">
            <span class="c7">FAT FS Metadata</span>
        </h4>
        <ol class="c0 lst-kix_x4kn806xroxq-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">File Allocation Table</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Directory Entries</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_x4kn806xroxq-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Start, size, name&hellip;</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Widely used:</span></p>
        <ul class="c0 lst-kix_7q6lyfyj6dcf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In the past on PCs</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Now on small and mobile devices, embedded systems</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Available in many OS implementations</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_7q6lyfyj6dcf-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Good for cross-platform storage-media</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Adapted to massive (x1000) increase in disk capacity</span
            >
        </p>
        <h3 class="c20" id="h.1ushhca8f9fn"><span class="c13">CP/M</span></h3>
        <p class="c1">
            <span class="c11">C</span><span>ontrol </span
            ><span class="c11">P</span><span>rogram (for) </span
            ><span class="c11">M</span
            ><span class="c6">icrocomputers (late 1970s)</span>
        </p>
        <h4 class="c17" id="h.ux96m5ta7fvt">
            <span class="c7">CP/M Disk Format</span>
        </h4>
        <ul class="c0 lst-kix_fweoi8cqzta4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">First disk operating system</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">8&rdquo; 250k floppy disk</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No standard for meta data (boot record)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fweoi8cqzta4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Implementation dependant</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fweoi8cqzta4-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software skew</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fweoi8cqzta4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Translation table for order of blocks on disk</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_fweoi8cqzta4-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">FAT FS developed from CP/M disk format</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_fweoi8cqzta4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">CP/M -&gt; QDOS -&gt; MS DOS</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Still visible: drive separated from path by colon</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.6z45q891vc03">
            <span class="c7">Directory entry (32 Bytes):</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 56px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image10.png"
                    style="
                        width: 602px;
                        height: 56px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c0 lst-kix_1wl4b4ai7i1g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">SS</span
                ><span class="c6"
                    >&nbsp;- Status (exists 0, deleted 0x5E, hidden 0x80)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Fn </span><span class="c6">- File name</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Tn </span><span class="c6">- File type</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">EX</span
                ><span class="c6"
                    >&nbsp;- Extent (large files: several directory
                    entries)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">S1,S2 </span
                ><span class="c6">- reserved (=0)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">RC </span
                ><span class="c6"
                    >- Records (file length in 128 byte resolution)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c11">AL </span
                ><span class="c6"
                    >- Allocation (number of the 1k-block, 0 if unused)</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.a4suk6mx12hr">
            <span class="c13">Present FAT FSs</span>
        </h3>
        <h4 class="c17" id="h.ot3o8fe5ihnv">
            <span class="c7">FAT Layout</span>
        </h4>
        <ul class="c0 lst-kix_uzr3w5yggu0q-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Master Boot Record (MBR)</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_nal9jb7wmnwp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Partition Table</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nal9jb7wmnwp-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Bootable?</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">First block</span>
            </li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Type </span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Size</span></li>
        </ul>
        <ul class="c0 lst-kix_nal9jb7wmnwp-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Partitions</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nal9jb7wmnwp-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Volume Boot Record</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nal9jb7wmnwp-2 start">
            <li class="c1 c30 li-bullet-0"><span class="c6">Name</span></li>
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Size of sectors and clusters</span>
            </li>
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Sectors per file allocation table</span>
            </li>
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Hidden sectors</span>
            </li>
        </ul>
        <h4 class="c17" id="h.m0h032nqpl83">
            <span class="c7">General &ldquo;Disk&rdquo; Layout</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 547.23px;
                    height: 243.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image32.png"
                    style="
                        width: 547.23px;
                        height: 243.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.ssseow66u3f6">
            <span class="c13">FAT-FS Partition</span>
        </h3>
        <p class="c1"><span class="c19 c11">Partition Diagram:</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 154.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image55.png"
                    style="
                        width: 602px;
                        height: 154.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.nocxaxk0cb91">
            <span class="c7">Volume ID Sector</span>
        </h4>
        <p class="c1">
            <span>The </span><span class="c16">first sector </span
            ><span
                >of a FAT partition contains the volume ID, also called volume
                boot record, or partition boot record. (The </span
            ><span class="c46">yellow </span
            ><span class="c6">section in the picture above.)</span>
        </p>
        <h4 class="c17" id="h.agccv5s7sqfb">
            <span class="c7">Volume ID:</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 184px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image63.png"
                    style="
                        width: 602px;
                        height: 184px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.kkpu4km1hfv1">
            <span class="c7">FAT-16 Directory Entry</span>
        </h4>
        <p class="c1">
            <span>Root Directory (</span><span class="c50">purple</span
            ><span class="c6">&nbsp;section in partition diagram above):</span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 173.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image16.png"
                    style="
                        width: 602px;
                        height: 173.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.8m02u5n3cqf9">
            <span class="c13">Directory Entry</span>
        </h3>
        <h4 class="c17" id="h.hknzp74qgfa5">
            <span class="c7">Short File Names</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >11 Bytes for short &ldquo;8.3&rdquo; - File
                Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nnnnnnnn.ttt</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.2a56984b196a17140efc1fbfccde64268c5fac39"></a><a id="t.6"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c60" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">First Byte</span>
                        </p>
                    </td>
                    <td class="c55" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Interpretation</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c60" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0x00</span></p>
                    </td>
                    <td class="c55" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Never used</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c60" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0x05</span></p>
                    </td>
                    <td class="c55" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >First character of name is 0xe5</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c60" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0x2e</span></p>
                    </td>
                    <td class="c55" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Entry is a directory</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c60" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0xe5</span></p>
                    </td>
                    <td class="c55" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Deleted</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h4 class="c17" id="h.t87q2hufreu6">
            <span class="c7">Attribute Byte</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 278.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image9.png"
                    style="
                        width: 602px;
                        height: 278.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.cjuyjt9jc376">
            <span class="c13">FAT Entries</span>
        </h3>
        <p class="c1">
            <span>(The </span><span class="c74">orange </span><span>and </span
            ><span class="c81">light orange </span
            ><span>sections in the partition diagram up above)</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.401639cff235d42bcf2106968a142621f75e6c57"></a><a id="t.7"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">FAT Entry</span>
                        </p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c19 c11">Interpretation</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0x000</span></p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Unused</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0xFF0 - 0xFF6</span></p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Reserved (e.g., FAT)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0xFF7</span></p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Bad (do not use)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">0xFF8 - 0xFFF</span></p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >End of CLuster Chain (EOC) = End of File</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c39 c16">anything else</span>
                        </p>
                    </td>
                    <td class="c42" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Index to next cluster</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.52kblj20doup">
            <span class="c13">Partition Table in MBR</span>
        </h3>
        <ul class="c0 lst-kix_66ken014lkhn-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Entry for first partition in table: 0x1BE</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Each entry is 16 bytes long</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Maximum of 4 partitions (0s indicate no more
                    partitions)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Byte 4: Partition type (0x0E for FAT16 LBA) [Logical Block
                    Addressing]</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Last 8 bytes of an entry have:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_66ken014lkhn-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>4 bytes: LBA</span><span class="c14">begin</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">4 bytes: Length in sectors</span>
            </li>
        </ul>
        <h3 class="c20" id="h.uu9zjhl8g9rr">
            <span class="c13">Reading FAT</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >When reading FAT you first can skip(?) the MBR. Reading the
                volume ID, and then the FAT and write to memory.
            </span>
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 197.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image13.png"
                    style="
                        width: 602px;
                        height: 197.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.j4u46qvn8x8p">
            <span class="c7">FAT start</span>
        </h4>
        <p class="c1">
            <span class="c6">The start of the FAT in memory is found by:</span>
        </p>
        <p class="c1">
            <span>FAT</span><span class="c14">start </span><span>= </span
            ><span>LBA</span><span class="c14">begin</span
            ><span class="c14">&nbsp;</span
            ><span class="c6">+ Reserved Sectors * Bytes/sector</span>
        </p>
        <h4 class="c17" id="h.e9j6u6ldbdlh">
            <span class="c7">Root Start</span>
        </h4>
        <p class="c1"><span class="c6">The start of Root is found by:</span></p>
        <p class="c1">
            <span>Root</span><span class="c14">start</span
            ><span>&nbsp;= FAT</span><span class="c14">start </span
            ><span class="c6"
                >+ Number of FATs * Sectors/FAT * Bytes/sector</span
            >
        </p>
        <h4 class="c17" id="h.tgfj3boqyhrp">
            <span class="c7">Data start</span>
        </h4>
        <p class="c1">
            <span class="c6">Then the Data start can be found by:</span>
        </p>
        <p class="c1">
            <span>Data</span><span class="c14">start</span
            ><span>&nbsp;= Root</span><span class="c14">start</span
            ><span class="c6">&nbsp;+ Max Roots * 32</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.tbvkirqbmrts">
            <span class="c13">Simplest way to read data from SD card</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >This can be useful, e.g., to update firmware or to read in a
                configuration file when memory is too tight to implement a full
                FAT file system.</span
            >
        </p>
        <ul class="c0 lst-kix_4c6v8suma8a6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Format SD card with a single FAT 16 or FAT 32
                    partition</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Know which format has been used</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Write a single file to it</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Write this file directly after formatting</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Do not delete any files from the card</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_4c6v8suma8a6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Volume ID of the partition will be on second sector</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Calculate from volume ID the start of the file</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">If end of file can be recognised: </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Read it</span></li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Else:</span></li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Calculate start of the root directory</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Read last 4 bytes of first entry (=file length)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_4c6v8suma8a6-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Read that many bytes</span>
            </li>
        </ul>
        <h3 class="c20" id="h.bw2p9i783dg">
            <span class="c13">FAT-FS Limitations</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Originally developed in the late 1970s for floppy disks of less
                than 500k per volume.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.39bf4607bec4a768e799d7dc1188930060371c73"></a><a id="t.8"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Property</span></p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">FAT12</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">FAT16A/B</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">FAT32</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c11">Bits </span
                            ><span class="c6">per FAT-entry</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">12</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">16</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">32</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>Max </span><span class="c11">cluster </span
                            ><span class="c6">number</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">4078</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">65524</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>2</span><span class="c21">28</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>Max </span><span class="c11">sector </span
                            ><span class="c6">number</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>2</span><span class="c21">16</span>
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>2</span><span class="c21">16 </span
                            ><span>/ 2</span><span class="c21">32</span>
                        </p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>2</span><span class="c21">32</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>Max </span><span class="c11">size </span
                            ><span class="c6">of a cluster</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">4 KB</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">32 KB</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">32 KB</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>Max </span
                            ><span class="c19 c11">file size</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">8 MB</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">128 MB / 2 GB</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">4 GB</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span>Max </span
                            ><span class="c19 c11">partition size</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">16 MB</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">32 MB / 8 GB</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">2-16 TB</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c51" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c11">Year </span
                            ><span class="c6">of introduction</span>
                        </p>
                    </td>
                    <td class="c8" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">1980</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">1983 / 1987</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">1997</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="c20" id="h.ijzhoaejl5y7">
            <span class="c13">VFAT: Long File Names</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Originally FAT12 and FAT16 were limited to file names of 8
                characters and a 3 character suffix.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >A backward-compatible fix was introduced as VFAT which hides
                longer names in directory entries with an unused flag:</span
            >
        </p>
        <ul class="c0 lst-kix_exknz9imkav5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unused attribute combination</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_exknz9imkav5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Volume Label</span>
            </li>
            <li class="c1 c5 li-bullet-0"><span class="c6">System</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Hidden</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Read Only</span></li>
        </ul>
        <ul class="c0 lst-kix_exknz9imkav5-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Older FAT implementation ignore such entries</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >MS holds patents (some under dispute, some soon to end) on
                VFAT.</span
            >
        </p>
        <h3 class="c20" id="h.m6jvqd3f3g9w">
            <span class="c13">Further additions to FAT-FS Family</span>
        </h3>
        <ul class="c0 lst-kix_6k3rb8w5v7f2-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Transactional FAT (TFAT)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6k3rb8w5v7f2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >FAT1 update -&gt; transaction -&gt; FAT0 update</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_6k3rb8w5v7f2-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Extended FAT (exFAT)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6k3rb8w5v7f2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Unix-like linked list instead of FAT</span>
            </li>
        </ul>
        <h3 class="c20" id="h.71th1q2lpdvh">
            <span class="c13">Directory Entry: Fat16 vs. FAT32</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 380px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image59.png"
                    style="
                        width: 602px;
                        height: 380px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.rejoxebc3j02">
            <span class="c13">Recognising the FAT FS Type</span>
        </h3>
        <p class="c1">
            <span
                >The file formats can be distinguished by the driver software
                based on the number of clusters </span
            ><span class="c16">c</span><span class="c6">:</span>
        </p>
        <ul class="c0 lst-kix_yuppjkf6qbmh-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>If </span><span class="c16">c</span
                ><span>&nbsp;&lt; 4085 then: </span
                ><span class="c19 c11">FAT12</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Else if </span><span class="c16">c</span
                ><span>&nbsp;&lt; 65525 then: </span
                ><span class="c19 c11">FAT16</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Else it is </span><span class="c19 c11">FAT32</span>
            </li>
        </ul>
        <h3 class="c20" id="h.g87b7t86smp8">
            <span class="c13">The FAT</span>
        </h3>
        <h4 class="c17" id="h.c3gn42qzfqhz">
            <span class="c7">FAT Example</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 424px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image45.png"
                    style="
                        width: 602px;
                        height: 424px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c43 c41 c61">This is a FAT32 FAT</span></p>
        <h3 class="c20" id="h.1eiq3m4anvnt">
            <span class="c13">FAT Structure</span>
        </h3>
        <ul class="c0 lst-kix_4kw3envv8j9g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">First Entry: Media Type</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4kw3envv8j9g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">0F -&gt; Floppy</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">8F -&gt; Hard Disk</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Matches boot record entry</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4kw3envv8j9g-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Second Entry: Partition State</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_4kw3envv8j9g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">FFFF -&gt; Clean (set on shutdown)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >FFF8 -&gt; Dirty (set on write and rename)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Dirty at start -&gt; possible corrupted</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_8nefym12r47t-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Not all bits of cluster entry may be used (mask out unused
                    bits before interrupting)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_8nefym12r47t-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">FAT32 -&gt; 28 bits used</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8nefym12r47t-0">
            <li class="c1 c3 li-bullet-0">
                <span
                    >FAT is stored least significant byte first
                    (little-endian)</span
                >
            </li>
        </ul>
        <h1 class="c64" id="h.q1sudv21pgbd">
            <span class="c45">Reliability and Security</span>
        </h1>
        <h2 class="c23" id="h.54o7fsi228m5">
            <span class="c52">Reliability of Embedded Applications</span>
        </h2>
        <h3 class="c20" id="h.woa6dtje392n">
            <span class="c13">Embedded Systems</span>
        </h3>
        <p class="c1"><span class="c6">Typical:</span></p>
        <ul class="c0 lst-kix_wtgy5ty1tfq-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Harsh Environment</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wtgy5ty1tfq-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Thermal</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Electromagnetic</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Electrostatic</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Radiation (e.g., at high altitude)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Mechanical (shock, vibration)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Adversarial Attacks</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_jcbzbdh3ldt-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Critical System failure results in:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_jcbzbdh3ldt-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Loss of life</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Loss of vehicle</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Irreversible damage</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >There is also a legal dimension: Embedded software is typically
                part of a product and liability can not be dodged by excluding
                it in the license.</span
            >
        </p>
        <h3 class="c20" id="h.l9yhpt1nvcgb">
            <span class="c13">Common Issues</span>
        </h3>
        <h4 class="c17" id="h.cgfo00wdysyc">
            <span class="c7">Hardware</span>
        </h4>
        <ul class="c0 lst-kix_5qe4lwvb8mjf-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Glitches</span></li>
        </ul>
        <ul class="c0 lst-kix_5qe4lwvb8mjf-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Power</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Clock</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Signals</span></li>
        </ul>
        <ul class="c0 lst-kix_5qe4lwvb8mjf-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Wear-out</span></li>
        </ul>
        <ul class="c0 lst-kix_5qe4lwvb8mjf-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Flash</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">EEPROM</span></li>
        </ul>
        <h4 class="c17" id="h.12qojre71uib">
            <span class="c7">Software</span>
        </h4>
        <ul class="c0 lst-kix_bpzxftqzugl-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Timing</span></li>
        </ul>
        <ul class="c0 lst-kix_bpzxftqzugl-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Real time</span></li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Race conditions</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bpzxftqzugl-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Difficult code</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bpzxftqzugl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Parallelism</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Optimisation</span>
            </li>
        </ul>
        <h3 class="c20" id="h.db86m6mjxwog">
            <span class="c13">What can happen?</span>
        </h3>
        <ul class="c0 lst-kix_3rwqgdjtpko9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Erroneous signal detection</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3rwqgdjtpko9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">E.g., interrupts</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3rwqgdjtpko9-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Wrong instruction executed</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Memory state changed</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3rwqgdjtpko9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Temporarily or permanent</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3rwqgdjtpko9-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">CPU state changes</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">CPU resets</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c39 c16">Anything can happen&hellip;&hellip;</span>
        </p>
        <h3 class="c20" id="h.g1lbw3sl5zg0">
            <span class="c13">What can be done?</span>
        </h3>
        <h4 class="c17" id="h.xtouf89xkz96">
            <span class="c7">The Situation:</span>
        </h4>
        <ul class="c0 lst-kix_iamrpne9k9bp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Critical System</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Anything can happen</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >&gt; Reduce probability that something bad happens.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Do not underestimate the failure probabilities for a mass
                product that is on 24h.</span
            >
        </p>
        <h3 class="c20" id="h.buc7h8ec9sz4">
            <span class="c13">Mitigation Measures</span>
        </h3>
        <ul class="c0 lst-kix_dtnq38avw85e-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Physical protection</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Target application specific failure modes</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Redundancy</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Protection circuits</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Defensive programming</span>
            </li>
        </ul>
        <h4 class="c17" id="h.kpatrzjw102p">
            <span class="c7">Application Specific Failure Modes</span>
        </h4>
        <ul class="c0 lst-kix_set61kjny2ia-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Ubiquitous use of embedded systems</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Diverse requirements</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_set61kjny2ia-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Including cost</span>
            </li>
        </ul>
        <h5 class="c33" id="h.5dj16gosekw5"><span class="c2">Example</span></h5>
        <p class="c1">
            <span class="c6"
                >Power glitches have different effects depending on their timing
                relative to the clock.</span
            >
        </p>
        <ul class="c0 lst-kix_uih8vwyt377l-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Engine controller -&gt; probability may be acceptably
                    low</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >ATM machine -&gt; hit in vulnerable period very likely
                    (intentional attack)</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.sok5dno0ggjp">
            <span class="c13">How to respond?</span>
        </h3>
        <ul class="c0 lst-kix_vhrb9gfme4td-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Shut down</span></li>
        </ul>
        <ul class="c0 lst-kix_vhrb9gfme4td-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Temporarily or permanently</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Requires redundancy (other machine or human operator)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_vhrb9gfme4td-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Try to recover</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vhrb9gfme4td-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Reset (e.g. watchdog timer)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Real-time requirements?</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Failed system not identified? (requires redundancy):</span
            >
        </p>
        <ul class="c0 lst-kix_sjky3e9df2au-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Use simplest system</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Vote</span></li>
        </ul>
        <h3 class="c20" id="h.v96puuvjekrw">
            <span class="c13">Triple redundancy with voting</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Summarised example: Plane sensors got frozen and then the
                system disregarded/turned off a sensor because it disagreed more
                than the permitted value with other 2 sensors.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Some stuff happens with planes nose pointing
                down&hellip;&hellip;&hellip;&hellip;.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >If the condition is not corrected, it could result in a loss of
                control of the aeroplane.</span
            >
        </p>
        <h3 class="c20" id="h.6arb5vq0x8zj">
            <span class="c13">Protection Circuits</span>
        </h3>
        <ul class="c0 lst-kix_ahpp9pi64hvc-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Recognise adverse situation</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ahpp9pi64hvc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Radiation sensors</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Temperature sensors</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ahpp9pi64hvc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Recognise failure</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ahpp9pi64hvc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Watchdog (timing integrity)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Hardware check sums (data integrity)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ahpp9pi64hvc-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fallback systems</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ahpp9pi64hvc-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Recognise large deviations of a refined system</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Use as &ldquo;second chance&rdquo; if refined system
                    fails</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.4vm91f2f4ku0">
            <span class="c13">Defensive Programming</span>
        </h3>
        <ul class="c0 lst-kix_w1bkxxft1ww2-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Self-stabilising protocols</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Any random data inserted in the message stream will be
                    dissipated after some rounds</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Initialise unused resources</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >E.g., write a jump instruction to reset a vector to all
                    unused program memory cells</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Coding rules</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Avoid the well known traps of low-level C-coding</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >E.g., MISRA C (Motor Industry Software Reliability
                    Association)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Automata tool for compliance and model checking</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_w1bkxxft1ww2-1 start">
            <li class="c1 c5 li-bullet-0">
                <span>See G. J. Holzmann: &ldquo;Mars Code&rdquo; </span
                ><span class="c43 c58">(I didn&rsquo;t)</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <h2 class="c23" id="h.xgfu23g6eklp">
            <span class="c52"
                >Reliability: Toyota Electronic Throttle Control</span
            >
        </h2>
        <p class="c1">
            <span class="c16"
                >The following is not a shortened version of these lecture
                slides.</span
            ><span class="c39 c16">&nbsp;Read at your own risk.</span>
        </p>
        <h3 class="c20" id="h.os4lbfs0ofy3">
            <span class="c13">Michael Barr</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Experienced embedded software dev, consultant, trainer, former
                adjunct professor person.</span
            >
        </p>
        <p class="c1"><span class="c6">He&rsquo;s written some books.</span></p>
        <h3 class="c20" id="h.jiwga2gp6yzt">
            <span class="c13">Embedded Systems Defined</span>
        </h3>
        <h4 class="c17" id="h.284kb8vqc1p9">
            <span class="c7">Embedded Systems</span>
        </h4>
        <ul class="c0 lst-kix_jinyy9prvvd0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Electronics and software for a dedicated purpose</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Many billion more new embedded systems each year</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_jinyy9prvvd0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Microwave ovens, digital watches, pacemakers,
                    thermostats</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">You are surrounded by them</span>
            </li>
        </ul>
        <h4 class="c17" id="h.gyw08787dcle">
            <span class="c7">Embedded systems in cars</span>
        </h4>
        <ul class="c0 lst-kix_auk73ilqsigl-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Modern cars contain networks of embedded computers!</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_auk73ilqsigl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Anti-lock brakes, airbags, speedometer, GPS,
                    radio&hellip;</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_auk73ilqsigl-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Some carmakers brag over 100 microprocessors inside!</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_auk73ilqsigl-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Each headlight, each mirror, each seat&hellip;</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.pwsu7pdwbr9p">
            <span class="c13">Review of Toyota&rsquo;s Source Code</span>
        </h3>
        <h4 class="c17" id="h.ey0fx669q4nf">
            <span class="c7">Electronic Throttle Source Code</span>
        </h4>
        <ul class="c0 lst-kix_abc3di1riyng-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In secure room</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Confidentiality agreements</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >For vehicle models with ETCS spanning 2002-2010</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.7qhxqg5ktavh">
            <span class="c7">~18 Months With Code</span>
        </h4>
        <ul class="c0 lst-kix_bcqz6f9mamev-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Experienced team of embedded systems experts</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Build upon NASA&rsquo;s earlier source code review; digging
                    deeper</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.ny2yfutdna9g">
            <span class="c13">Electronic Throttle Control</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 326.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image51.png"
                    style="
                        width: 602px;
                        height: 326.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.gdql0riwrk9z">
            <span class="c13">Safety-Critical Systems</span>
        </h3>
        <p class="c1">
            <span
                >Embedded systems that can injure or kill people are called </span
            ><span class="c11">Safety-Critical Systems</span
            ><span class="c6">.</span>
        </p>
        <h4 class="c17" id="h.jrg8pn1yjq62">
            <span class="c7">What Could Go Wrong?</span>
        </h4>
        <ul class="c0 lst-kix_psqjj1gzochf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A glitch in the electronics (random hardware faults)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A bug in the software (any reasonably complex piece of
                    software will have bugs)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >An unforeseen gap in the intended safety features</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c16">Or all three: </span
                ><span class="c6"
                    >glitch actives bug that slips through safety gap</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.mgdfjlqk9www">
            <span class="c7">Safety Has To Be Designed In</span>
        </h4>
        <ul class="c0 lst-kix_d5i0s7yp7vgn-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Redundancy and fault containment are key</span>
            </li>
        </ul>
        <h3 class="c20" id="h.h5y958ifdsp8">
            <span class="c13">Electronic Throttle Control (ETCS)</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >This Toyota System is an Example of a Safety-Critical hard
                real-time system</span
            >
        </p>
        <h3 class="c20" id="h.cwn3543n5bbf">
            <span class="c13">Summary of Conclusions</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s ETCS source code is of unreasonable
                quality</span
            >
        </p>
        <ul class="c0 lst-kix_50zwso1tbify-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">It is defective and contains bugs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_50zwso1tbify-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Includes bugs that can cause unintended acceleration</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_50zwso1tbify-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Code quality metrics predict presence of additional
                    bugs</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s fail safes are defective and inadequate</span
            >
        </p>
        <ul class="c0 lst-kix_e30mdhljmnj-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;House of cards&rdquo; safety architecture</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_e30mdhljmnj-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Random hardware and software faults are a fact of
                    life</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.6mc5zilefjqt">
            <span class="c13">Unintended Acceleration (UA)</span>
        </h3>
        <ul class="c0 lst-kix_pzly02yedre6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;Any degree of acceleration that the vehicle driver
                    did not purposely cause&rdquo; - NASA.</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">&ldquo;Loss of throttle control&rdquo;</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_pzly02yedre6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Throttle controls airflow, which controls engine
                    power</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >NASA didn&rsquo;t rule out the problem of UA being caused by
                the software.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.ri02b6tr5oaf">
            <span class="c13">NASA&rsquo;s Code Review was bad</span>
        </h3>
        <p class="c1"><span class="c6">They didn&rsquo;t spot</span></p>
        <ul class="c0 lst-kix_m86pezhlj0qi-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Mirroring was not always done</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No hardware protection against bit flips</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stack overflow can occur</span>
            </li>
        </ul>
        <p class="c1"><span class="c6">They spotted</span></p>
        <ul class="c0 lst-kix_4ci8hz8cuj4q-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">&ldquo;Software bugs&rdquo;</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6">But Barr Group found more bugs.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s ETCS software can malfunction&hellip;!</span
            >
        </p>
        <h3 class="c20" id="h.bh6e5jsrbe44">
            <span class="c13">Software Malfunctions Happen</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >All kinds of embedded systems experience partial software
                malfunction from time-to-time.</span
            >
        </p>
        <ul class="c0 lst-kix_k4xver5lyl5b-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >E.g., most other apps working, but phone calls go direct to
                    voicemail</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.stcgdf1lodg9">
            <span class="c13">Toyota&rsquo;s Operating System (OSEK)</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >The data structures can have bit flips that kill tasks.</span
            >
        </p>
        <h3 class="c20" id="h.tpz9ej5pqpda">
            <span class="c13">Example of Unintended Acceleration</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 529.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image20.png"
                    style="
                        width: 602px;
                        height: 529.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c0 lst-kix_uc4w47y9elyy-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Representative of task death in real-world</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Dead task also monitors accelerator pedal,</span
                ><span class="c39 c16">&nbsp;so loss of throttle control</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >When this task&rsquo;s death begins with brake press</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.270llxutixx4">
            <span class="c13">Software Causes of Memory Corruption</span>
        </h3>
        <p class="c1">
            <span class="c6">All these caused memory corruption</span>
        </p>
        <ul class="c0 lst-kix_85q40afdxcn4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Buffer Overflow</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Invalid Pointer Dereference/Arithmetic</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Race Condition (a.k.a., &ldquo;Task Interface&rdquo;)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Nested Scheduler Unlock</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unsafe Casting</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stack Overflow</span>
            </li>
        </ul>
        <h3 class="c20" id="h.e0ku60fq0srk">
            <span class="c13">Spaghetti Code Defined</span>
        </h3>
        <ul class="c0 lst-kix_181hz648hid3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Incomprehensible source code, typically including
                    apparently meaningless jumps or gotos or a high degree of
                    unnecessary coupling between modules.</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_gcrph3g714oz-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Difficult to follow data/control paths</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Bugs likely to appear when modified</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Unnecessarily complex</span>
            </li>
        </ul>
        <h3 class="c20" id="h.jds5ecl054oc">
            <span class="c13">Dinosaur Says:</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 345.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image54.png"
                    style="
                        width: 602px;
                        height: 345.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.j649x6x195de">
            <span class="c13">Toyota&rsquo;s Spaghetti Code</span>
        </h3>
        <ul class="c0 lst-kix_i2lbscmciubg-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">No specification doc for C sources</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >They don&rsquo;t correspond either if they do exist</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Toyota did start trying to improve spag code</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.solmewkqrxud">
            <span class="c13">Types of Spaghetti Code</span>
        </h3>
        <p class="c1"><span class="c6">Data-flow spaghetti</span></p>
        <ul class="c0 lst-kix_6kulcs1pooe2-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Complex coupling between software modules and between
                    tasks</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Count of global variables is a software metric for
                    &ldquo;tangledness&rdquo;</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Control-flow Spaghetti</span></p>
        <ul class="c0 lst-kix_k223bidv2fdo-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Many long, overly-complex function bodies</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Cyclomatic complexity is a software metric for
                    &ldquo;testability&rdquo;</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c43 c41 c11"
                >The throttle angle function scored over 100
                (unmaintainable)</span
            >
        </p>
        <h3 class="c20" id="h.k16q0m4qh37d">
            <span class="c13">Stack Anal.</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >In the stack analysis, Toyota said 41% was used, but it
                actually got up to 94%!</span
            >
        </p>
        <p class="c1">
            <span class="c6">Recursion violated a MISRA-C rule.</span>
        </p>
        <h3 class="c20" id="h.xp4pjhbeutb0">
            <span class="c13">Recursion</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >NASA was concerned about possible stack overflow&hellip;</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >And NASA didn&rsquo;t know there was so little safety
                margin!</span
            >
        </p>
        <h3 class="c20" id="h.xugeb1kybjdt">
            <span class="c13">Toyota&rsquo;s Stack Mistakes</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Toyota botched its worst-case stack depth analysis</span
            >
        </p>
        <ul class="c0 lst-kix_nr8z2w3d9x1s-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Missed function calls via pointers (failed to
                    automate)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Didn&rsquo;t include any stack use by library and assembly
                    functions</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_nr8z2w3d9x1s-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Approx 350 function ignored</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nr8z2w3d9x1s-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >HUGE: Forgot to consider OS stack use for context
                    switching!</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6">Toyota used dangerous recursion</span>
        </p>
        <ul class="c0 lst-kix_6vwrpodfrk21-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Absence of recursive procedures, which is standard in
                    safety critical embedded software</span
                >
            </li>
        </ul>
        <p class="c1">
            <span>Toyota failed to perform </span
            ><span class="c11">run-time stack </span
            ><span class="c6">monitoring</span>
        </p>
        <h3 class="c20" id="h.pxo2v5c721tt">
            <span class="c13">Failed to Comply With&hellip;:</span>
        </h3>
        <h4 class="c17" id="h.l5fx7dvs3bhq">
            <span class="c7">System Standards</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >&ldquo;OSEK&rdquo; is an international standard API</span
            >
        </p>
        <ul class="c0 lst-kix_crahioevk32e-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Specifically designed for use in automotive software</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Multiple suppliers of OSEK operating systems</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Compliance tests ensure compatibility across versions
                </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >But Toyota&rsquo;s Rx-OSEK850 version is non-standard!!!</span
            >
        </p>
        <ul class="c0 lst-kix_lxf2d66irhss-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Was not certified as OSEK compliant</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Certified products for V850 were available by 2002</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.1ynhd7jdbnc5">
            <span class="c7">Coding Standards</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >MISRA-C &ndash; motor industry software reliability coding
                rules for C</span
            >
        </p>
        <ul class="c0 lst-kix_qy9rcb8q2h2v-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >By 2004, &ldquo;the successes and global use of MISRA-C
                    across automotive, aerospace, medical, and other industries
                    has been staggering.&rdquo;</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >From 2002-2004, Toyota said in public they followed
                MISRA-C</span
            >
        </p>
        <ul class="c0 lst-kix_4qtcqyhoeo20-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >But NASA reported &gt; 7,000 violations of some of the
                    rules</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Michale Barr checked the full set and found &gt; 80,000 in
                    violations</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s coding standard only has 11 MISRA-C rules</span
            >
        </p>
        <ul class="c0 lst-kix_xn23reeuj8fg-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >And 5 of those are violated in the actual source code
                </span>
            </li>
        </ul>
        <h3 class="c20" id="h.4shpnp7wyjis">
            <span class="c13">Violating Coding Rules Causes Bugs</span>
        </h3>
        <p class="c1"><span class="c6">Wow.</span></p>
        <h3 class="c20" id="h.xu9nb3x2snaf">
            <span class="c13">Coding Standards (again)</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Toyota maintains a set of company internal coding rules</span
            >
        </p>
        <ul class="c0 lst-kix_p3cmgcu6k3pj-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Specifically for &ldquo;power train&rdquo; ECM software
                    developers to follow</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_p3cmgcu6k3pj-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Mr. Ishii&rsquo;s statement about 50% MISRA-C overlap was
                    found false</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_p3cmgcu6k3pj-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >NASA reported Toyota didn&rsquo;t follow some of its
                    rules</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_p3cmgcu6k3pj-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >I found at least 32% of Toyota&rsquo;s coding rules were
                    violated
                </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Enforcement is the most important part of having a rule</span
            >
        </p>
        <ul class="c0 lst-kix_7l8z7zt6gzre-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Demonstrates lack of engineering discipline at Toyota</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Part of a larger pattern of inadequate software
                    process/oversight</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_7l8z7zt6gzre-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Inadequate and untracked peer code reviews</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">No bug-tracking system </span>
            </li>
        </ul>
        <h3 class="c20" id="h.qspvbwltqbl2">
            <span class="c13">NASA&rsquo;s Software Areas of Concern</span>
        </h3>
        <ul class="c0 lst-kix_repi3zsvxcmw-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Coding Defects</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Task Interference</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Data Corruption</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Insufficient Fault Protection</span>
            </li>
        </ul>
        <h3 class="c20" id="h.c8sfgm6yjnex">
            <span class="c13"
                >Toyota&rsquo;s Defective &ldquo;Safety Layers&rdquo;</span
            >
        </h3>
        <p class="c1"><span class="c6">Layer:</span></p>
        <ol class="c0 lst-kix_4f9iz9odeki3-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Mirroring of Critical Variable </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">DTCs and Fail-Safe Modes</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Watchdog Supervisor</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">ESP-B2 Monitor CPU</span>
            </li>
        </ol>
        <h4 class="c17" id="h.hia8oqu6ocij">
            <span class="c7">Layer 1: Mirroring of Critical Variables</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s engineers sought to protect numerous variables
                against software-caused and hardware-caused corruptions</span
            >
        </p>
        <ul class="c0 lst-kix_6waxoerm2fmr-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >e.g., by &ldquo;mirroring&rdquo; their contents in a 2nd
                    location
                </span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >But failed to mirror several key critical variables</span
            >
        </p>
        <ul class="c0 lst-kix_m38wjpsjhvwb-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >OSEK&rsquo;s critical internal data structures</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >The target throttle angle global
                    variable!!!!!!!!!!!!!!!!!!!!!!!!!</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_m38wjpsjhvwb-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Commands a part of the software to open the throttle</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_m38wjpsjhvwb-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >Recalculated every 8 ms (when the tasks are all
                    alive)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_m38wjpsjhvwb-3 start">
            <li class="c1 c76 li-bullet-0">
                <span class="c6"
                    >Corruption is indistinguishable from a driver gas pedal
                    press!</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.7dpyjko3ff5k">
            <span class="c13">Throttle Command Design</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 218.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image19.png"
                    style="
                        width: 602px;
                        height: 218.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.8co1h7gpyb8w">
            <span class="c13">UA VIA Memory Corruption</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Task X death causes loss of throttle control by driver</span
            >
        </p>
        <ul class="c0 lst-kix_y71yeb7cvnv-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Changes at the accelerator pedal have no effect on the
                    throttle angle</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Cruise control switches have no effect</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Motor Control Task continues to drive throttle motor; engine
                powered</span
            >
        </p>
        <ul class="c0 lst-kix_hx0pcyw3tjze-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Throttle could stick at last computed throttle command,
                    or</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Change angle via corruption of throttle command global
                    variable</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >One corruption event can cause task death and open
                throttle</span
            >
        </p>
        <ul class="c0 lst-kix_k429idccl6o-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Memory corruptions are like ricocheting bullets
                </span>
            </li>
        </ul>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 274.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image6.png"
                    style="
                        width: 602px;
                        height: 274.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.4fb6ey5qfiob">
            <span class="c13">Layer 2: DTCs and Fail-Safe Modes</span>
        </h3>
        <p class="c1">
            <span class="c6">NASA talks about 5 fail-safe modes</span>
        </p>
        <ul class="c0 lst-kix_gmzu2cra0b4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Limp home modes 1-3 (degrees of gas pedal sensor
                    mistrust)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Idle mode fuel cut (2,500 rpm limit at idle)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Engine off (via several different &ldquo;class 2&rdquo;
                    failures)</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6">However, all 5 fail-safes are in same Task X</span>
        </p>
        <ul class="c0 lst-kix_rowf4bhgqemi-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Throttle control and fail-safes in same fault containment
                    region</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_rowf4bhgqemi-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Unreasonable design; alternative structures
                    well-known</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Most diagnostic trouble codes need Task X too!
            </span>
        </p>
        <h3 class="c20" id="h.73jqu52tpbr4">
            <span class="c13">Layer 3: Watchdog Supervisor</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >A &ldquo;watchdog timer&rdquo; is hardware to auto-reset
                software</span
            >
        </p>
        <ul class="c0 lst-kix_841gbtfi0c0f-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Healthy software should periodically &ldquo;check-in&rdquo;
                    to prevent reset</span
                >
            </li>
        </ul>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 493px;
                    height: 192px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image35.png"
                    style="
                        width: 493px;
                        height: 192px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >With multiple tasks, health of all tasks must be checked</span
            >
        </p>
        <h4 class="c17" id="h.46t52wnq109j">
            <span class="c7">Defective Watchdog Design</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s watchdog supervisor design is unreasonable</span
            >
        </p>
        <ul class="c0 lst-kix_el403737lt46-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Incapable, ever, of detecting death of majority of
                    tasks</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Incapable of properly and reliably detecting CPU
                    overload</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Allows vehicle misbehavior due to overloads lasting up to
                    1.5s</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Resets the watchdog timer hardware in a timer tick
                    ISR</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Explicitly ignores and discards most operating system error
                    codes</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Reasonable design alternatives were well known</span
            >
        </p>
        <ul class="c0 lst-kix_gpdp8yex816a-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Indeed the primary purpose should&rsquo;ve been to detect
                    task death</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">2005 Prius (HV-ECU) watchdog is better </span>
            </li>
        </ul>
        <h4 class="c17" id="h.6gxcfd9qi8yh">
            <span class="c7">Layer 4: ESP-B2 Monitor CPU</span>
        </h4>
        <p class="c1"><span class="c6">&ldquo;System Guards&rdquo; </span></p>
        <ul class="c0 lst-kix_1yfwnkcldkzh-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >All (3) useless after Task X death (don&rsquo;t know driver
                    intent)</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">&ldquo;Brake Echo Check&rdquo;</span></p>
        <ul class="c0 lst-kix_khbd15drdp5y-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Depends on the driver to take action&mdash;after UA has
                    already begun!</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_khbd15drdp5y-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Sometimes a counter-intuitive/dangerous action</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Clearly this is not a &ldquo;designed&rdquo; fail-safe for
                    UA or task death</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_khbd15drdp5y-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Takes the wrong actions (should&rsquo;ve reset ECM not
                    stalled car)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Not 100% reliable</span>
            </li>
        </ul>
        <h4 class="c17" id="h.d5x6xcnam0ar">
            <span class="c7">Toyota Failed to Review Monitor CPU</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >The critical &ldquo;monitor CPU&rdquo; that checks the main CPU
                has never been independently reviewed</span
            >
        </p>
        <ul class="c0 lst-kix_go8nz4c6iza0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Toyota doesn&rsquo;t even have a copy of the source
                    code</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >NASA didn&rsquo;t review that critical system component
                    either</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_go8nz4c6iza0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >ESP-B2 source code was not provided to NASA</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.ndsv1avxzup3">
            <span class="c7">Monitor CPU is Last Line of UA Defence</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >But ESP-B2 monitor CPU could have included a proper UA
                defense:</span
            >
        </p>
        <ul class="c0 lst-kix_3nt1i0apyss9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >IF (driver is braking &amp; throttle is not closing) THEN
                    reset ECM</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_3nt1i0apyss9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Something is not right with the main CPU when that
                    happens!</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Resets of main CPU barely noticeable at speed (brief rpm
                    drop)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_3nt1i0apyss9-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >CRITICAL to ending UA in vehicles with potential vacuum
                    loss</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Per car cost to add this safety feature is $0.00 (it&rsquo;s
                just bits)</span
            >
        </p>
        <ul class="c0 lst-kix_j87369xjkbo8-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >There was enough memory and CPU bandwidth for these
                    instructions</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >All of the required electrical inputs and outputs were
                    already present</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >In line with E-Gas Level 3 recommendations
                </span>
            </li>
        </ul>
        <h3 class="c20" id="h.fzha8sbibx50">
            <span class="c13">Toyota&rsquo;s Defective Software Process</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >FMEA was incomplete; single points of failure are present</span
            >
        </p>
        <ul class="c0 lst-kix_8hoj30371lng-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Because: Toyota didn&rsquo;t adopt a formal safety
                    process</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Peer reviews not done on OS code and ESP-B2 code</span
            >
        </p>
        <ul class="c0 lst-kix_y8637s6g26tx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Because: Toyota didn&rsquo;t perform code reviews; used
                    non-standard OSEK</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Toyota&rsquo;s own &ldquo;power train&rdquo; coding standard
                not enforced</span
            >
        </p>
        <ul class="c0 lst-kix_m3fzv7h06345-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Because: Toyota didn&rsquo;t follow through with software
                    suppliers</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Watchdog supervisor doesn&rsquo;t detect most task&rsquo;s
                deaths</span
            >
        </p>
        <ul class="c0 lst-kix_sdm4al2ui29d-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Generally costs less to push the limits than upgrade to
                    faster CPU</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >No EDAC protection against hardware bit flips</span
            >
        </p>
        <ul class="c0 lst-kix_lhujpy1n66fm-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Generally costs less to make memory chips without
                    EDAC</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_lhujpy1n66fm-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >If confident, why let NASA believe there was EDAC?</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.5ww08xqftgyg">
            <span class="c13">Toyota&rsquo;s Inadequate Software Process</span>
        </h3>
        <ul class="c0 lst-kix_vguos984lt4i-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Toyota failed to exercise a safe standard of care for
                    software
                </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vguos984lt4i-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Relied too much on vendors</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Lacked internal expertise</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_vguos984lt4i-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Inadequate supervision and training of software
                </span>
            </li>
        </ul>
        <h3 class="c20" id="h.onldq7d8ea6m"><span class="c13">Stuff</span></h3>
        <h4 class="c17" id="h.w5q5xbjty1c">
            <span class="c7">Toyota&rsquo;s Defective Safety Culture</span>
        </h4>
        <h4 class="c17" id="h.xx5l5mblcy77">
            <span class="c7">NASA sought what Barr Group found</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >&ldquo;Single memory corruption results in UA&rdquo;
            </span>
        </p>
        <p class="c1">
            <span class="c6">&ldquo;Fault escapes detection&rdquo; </span>
        </p>
        <ul class="c0 lst-kix_d0o6hm6vijbs-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;No EDAC error&rdquo; (because there is no EDAC!)
                </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;Idle fuel cut not active&rdquo; (because in same
                    task)
                </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;Watchdog serviced&rdquo; (because defective design)
                    Monitor-CPU
                </span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;does not detect failure&rdquo; (because not designed
                    to)
                </span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >&ldquo;Openings up to wide open throttle&rdquo;
            </span>
        </p>
        <h3 class="c20" id="h.hb8phg2tj0r9">
            <span class="c13">Unreasonable Single Points of Failure</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Safety critical systems shouldn&rsquo;t have single points of
                failure</span
            >
        </p>
        <ul class="c0 lst-kix_iqohn8fyqgol-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >This is the normal mode of design in automotive industry
                </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Toyota tried to mitigate such risks, including in
                software</span
            >
        </p>
        <ul class="c0 lst-kix_a03wznl5cg7l-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >But missed some dangerous single points of failure</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_a03wznl5cg7l-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Failed to prevent or contain faults &hellip;</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_a03wznl5cg7l-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >There are single points of failure in the ETCS</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_a03wznl5cg7l-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Some demonstrated in 2005 and 2008 Camry L4 vehicles</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Unpredictable range of vehicle misbehaviors via task
                    death</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Other memory corruptions can be expected
                </span>
            </li>
        </ul>
        <h3 class="c20" id="h.o7cxgqgwsfer">
            <span class="c13">Individual Task Death Outcomes</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >(Watchdog should have detected them all!!!!!!!!!!!)</span
            >
        </p>
        <h3 class="c20" id="h.p70nhq5bhkke">
            <span class="c13">The Test Space is Effectively Infinite</span>
        </h3>
        <p class="c1"><span class="c61 c70">&infin;</span></p>
        <p class="c1">
            <span class="c6"
                >There are &gt;16 million combinations of task death</span
            >
        </p>
        <ul class="c0 lst-kix_e4m6govccc4g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Memory corruption can kill 1, 2, or all 24</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Each task can die in thousands of different states</span
            >
        </p>
        <ul class="c0 lst-kix_o20r80st43hz-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Vehicle operational states (e.g., cruise on/off; accel 5%
                    vs. 50%)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_o20r80st43hz-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >And what happens next; driver reactions to misbehaviors;
                    etc.</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_o20r80st43hz-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Internal software states </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">Test &ldquo;samples&rdquo; so far confirm</span>
        </p>
        <ul class="c0 lst-kix_pfipj5na5mhu-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Claimed fail-safes inadequate! </span>
            </li>
        </ul>
        <h3 class="c20" id="h.im4oleqkmwqn">
            <span class="c13">UA forever if brake on at task death</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 413.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image28.png"
                    style="
                        width: 602px;
                        height: 413.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.76krcloolqdu">
            <span class="c13">Case-Specific Opinions</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >ETCS misbehavior is more likely than other causes</span
            >
        </p>
        <ul class="c0 lst-kix_3h0serwqf7cp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Car should have stopped in less distance if throttle not
                    open (McCort)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Eyewitness testimony of alert driver using brakes (Mrs.
                    Schwarz)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >No evidence of pedal entrapment by a floor mat
                    (photos)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >No mechanical problems found at any vehicle inspection
                    (experts)
                </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Cannot identify with 100% certainty the specific software
                defects</span
            >
        </p>
        <ul class="c0 lst-kix_93izl3pvc4ff-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Toyota&rsquo;s software design &ldquo;deletes&rdquo;
                    evidence of software problems</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_93izl3pvc4ff-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Restart car and engine is fine (Toyota should have logged
                    errors)
                </span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">More likely than not undetected Task X death</span>
        </p>
        <ul class="c0 lst-kix_z1tbcw8mldwx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Many brake pumpers don&rsquo;t fully release the brake
                    pedal (Cooper)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >&ldquo;Car sped up when brakes were pumped&rdquo; makes
                    sense</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.6zwz7buhi45l">
            <span class="c13">Other Similar Incident Criteria</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Vehicles with substantially similar ETCS software</span
            >
        </p>
        <ul class="c0 lst-kix_7ftwdgfmtt09-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">e.g., 2005-2009 Camry</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6">Incidents with no apparent mechanical cause</span>
        </p>
        <ul class="c0 lst-kix_ual7yjc0t69j-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Lack of support for floor mats trapping accelerator
                    pedal</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >No indication of any mechanical issue before or after</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6">Driver and witness statements describe UA</span>
        </p>
        <ul class="c0 lst-kix_w0cvwwa78hv9-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >And no evidence contradicting correct use of pedals
                </span>
            </li>
        </ul>
        <h3 class="c20" id="h.ckgl3gavybr8">
            <span class="c13">Toyota Experts</span>
        </h3>
        <p class="c1">
            <span class="c6">there are gaps thru those layers</span>
        </p>
        <p class="c1">
            <span class="c6"
                >counter-intuitive (in an emergency!) and likely to increase (!)
                risk of harm</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >&ldquo;It depends on how much fuel&rdquo; (Sep 2013)</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c43 c61 c80"
                >So why does any of this matter? I don&rsquo;t know, I just
                write the notes...</span
            >
        </p>
        <p class="c1">
            <span class="c43 c61 c80"
                >If you actually read through all of that... then well done
                :)</span
            >
        </p>
        <h2 class="c23" id="h.n3e9vp234ocd">
            <span class="c52">Reliability Continued</span>
        </h2>
        <h3 class="c20" id="h.k0gs3icq7xl"><span class="c13">Context</span></h3>
        <h4 class="c17" id="h.1q3locq0vbef">
            <span class="c7">Classic Problem</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Reliability is one of the oldest problems studied in computer
                science:</span
            >
        </p>
        <ul class="c0 lst-kix_733ao15xk9v0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Early computers were notoriously unreliable</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_733ao15xk9v0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Relays contacts corroded</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Vacuum tubes burned out</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_733ao15xk9v0-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Program length was limited by mean-time to failure</span
                >
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >It is still a problem: new technologies trade size and energy
                consumption against reliability. (nano-tansistors, organic
                transistors, etc.)</span
            >
        </p>
        <h4 class="c17" id="h.7hxabjb2bl3v">
            <span class="c7">Interesting Problem</span>
        </h4>
        <ul class="c0 lst-kix_immcxbtn3kzz-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >We would not exist if evolution would not have found a
                    solution</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_immcxbtn3kzz-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Biological system operate fine with plenty of noise on all
                    scales</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_immcxbtn3kzz-0">
            <li class="c1 c3 li-bullet-0">
                <span
                    >All living systems need to preserve their complex
                    organisation against </span
                ><span class="c11">entropy </span
                ><span class="c6">from the environment</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_immcxbtn3kzz-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c39 c16"
                    >All living systems are very good information
                    processors</span
                >
            </li>
        </ul>
        <hr style="page-break-before: always; display: none" />
        <h3 class="c20 c82" id="h.md5afurw51ho"><span class="c13"></span></h3>
        <h4 class="c17" id="h.c7ss64dwflp">
            <span class="c7">What can persist?</span>
        </h4>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.ae10219c2ad5952e62252ca12735e7ce8798f9a6"></a><a id="t.9"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c29" colspan="1" rowspan="1">
                        <p class="c18">
                            <span
                                style="
                                    overflow: hidden;
                                    display: inline-block;
                                    margin: 0px 0px;
                                    border: 0px solid #000000;
                                    transform: rotate(0rad) translateZ(0px);
                                    -webkit-transform: rotate(0rad)
                                        translateZ(0px);
                                    width: 186px;
                                    height: 168px;
                                "
                                ><img
                                    alt=""
                                    src="assets/computer-systems-ii/image15.png"
                                    style="
                                        width: 186px;
                                        height: 168px;
                                        margin-left: 0px;
                                        margin-top: 0px;
                                        transform: rotate(0rad) translateZ(0px);
                                        -webkit-transform: rotate(0rad)
                                            translateZ(0px);
                                    "
                                    title=""
                            /></span>
                        </p>
                    </td>
                    <td class="c29" colspan="1" rowspan="1">
                        <p class="c18">
                            <span
                                style="
                                    overflow: hidden;
                                    display: inline-block;
                                    margin: 0px 0px;
                                    border: 0px solid #000000;
                                    transform: rotate(0rad) translateZ(0px);
                                    -webkit-transform: rotate(0rad)
                                        translateZ(0px);
                                    width: 186px;
                                    height: 241.33px;
                                "
                                ><img
                                    alt=""
                                    src="assets/computer-systems-ii/image12.png"
                                    style="
                                        width: 186px;
                                        height: 241.33px;
                                        margin-left: 0px;
                                        margin-top: 0px;
                                        transform: rotate(0rad) translateZ(0px);
                                        -webkit-transform: rotate(0rad)
                                            translateZ(0px);
                                    "
                                    title=""
                            /></span>
                        </p>
                    </td>
                    <td class="c29" colspan="1" rowspan="1">
                        <p class="c18">
                            <span
                                style="
                                    overflow: hidden;
                                    display: inline-block;
                                    margin: 0px 0px;
                                    border: 0px solid #000000;
                                    transform: rotate(0rad) translateZ(0px);
                                    -webkit-transform: rotate(0rad)
                                        translateZ(0px);
                                    width: 186px;
                                    height: 244px;
                                "
                                ><img
                                    alt=""
                                    src="assets/computer-systems-ii/image25.png"
                                    style="
                                        width: 186px;
                                        height: 244px;
                                        margin-left: 0px;
                                        margin-top: 0px;
                                        transform: rotate(0rad) translateZ(0px);
                                        -webkit-transform: rotate(0rad)
                                            translateZ(0px);
                                    "
                                    title=""
                            /></span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c29" colspan="1" rowspan="1">
                        <ul class="c0 lst-kix_wgxs6rytixrp-0 start">
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6">Simple system</span>
                            </li>
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6">Deteriorates slowly</span>
                            </li>
                        </ul>
                        <p class="c18 c15"><span class="c6"></span></p>
                    </td>
                    <td class="c29" colspan="1" rowspan="1">
                        <ul class="c0 lst-kix_hja5nqs80b23-0 start">
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6"
                                    >Engineered complex system</span
                                >
                            </li>
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6">Deteriorates fast</span>
                            </li>
                        </ul>
                    </td>
                    <td class="c29" colspan="1" rowspan="1">
                        <ul class="c0 lst-kix_uojpq166n6kz-0 start">
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6">Self-repair</span>
                            </li>
                            <li class="c18 c3 li-bullet-0">
                                <span class="c6">Deteriorates slowly</span>
                            </li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.tsrj4n4gqfvr">
            <span class="c13">Reliability in Embedded Systems</span>
        </h3>
        <ul class="c0 lst-kix_djqx1gbj9wxe-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Software has bugs</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Anything can be wrong anyway</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Arbitrary bit flips in any register or memory cell are
                    possible</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Redundancy is required</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Several copies of the same system</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Protects against random hardware faults</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Diversity in replicated systems</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >Protects against systematic faults (software bugs)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Redundant units need to communicate</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_djqx1gbj9wxe-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Communication can fail</span>
            </li>
        </ul>
        <h4 class="c17" id="h.ux30end6pbrb">
            <span class="c7">What can be done?</span>
        </h4>
        <ul class="c0 lst-kix_td7lmkhahvwq-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Error Detection</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Self-repair?</span>
            </li>
        </ul>
        <h3 class="c20" id="h.mb7tarlwi0g6">
            <span class="c13">Integrity Checks</span>
        </h3>
        <p class="c1"><span class="c6">Is anything wrong?</span></p>
        <ul class="c0 lst-kix_ozwh7lyttf2a-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Pairty</span></li>
        </ul>
        <ul class="c0 lst-kix_ozwh7lyttf2a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Guarantee that the number of o-bits is even (or odd)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Requires one extra bit for the bit-stream that is
                    covered</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Typically on byte level</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Typically available in hardware (USART)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ozwh7lyttf2a-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Check sum</span></li>
        </ul>
        <ul class="c0 lst-kix_ozwh7lyttf2a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Reduce probability of undetected error</span>
            </li>
        </ul>
        <h3 class="c20" id="h.n2lyh2nmq8wv">
            <span class="c13">Cyclic Redundancy Checksums</span>
        </h3>
        <ul class="c0 lst-kix_btlm6c434pwt-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Message integrity</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Memory integrity</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Many techniques</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_btlm6c434pwt-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >E.g., take bitwise XOR of all bytes in a message</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Some techniques have been exhaustively studied
                </span>
            </li>
        </ul>
        <ul class="c0 lst-kix_btlm6c434pwt-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">(possible for microcontroller size data)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_btlm6c434pwt-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Make sure you pick a known good CRC</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Make sure it is long enough</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Hardware or lookup tables</span>
            </li>
        </ul>
        <h3 class="c20" id="h.np6u2x38i1pf">
            <span class="c13">Which bit is wrong?</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >If we know which bit is wrong we can flip it back.</span
            >
        </p>
        <ul class="c0 lst-kix_3rt8ruj0pbjx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Error Correcting Codes</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >With extra redundancy some level of errors can be fully
                    corrected</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compress and add ECC?</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3rt8ruj0pbjx-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Transition from smooth degradation to sudden drop off</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Makes problem recognition easier</span>
            </li>
        </ul>
        <h3 class="c20" id="h.y78hlc6fy7s8">
            <span class="c13">Redundant Codes</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Hamming distance between code words: how many bits
                differ?</span
            >
        </p>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">1 bit</span
                ><span class="c6">: Any bit flip gives a new code word</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">No detection</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >1 could change to a 0 and we wouldn&#39;t know</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">2 bits</span
                ><span class="c6"
                    >: a single bit flip results in an invalid code word</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Error detection</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >11 could change to 10 and we would know (as 1 and 0 is
                    different)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">3 bits</span
                ><span class="c6"
                    >: a single bit flip results in an invalid code word and we
                    know which is the correct code word is closer</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Can correct single bit errors</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_8d3x8ddyz1u5-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6"
                    >111 could change to 101 and we would know the original is
                    most likely 111.</span
                >
            </li>
        </ul>
        <h2 class="c23" id="h.xlwqt7nwjs6u">
            <span class="c52">Watchdogs</span>
        </h2>
        <h3 class="c20" id="h.jd8665532sa5">
            <span class="c13">Fault Recovery</span>
        </h3>
        <h3 class="c20" id="h.muf5261fbk1y">
            <span class="c13">Autonomous Fault Recovery</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Typical embedded systems need to operate continuously, but
                cannot rely on human supervision:</span
            >
        </p>
        <ul class="c0 lst-kix_lg1691bqtaii-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">System not easily accessible</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_lg1691bqtaii-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Implanted device</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Space probe</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_lg1691bqtaii-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Human supervision is too:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_lg1691bqtaii-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Costly</span></li>
            <li class="c1 c5 li-bullet-0"><span class="c6">Slow</span></li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_211n3ynhtkwu-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Use a watchdog to supervise the system</span>
            </li>
        </ul>
        <h3 class="c20" id="h.h9hqrrdl14p5">
            <span class="c13">Watchdog</span>
        </h3>
        <ul class="c0 lst-kix_azlw21txispd-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Hardware counter with its own clock (timer)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >When the timer runs out the system receives a hardware
                    reset (the &ldquo;dog bites&rdquo;)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Software in normal operation restarts the timer before it
                    runs out (&ldquo;kick the dog&rdquo;)</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.x8q5l68dr694">
            <span class="c13">Software Faults</span>
        </h3>
        <ul class="c0 lst-kix_6qu1kxsu7wmu-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Endless loops</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Interrupt flood</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deadlocks from multitasking</span>
            </li>
        </ul>
        <h3 class="c20" id="h.wekdodbvlfdi">
            <span class="c13">Watchdog in the AT90USB1286</span>
        </h3>
        <ul class="c0 lst-kix_gq7idau9gduq-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Programmable Watchdog Timer</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_gq7idau9gduq-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">With separate on-chip oscillator</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_gq7idau9gduq-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Time-out of the watchdog can cause:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_gq7idau9gduq-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">1. A RESET of the system</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">2. An Interrupt (WDT)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >3. An interrupt, and switch to reset mode</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_gq7idau9gduq-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Time range: 16ms-8s</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_gq7idau9gduq-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Also: voltage and temperature dependent</span>
            </li>
        </ul>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 427.69px;
                    height: 275.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image62.png"
                    style="
                        width: 427.69px;
                        height: 275.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.xaa4wb9cl4mr">
            <span class="c7">Acting on the Watchdog</span>
        </h4>
        <ul class="c0 lst-kix_nqx6pw2rbmsy-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c11">Interrupt</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nqx6pw2rbmsy-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">ISR on WDT will take action</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_nqx6pw2rbmsy-0">
            <li class="c1 c3 li-bullet-0"><span class="c11">Reset</span></li>
        </ul>
        <ul class="c0 lst-kix_nqx6pw2rbmsy-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Check Watchdog Reset Flag (WDRF) in MCU status register to
                    recognise if the system was reset due to a watchdog
                    timeout</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_nqx6pw2rbmsy-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Reset peripheral hardware</span>
            </li>
        </ul>
        <h3 class="c20" id="h.ukquyxew5e6l">
            <span class="c13">Usage Scenarios</span>
        </h3>
        <ul class="c0 lst-kix_a0778s9391ce-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>Wake up from sleep -&gt; </span
                ><span class="c16">interrupt</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Other oscillator can be powered down</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-0">
            <li class="c1 c3 li-bullet-0">
                <span>Time-out on operations -&gt; </span
                ><span class="c16">interrupt</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Exit system hang up -&gt; </span
                ><span class="c16">reset</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Recover from assertion fault -&gt; </span
                ><span class="c16">reset</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">1. Log the fault</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">2. Enter endless loop</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Watch out for real-time requirements</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Recover from task death -&gt; interrupt &amp; reset</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_a0778s9391ce-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Verified task execution as condition for feeding the
                    watchdog</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.ppzntpl3urb8">
            <span class="c13">Power Consumption</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Note, that if the watchdog is enabled it will run in all sleep
                modes and always consume power. This may be the dominant power
                consumption in a deep sleep mode.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                >The watchdog&rsquo;s oscillator is much slower than the typical
                main clock and requires therefore less power - it can be used to
                wake from sleep instead of a timer running off the main
                clock.</span
            >
        </p>
        <h3 class="c20" id="h.nvb7xem71409">
            <span class="c13">Protection</span>
        </h3>
        <p class="c1">
            <span class="c39 c16"
                >It is important that a run-away program will not accidentally
                disable the watchdog timer before it times out!</span
            >
        </p>
        <ul class="c0 lst-kix_r2xb4r5ji3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Watchdog can be set by fuse programming to be always on
                    -&gt; fixed in reset mode</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Configuration bits for reset mode and time-out are protected by
                a specific write sequence:</span
            >
        </p>
        <p class="c1"><span class="c19 c11">Watchdog Configuration</span></p>
        <ol class="c0 lst-kix_d7vte0l21guw-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">In one operation write a 1 to:</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_d7vte0l21guw-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">The watchdog change enable bit (WDCE)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">The system rest mode bit (WDE)</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_d7vte0l21guw-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Within the next four clock cycles:</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_d7vte0l21guw-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Write desired value to WDE</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Write prescaler bits (WDP0-WDP3)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span>Write </span><span class="c11">o</span
                ><span class="c6">&nbsp;to WDCE</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c39 c16"
                >It is important that the watchdog timer is not accidentally
                disabling a system!</span
            >
        </p>
        <h4 class="c17" id="h.vgbu0dcveryd">
            <span class="c7">Avr-libc support</span>
        </h4>
        <p class="c1 c59"><span class="c6">#include &lt;avr/wdt.h&gt;</span></p>
        <p class="c1">
            <span class="c6"
                >Enable the watchdog with a given timeout period:</span
            >
        </p>
        <p class="c1 c59"><span class="c6">wdt_enable(WDT0_1S);</span></p>
        <p class="c1"><span class="c6">Restart the timer:</span></p>
        <p class="c1">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wdt_reset();</span
            >
        </p>
        <p class="c1"><span class="c6">Disable the watchdog:</span></p>
        <p class="c1">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MCUSR =
                0;</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wdt_disable();</span
            >
        </p>
        <h3 class="c20" id="h.s6yih8d0qctq">
            <span class="c13">Initialization Period</span>
        </h3>
        <ul class="c0 lst-kix_j614ubm3fibp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span>After the watchdog has triggered </span
                ><span class="c19 c11"
                    >it will stay enabled with the fastest prescale value</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >If program initialization takes longer than the time out
                    period the device will lock up in an endless reset
                    cycle</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >(See the avr-libc manual for code to handle this)</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_jhuvl2nak2kx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >In general: count number of watchdog induced resets</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_jhuvl2nak2kx-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Consider to disable watchdog if this number excessive</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.i27uak5teph4">
            <span class="c13">Watchdog is Practice</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 277.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image64.png"
                    style="
                        width: 602px;
                        height: 277.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h4 class="c17" id="h.d92vxzm1ivge">
            <span class="c7">Software Reset</span>
        </h4>
        <p class="c1">
            <span class="c6">Applications for the watchdog timer:</span>
        </p>
        <ul class="c0 lst-kix_3ognogz6zxdd-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fault recovery</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low power oscillator</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3ognogz6zxdd-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Wake from sleep</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Timing not precise</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3ognogz6zxdd-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Clean software reset</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3ognogz6zxdd-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">1. Firmware update</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3ognogz6zxdd-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Bootloader</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_3ognogz6zxdd-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">2. Enable watchdog</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">3. Enter endless loop</span>
            </li>
        </ul>
        <h4 class="c17" id="h.qxobo4uoen1v">
            <span class="c7">Watchdogs differ from device to device</span>
        </h4>
        <ul class="c0 lst-kix_e3xlnpsoan3f-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Some watchdogs can only be enabled, but not disabled</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Some watchdogs allow an extra delay during the first time
                    out period</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_e3xlnpsoan3f-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Account for initialization period</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_e3xlnpsoan3f-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Some watchdogs are disabled after a time-out</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_e3xlnpsoan3f-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Need to be enabled during initialization</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c39 c16"
                >Watchdogs have different modes - know which mode is
                active.</span
            >
        </p>
        <h4 class="c17" id="h.oifvyyhcb196">
            <span class="c7">Stuck Tasks</span>
        </h4>
        <ul class="c0 lst-kix_uoiojad5j5j8-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Time-outs should protect any task that waits for external
                    events from locking up indefinitely</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Watchdogs can be last defense or part of the time-out
                    design</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_uoiojad5j5j8-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Critical system?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Cost critical?</span>
            </li>
        </ul>
        <h3 class="c20" id="h.icgiv98pebri">
            <span class="c13">Multi-tasking</span>
        </h3>
        <h4 class="c17" id="h.h1zvup8m8u8d">
            <span class="c7">Monitor Task</span>
        </h4>
        <ul class="c0 lst-kix_ajpbxu4wpp8a-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Monitor task can watch over other tasks</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ajpbxu4wpp8a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >This is the only task allowed to restart the watchdog</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_ajpbxu4wpp8a-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >All tasks report their operation by acting on a global set
                    of flags</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_ajpbxu4wpp8a-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >E.g., clearing the flag when task completes</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_ajpbxu4wpp8a-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Monitor task only restarts the watchdog if all tasks have
                    reported success</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.ey3ejhmc73kt">
            <span class="c7">Time Scales</span>
        </h4>
        <p class="c1">
            <span class="c6"
                >Often tasks run at very different time scales</span
            >
        </p>
        <ul class="c0 lst-kix_r5cr1x3h8yko-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A frequent high priority task may be critical</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >A frequent task will report at a much lower frequency</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">How can this be handled?</span></p>
        <h3 class="c20" id="h.bnekb7xos19w">
            <span class="c13">Event-driven Tasks</span>
        </h3>
        <p class="c1">
            <span class="c6">Tasks may arrive at unpredictable intervals</span>
        </p>
        <ul class="c0 lst-kix_dpvn89ld11fn-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >How can the execution of such tasks be monitored with a
                    watchdog?</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.rxnr19tlqjj6">
            <span class="c7">Robust Monitoring</span>
        </h4>
        <p class="c1">
            <span class="c6">Assume that random bit-flips can happen</span>
        </p>
        <ul class="c0 lst-kix_g5zwa7h55cn3-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >How can the task monitoring be hardened against not
                    recognizing faults?</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.nluhwe2xuwtl">
            <span class="c7">What do we do when the dog bites?</span>
        </h4>
        <ol class="c0 lst-kix_s4tvs4npy5c3-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Reset is often a good option</span>
            </li>
        </ol>
        <ul class="c0 lst-kix_s4tvs4npy5c3-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Start from a clean state</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Keep periphery in mind</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_s4tvs4npy5c3-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Try to make it known that there was a watchdog reset</span
                >
            </li>
        </ol>
        <ul class="c0 lst-kix_s4tvs4npy5c3-1 start">
            <li class="c1 c5 li-bullet-0"><span class="c6">Flash LED</span></li>
            <li class="c1 c5 li-bullet-0">
                <span>Log the event to EEPROM</span>
            </li>
        </ul>
        <h3 class="c20" id="h.sh0tdfucmya6"><span class="c13">?</span></h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 256px;
                    height: 410px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image30.png"
                    style="
                        width: 256px;
                        height: 410px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h2 class="c23" id="h.f0x3o6mw4mv4">
            <span class="c52">Security in Embedded Applications</span>
        </h2>
        <h3 class="c20" id="h.3j470tmn8ezd"><span class="c13">Risks</span></h3>
        <ul class="c0 lst-kix_wnhuu0c5ymsp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Fine grained privacy invasion</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Attack through subverted devices</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Attack on physical infrastructure</span>
            </li>
        </ul>
        <h3 class="c20" id="h.1arouq9lgqmt">
            <span class="c13">Internet of Things Research</span>
        </h3>
        <ul class="c0 lst-kix_a2wfowxdo4m7-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >90% of devices collected at least 1 piece of personal
                    info</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >80% of devices failed to require passwords of sufficient
                    complexity and length</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >70% of devices used unencrypted network services</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >70% of devices enable an attack to identify valid user
                    accounts through account enumeration</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >6/10 devices with UIs were vulnerable to issued such as
                    persistent XSS (Cross-site scripting) and weak
                    credentials</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.lnvqzqbfmqdf">
            <span class="c13">IoT Security</span>
        </h3>
        <ul class="c0 lst-kix_540v55522m1n-0 start">
            <li class="c1 c3 li-bullet-0"><span class="c6">Awareness</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Legacy</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Product cycle (limited dev time)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Possibly power consumption trade-offs</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Essentially internet security on a fine grained level</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.6o21bhuz6y76">
            <span class="c13">Security in Microcontroller Applications</span>
        </h3>
        <h4 class="c17" id="h.t8y96eikikio">
            <span class="c7">Threads?</span>
        </h4>
        <ul class="c0 lst-kix_vzkd7ekl5p86-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Destruction of devices</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Influence of processes (spoofed sensor data)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Denial of availability</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Leakage of authorization (keys)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Leakage of sensor information</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Intellectual property (code)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Device as attack vector</span>
            </li>
        </ul>
        <h3 class="c20" id="h.68p0urt46zfo"><span class="c13">Issues</span></h3>
        <ul class="c0 lst-kix_kiy2p8p9ihy0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Resource limitations!</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_kiy2p8p9ihy0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Not enough RAM and CPU power for strong encryption
                    software</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_kiy2p8p9ihy0-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Power budget</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Availability/Reliability</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_kiy2p8p9ihy0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Should your car steering wheel, pacemaker, etc. shut down
                    if it senses an attack?</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_kiy2p8p9ihy0-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Cost</span></li>
        </ul>
        <h3 class="c20" id="h.eljqxdlo2vol">
            <span class="c13">What can be done?</span>
        </h3>
        <ul class="c0 lst-kix_ptqg8pzhi4s6-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Security as part of the design!</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ptqg8pzhi4s6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">How to react?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Added hardware?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Physical access?</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Fuse settings? (chip security features)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ptqg8pzhi4s6-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Minimize configurability</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ptqg8pzhi4s6-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Trade-off with risk of development errors</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">No external RAM</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Hard-wire, ROM instead of Flash</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_ptqg8pzhi4s6-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">But: security flaws can&#39;t be fixed</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_995l0mp4j7e0-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Check integrity of all inputs</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_995l0mp4j7e0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Hardware checksums?</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_995l0mp4j7e0-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Avoid undefined inputs/configurations</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Remove &ldquo;debug&rdquo; modes from production code
                    (#ifdef)</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_995l0mp4j7e0-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >But: reliability? Which version has been fully
                    tested?</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_995l0mp4j7e0-0">
            <li class="c1 c3 li-bullet-0"><span class="c6">Logging</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Check that reliability does not interfere with security
                    -&gt; availability</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.lcy3d64sv77t">
            <span class="c13">Attacks On Hardware</span>
        </h3>
        <h4 class="c17" id="h.7j7amcgdfr56">
            <span class="c7">Why is hardware attacked?</span>
        </h4>
        <ul class="c0 lst-kix_wk30v9lk4b0j-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Extract firmware</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wk30v9lk4b0j-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Gain intellectual property</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wk30v9lk4b0j-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Support decryption</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Infiltrate a device</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_wk30v9lk4b0j-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Turn into attack vector</span>
            </li>
        </ul>
        <h4 class="c17" id="h.jqzjlvj8clmx">
            <span class="c7">Attack Methods</span>
        </h4>
        <p class="c1">
            <span class="c19 c11">Passive attack on hardware</span>
        </p>
        <p class="c1">
            <span class="c6"
                >Monitor normal operation of hardware (I/O, power consumption)
                to infer implementation details</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c19 c11">Active attack on hardware</span></p>
        <p class="c1">
            <span class="c6"
                >Manipulate hardware into abnormal states (including
                destruction) to gain insight design</span
            >
        </p>
        <h3 class="c20" id="h.rd30ac8fzmny">
            <span class="c13">Firmware as Attack Vector</span>
        </h3>
        <h4 class="c17" id="h.uiamvpsh0s3n">
            <span class="c7">Subverted Firmware on Drives</span>
        </h4>
        <p class="c1">
            <span class="c39 c16"
                >&rdquo;HDDs/SSDs whose firmware has been reprogrammed can
                reload associated malware each time infected systems boot and
                the threat remains persistent even if the drives are reformatted
                or the operating system is reinstalled. Further, the
                reprogrammed firmware and associated malware is undetectable by
                security software once they have infected the
                drive.&rdquo;</span
            >
        </p>
        <p class="c1">
            <span class="c6">- McAfee Labs Threats Report, May 2015</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Persistency</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >The reprogrammed firmware can survive disk reformatting and
                    operating system reinstallation or reimaging</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Invisibility</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >The hidden storage area is known only to the firmware and
                    it remains intact even if the HDD/SDD is reformatted</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Persistent firmware</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >In some cases, the key elements of the reprogrammed
                    firmware will even survive reflashing (replacing) the HDDs
                    or SSDs firmware.</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Undetectability</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bgbe2wrw9n0g-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >The reprogrammed firmware and associated malware is
                    undetectable by security software once the drive has been
                    infected</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.5bwtdcuo8u0t">
            <span class="c7">Subverted Firmware on USB Drives</span>
        </h4>
        <ul class="c0 lst-kix_whickk6m0vx5-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">USB drives have microcontrollers</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_whickk6m0vx5-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">USB protocol implementation</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Flash memory wear leveling</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_whickk6m0vx5-2 start">
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Can be reprogrammed</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >USB drives self-declare what they are&hellip;</span
            >
        </p>
        <ul class="c0 lst-kix_bipm0i4tcl53-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Can pretend to be a:</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_bipm0i4tcl53-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Graphic display and record screen shots</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Keyboard and send commands</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Network adapter</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >It can pretend to be a hub with all of the above and with a USB
                drive plugged in.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.nsoyxctjnxdm">
            <span class="c13">Attack on physical infrastructure</span>
        </h3>
        <h4 class="c17" id="h.2nfmfnlyc7jc">
            <span class="c7">IT- based attacks on physical systems</span>
        </h4>
        <ul class="c0 lst-kix_nw407tmx2gi1-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Speculation of manipulated control software leading to an
                    explosion in Trans-Siberian pipeline</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Slammer worm affects a nuclear power plant
                    (monitoring)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Blaster worm affects electricity supply</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Control centre for predator drones affected by virus</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Reported attack attempts on satellites</span>
            </li>
        </ul>
        <h4 class="c17" id="h.mhpws9uomd9b">
            <span class="c7">Infrastructure Security</span>
        </h4>
        <ul class="c0 lst-kix_cvtzk8b1qqy4-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Internet of Everything</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_cvtzk8b1qqy4-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Everything at risk</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_cvtzk8b1qqy4-2 start">
            <li class="c1 c30 li-bullet-0"><span class="c6">Power</span></li>
            <li class="c1 c30 li-bullet-0"><span class="c6">Water</span></li>
            <li class="c1 c30 li-bullet-0"><span class="c6">TV/Radio</span></li>
            <li class="c1 c30 li-bullet-0"><span class="c6">Phone</span></li>
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Production facilities</span>
            </li>
            <li class="c1 c30 li-bullet-0">
                <span class="c6">Transportation</span>
            </li>
        </ul>
        <h3 class="c20" id="h.zauooj11p82v">
            <span class="c13">Process Control Honey Pot</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >[A honeypot is a computer security mechanism set to detect,
                deflect, or counteract attempts at unauthorized use of
                information systems. Generally, a honeypot consists of data that
                appears to be a legitimate part of the site, but is actually
                isolated and monitored, and that seems to contain information or
                a resource of value to attackers, who are then blocked.]</span
            >
        </p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 488px;
                    height: 337px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image5.png"
                    style="
                        width: 488px;
                        height: 337px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c0 lst-kix_jxikutqd7ucx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">2 honey pots</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">28 days</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">First attack after 18h online</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >12 unique targeted attacks: USA, China, Russia</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.h4r2aulv8d6q">
            <span class="c7">Serious damage to blast furnace in Germany</span>
        </h4>
        <p class="c1"><span class="c6">Uh oh</span></p>
        <h3 class="c20" id="h.bovr0v1aot8q">
            <span class="c13">ThyssenKrupp, May 2013</span>
        </h3>
        <ul class="c0 lst-kix_u9sgdkuuwy1t-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >ThyssenKrupp is trying to sell its plant in Brazil</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >One of two furnaces shut down because of &ldquo;process
                    instabilities&rdquo;</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Insider: costs of at least $500M</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Affects negotiations about sale of plant</span>
            </li>
        </ul>
        <h3 class="c20" id="h.72756wt9ow2w">
            <span class="c13">Vulnerability in pacemakers</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >Hedge fund and cybersecurity firm team up to short-sell device
                maker.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Convert to weapons that can disable therapeutic care and
                deliver shocks to patients at distances of 10 feet&hellip;. Big
                uh oh.</span
            >
        </p>
        <h2 class="c23" id="h.bdyk4c441mw8">
            <span class="c52">Cybersecurity of Infrastructure</span>
        </h2>
        <h3 class="c20" id="h.sga6fow4u1zo">
            <span class="c13">Stuxnet</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >&ldquo;The malware marks a clear turning point in the history
                of cyber security and in military history as well.&rdquo;</span
            >
        </p>
        <h4 class="c17" id="h.sm25vfr7ctwo">
            <span class="c7">Outline of how Stuxnet worked</span>
        </h4>
        <ol class="c0 lst-kix_7n94mct9tkwe-0 start" start="1">
            <li class="c1 c3 li-bullet-0"><span class="c6">Infection</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Search</span></li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Update</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Compromise</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Control</span></li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Deceive and destroy</span>
            </li>
        </ol>
        <h4 class="c17" id="h.jbhjva8daswm">
            <span class="c7">Ralph Langner: To Kill a Centrifuge </span>
        </h4>
        <p class="c1">
            <span class="c6"
                >A Technical Analysis of What Stuxnet&rsquo;s Creators Tried to
                Achieve &ldquo;. . .between 2008 and 2009 the creators of
                Stuxnet realized that they were on to something much bigger than
                to delay the Iranian nuclear program: History&rsquo;s first
                field experiment in cyber-physical weapon technology.&rdquo;
                &ldquo;. . .offensive cyber forces around the world will
                certainly learn from history&rsquo;s first true cyber weapon. .
                .&rdquo;
            </span>
        </p>
        <h3 class="c20" id="h.9e271qvm1oc7">
            <span class="c13">Iran&rsquo;s approach to uranium enrichment</span>
        </h3>
        <ul class="c0 lst-kix_vec74bnfokte-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >IR-1 centrifuge: 1960&ndash;70 European design</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">P-1 centrifuge: Pakistani design</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Run at over 60k RPM </span>
            </li>
        </ul>
        <p class="c1">
            <span
                >Centrifuges in use are not reliable and not efficient&mdash;
                Iran took Google&rsquo;s approach: build a large infrastructure
                that can tolerate the break-downs: </span
            ><span class="c19 c11">Cascade Protection System</span>
        </p>
        <h4 class="c17" id="h.uvhc2jw43gs5">
            <span class="c7">Cascade Protection System</span>
        </h4>
        <ul class="c0 lst-kix_n7y9jcrlporf-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Vibration indicates failed centrifuges</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Valves are in place to isolate a centrifuge if it
                    fails</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Replace centrifuge with new one</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Isolating several centrifuges will change gas
                    pressure</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_n7y9jcrlporf-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Gas pressure is critical for correct operation</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_n7y9jcrlporf-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Workaround: dump valve at each stage</span>
            </li>
        </ul>
        <h4 class="c17" id="h.spf8wy82mj0n">
            <span class="c7">Over Pressure Attacks</span>
        </h4>
        <ul class="c0 lst-kix_6jc3kv4y7q73-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Infects siemens S7-417 controllers</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6jc3kv4y7q73-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Six cascades = 984 centrifuges</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_6jc3kv4y7q73-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Normally infected controller software passes commands
                    through unchanged</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >When activated ignores outside commands and takes
                    over</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Had to be loaded on system physically (USB stick?)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Code discovered 2007</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Very detailed knowledge of the plant was available</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.surx5xrb895t">
            <span class="c7">Rotor Speed Attack: Pushing the Envelope</span>
        </h4>
        <ul class="c0 lst-kix_ankz7xldavdq-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Less stealthy</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Attack on drive system</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Zero-day windows attack vectors</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span>Did a bigger group take over the operation?</span>
            </li>
        </ul>
        <h3 class="c20" id="h.gcte4tmc9d9e">
            <span class="c13">Stuxnet Relations</span>
        </h3>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 533px;
                    height: 384px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image47.png"
                    style="
                        width: 533px;
                        height: 384px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.jqbjcaceqlgp">
            <span class="c13">Engineering</span>
        </h3>
        <h4 class="c17" id="h.23d4geuxa7eo">
            <span class="c7">Exploited Vulnerabilities</span>
        </h4>
        <ol class="c0 lst-kix_r8mjmozd1bu0-0 start" start="1">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">LNK vulnerability (Zlob in 2008)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Server service</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Print spooler (Hackin9 magazine 2009)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Kbd privilege escalation</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Return-oriented exploits (ROP)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Hardcoded password (WinCC DBMS)</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Stolen certificates (Realtek, JMicron)</span>
            </li>
        </ol>
        <h4 class="c17" id="h.sasqpieel2it">
            <span class="c7">Targeting</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 357px;
                    height: 367px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image38.png"
                    style="
                        width: 357px;
                        height: 367px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c0 lst-kix_n5xnnf78aqkg-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">PLC CPUs: 6ES7-417, 6ES7-315-2</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">At least 33 frequency convertors</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n5xnnf78aqkg-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Specific models (Finish and Iranian)</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_n5xnnf78aqkg-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Converters operate at 807-1210 Hz</span>
            </li>
        </ul>
        <h3 class="c20" id="h.qb3dg2gs6muh"><span class="c13">Impact</span></h3>
        <p class="c1">
            <span class="c6"
                >Stuxnet was a proof of concept for a new attack strategy.</span
            >
        </p>
        <ul class="c0 lst-kix_c46dsq6643vn-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Largely autonomous narrowly targeted attacks</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.xlg5vt5rp99s"><span class="c13">Stuff</span></h3>
        <p class="c1"><span class="c6">Centrifuge graph?</span></p>
        <p class="c1">
            <span class="c6">Recent sighted of code, Duqu payload 2011?</span>
        </p>
        <h4 class="c17" id="h.5og9myt31w0d"><span class="c7">Duqu</span></h4>
        <p class="c1">
            <span class="c6"
                >&ldquo;Duqu&rsquo;s purpose is to gather intelligence data and
                assets from entities such as industrial control system
                manufacturers in order to more easily conduct a future attack
                against another third party. The attackers are looking for
                information such as design documents that could help them mount
                a future attack on an industrial control facility&rdquo;.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_x780214z09sr-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Known to be active since april 2011</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Shares code with Stuxnet</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_x780214z09sr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Code is updated</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_x780214z09sr-0">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Payload is different</span>
            </li>
        </ul>
        <ul class="c0 lst-kix_x780214z09sr-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">1. Collects information</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">2. Provides remote access</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <ul class="c0 lst-kix_hxstz1d4dykl-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Creators of Duqu had access to the source code of
                    Stuxnet</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.yv71ksfuw4z2">
            <span class="c7">Stuxnet relation</span>
        </h4>
        <ul class="c0 lst-kix_e1x05vcrqdnx-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >RPC component identical to Stuxnet&rsquo;s RPC code</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Bypass of security products is an updated version of that
                    from Stuxnet</span
                >
            </li>
        </ul>
        <ul class="c0 lst-kix_e1x05vcrqdnx-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Now defeats 11 anti-virus products incl. Symantec, McAfee,
                    and Kaspersky</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Information collected would be useful for a Stuxnet-like
                    attack</span
                >
            </li>
        </ul>
        <h3 class="c20" id="h.nan5sozeicj7">
            <span class="c13">Duqu Attack</span>
        </h3>
        <p class="c1"><span class="c6">Three components</span></p>
        <ol class="c0 lst-kix_ml6et4a59or9-0 start" start="1">
            <li class="c1 c3 li-bullet-0"><span class="c6">Installer</span></li>
        </ol>
        <ul class="c0 lst-kix_ml6et4a59or9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Word document</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >0-day kernel exploit (unpatched -&gt; undisclosed)</span
                >
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Time limited (8 days in the sample)</span>
            </li>
        </ul>
        <ol class="c0 lst-kix_ml6et4a59or9-0" start="2">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Configuration File</span>
            </li>
            <li class="c1 c3 li-bullet-0"><span class="c6">Driver</span></li>
        </ol>
        <ul class="c0 lst-kix_ml6et4a59or9-1 start">
            <li class="c1 c5 li-bullet-0">
                <span class="c6">Contains encrypted code</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c6"
                    >Injects code into other executables (explorer.exe,
                    ieplorer.exe, firefox.exe)</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Control:</span></p>
        <ul class="c0 lst-kix_wc9actd19n5r-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Three control servers identified (reroute)</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >Messages encrypted and embedded in jpeg-images</span
                >
            </li>
        </ul>
        <h4 class="c17" id="h.le5kd3vhbce">
            <span class="c7">Duqu: Installation</span>
        </h4>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 450.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image31.png"
                    style="
                        width: 602px;
                        height: 450.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c20" id="h.ie87pqdu6o43">
            <span class="c13">Duqu vs. Stuxnet</span>
        </h3>
        <p class="c1 c15"><span class="c6"></span></p>
        <a id="t.3b145e10bb48ab6e20e45846693d444ad17302c9"></a><a id="t.10"></a>
        <table class="c36">
            <tbody>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Feature</span></p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Duqu</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c19 c11">Stuxnet</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Composed of multiple modules</span>
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Rootkit to hide its activities</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >System driver is digitally signed</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes (C-Media)</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (Realtek, JMicron)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >System driver decrypts secondary modules in PNF
                                files</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Decrypted DLLs are directly injected into
                                system processes instead of dropped to
                                disk</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Date sensitive: functionality is controlled via
                                complex, encrypted configuration file</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes (36 days)</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Use XOR based encryption for strings</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (key: 0xAE1979DD)</span>
                        </p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (key: 0xAE1979DD)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Referencing 05.09.1979 in configuration
                                file</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (0xAE1979DD)</span>
                        </p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (0xAE1979DD)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >New update modules via C&amp;C</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6">Yes (keylogger)</span>
                        </p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
                <tr class="c27">
                    <td class="c12" colspan="1" rowspan="1">
                        <p class="c18">
                            <span class="c6"
                                >Known module to control PLC/SCADA systems</span
                            >
                        </p>
                    </td>
                    <td class="c25" colspan="1" rowspan="1">
                        <p class="c18"><span class="c39 c16">No</span></p>
                    </td>
                    <td class="c31" colspan="1" rowspan="1">
                        <p class="c18"><span class="c6">Yes</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c1 c15"><span class="c6"></span></p>
        <h4 class="c17" id="h.2elu00rxzhz2">
            <span class="c7">Duqu Logging</span>
        </h4>
        <ul class="c0 lst-kix_pucrw3sz7uvp-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Keystrokes</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">OS version and patches</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Users, machine names,...</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Process list</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Network configuration</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Shared folders</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Machines on same network</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Screenshots</span>
            </li>
        </ul>
        <p class="c1">
            <span class="c6"
                >Logging controlled by command line, and delivered after initial
                installation.</span
            >
        </p>
        <p class="c1">
            <span>&nbsp;</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 244px;
                    height: 398px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image52.png"
                    style="
                        width: 244px;
                        height: 398px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h1 class="c64" id="h.uj0uscev42no"><span class="c45">TL;DR</span></h1>
        <p class="c1">
            <span class="c6">Microcontroller&rsquo;s and stuff.</span>
        </p>
        <p class="c1">
            <span class="c6"
                >Know about memory and scheduling, RMS IS THE BEST!</span
            >
        </p>
        <p class="c1">
            <span class="c6">Know about interru- HEY STOP INTERRUPTING!</span>
        </p>
        <p class="c1">
            <span class="c6"
                >Classic Von Neumann and Harvard architecture.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Know how to code in C, its cool and works with embedded
                systems.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Also debugging suuuuuucks on microcontrollers.</span
            >
        </p>
        <p class="c1"><span class="c6">Device drivers drive devices.</span></p>
        <p class="c1"><span class="c6">Multitasking also.</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 246.67px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image43.png"
                    style="
                        width: 602px;
                        height: 246.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">Toyota&rsquo;s code sucks.</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 345.33px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image54.png"
                    style="
                        width: 602px;
                        height: 345.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1"><span class="c6">Watchdogs?</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 612.14px;
                    height: 985.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image30.png"
                    style="
                        width: 612.14px;
                        height: 985.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h1 class="c64" id="h.twn2jkhp93yd">
            <span class="c45">Actual useful stuff to know for the exam</span>
        </h1>
        <p class="c1">
            <span class="c6"
                >This is just a section for collection of information on
                frequent exam topics, from the past paper answers.</span
            >
        </p>
        <h3 class="c20" id="h.whae3pgef2l0"><span class="c13">RMS</span></h3>
        <p class="c1"><span class="c16">Rate-Monotonic Scheduling</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                >Priorities for tasks using RMS should always be assigned
                according to their </span
            ><span class="c19 c11">period.</span>
        </p>
        <p class="c1">
            <span class="c6"
                >The shortest period should have the highest priority, going up
                to the longest period having the lowest priority.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >If multiple tasks have the same period, it is okay for them to
                have the same priority.<br />Priorities are usually ordered
                starting with 0 for highest priority.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Example:</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 78px;
                    height: 139px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image39.png"
                    style="
                        width: 78px;
                        height: 139px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">0 &lt;- high priority</span></p>
        <p class="c1"><span class="c6">0</span></p>
        <p class="c1"><span class="c6">2</span></p>
        <p class="c1"><span class="c6">2</span></p>
        <p class="c1"><span class="c6">3</span></p>
        <p class="c1"><span>4 &lt;- low priority</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Schedulability Condition U:</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 203px;
                    height: 101px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image14.png"
                    style="
                        width: 407px;
                        height: 137px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span
                >From the list of tasks to be scheduled, it is the sum of each
                task&rsquo;s </span
            ><span class="c11">duration (c</span><span class="c14 c11">i</span
            ><span class="c11">) </span
            ><span>divided by that task&rsquo;s </span
            ><span class="c11">period (p</span><span class="c14 c11">i</span
            ><span class="c11">)</span><span class="c6">.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Example:</span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 184.35px;
                    height: 160.5px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image53.png"
                    style="
                        width: 184.35px;
                        height: 160.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6"
                >&nbsp;U = 0.2/1 + 0.2/1 + 4/20 + 4/20 + 10/100 + 6/300 =
                0.92</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >For tasks to be scheduled with RMS, U needs to be &lt;=
                1.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >In the example, it&rsquo;s 0.92, so this is schedulable.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >For all the deadlines to be guaranteed for the task set if RMS
                is used:</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 407px;
                    height: 102px;
                "
                ><img
                    alt=""
                    src="assets/computer-systems-ii/image14.png"
                    style="
                        width: 407px;
                        height: 137px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c1">
            <span class="c6">U needs to be &lt;= n(2^(1/n) - 1) </span>
        </p>
        <p class="c1">
            <span class="c6"
                >Where n is the total number of tasks to be scheduled.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">Using the example above with 6 tasks:</span>
        </p>
        <p class="c1">
            <span>6*(2^(1/6) - 1) ~= </span><span class="c71">0.73477</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >U = 0.92 from above, which is &gt; than 0.73&hellip;</span
            >
        </p>
        <p class="c1">
            <span class="c6">So the deadlines cannot be guaranteed.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >RMS can reach 100% utilization with harmonic task sets.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >To make a task set harmonic, each period needs to be a multiple
                of the lowest period.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >The alternative to RMS is using earliest deadline first
                (EDF).</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>Also note that the calculations do </span
            ><span class="c11">NOT</span
            ><span
                >&nbsp;take into account overhead: context switching or the
                external step detection interrupt.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">Advantages of RMS in real-time systems:</span>
        </p>
        <ul class="c0 lst-kix_rtzdpd8wumur-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Predictable behaviour</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >RMS is proven to be optimal among fixed priority
                    schemes</span
                >
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">Low overhead</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6"
                    >For low utilisation, RMS makes it easy to verify whether
                    all deadlines will be met</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Advantage of EDF over RMS:</span></p>
        <p class="c1">
            <span class="c6"
                >EDF can handle changing importance of tasks, accommodate new
                tasks at runtime, and handle variable execution times of
                tasks.</span
            >
        </p>
        <h3 class="c20" id="h.w6xw52gy3cre"><span class="c13">FAT FS</span></h3>
        <p class="c1">
            <span class="c6"
                >FAT is a file system which is commonly used with
                microcontrollers.</span
            >
        </p>
        <p class="c1">
            <span class="c6">It can be FAT16, FAT32&hellip;.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">It splits memory up into sectors.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >The first sector is always the Master Boot Record (MBR).</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>FAT can have </span><span class="c11">small </span
            ><span>or </span><span class="c11">large </span
            ><span class="c16">block sizes</span><span class="c6">.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">Small </span
            ><span class="c6"
                >block sizes means that there is more overhead in the FAT, as it
                has to reference every block used by each directory. Files are
                spread across more blocks, may slow down reading of file.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">Large</span
            ><span class="c6"
                >&nbsp;block sizes increase the chance for internal
                fragmentation, where blocks are much larger than the data space
                required leaving blank spaces in the blocks.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">Internal fragmentation</span
            ><span class="c6"
                >&nbsp;refers to the amount of space left over in a block at the
                end of a file. High amounts of this fragmentation is caused by
                large block sizes.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">External fragmentation</span
            ><span class="c6"
                >&nbsp;refers to when small block sizes are used, as blocks are
                more spread out.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">General Structure:</span></p>
        <ul class="c0 lst-kix_482z0u4fz0fz-0 start">
            <li class="c1 c3 li-bullet-0">
                <span class="c6">A Disk has many partitions</span>
            </li>
            <li class="c1 c3 li-bullet-0">
                <span class="c6">A Partition has many sectors</span>
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >The first sector in the Disk is the Master Boot Record
                (MBR).</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Then the first sector of a FAT partition contains the volume
                ID, also called volume boot record.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Volume ID contains: </span></p>
        <p class="c1">
            <span class="c6"
                >Name, Size of sectors and clusters, Sectors per file allocation
                table, Hidden sectors</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >The FAT partition then contains 2 FATs, the root directory,
                then files and directories.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >FAT stands for File Allocation Table (what FAT file systems are
                named after).</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >It serves as a free-list of all blocks on the device and at the
                same time it holds the block chain of every file in the file
                system.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >(This table contains entries of data clusters)</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >More than one copy of FAT due to if one becomes corrupted,
                second FAT can be used for redundancy.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >It allows us to get each cluster of a file (which spans
                multiple clusters) by following the cluster chain in the
                FAT.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">How to read FAT:</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span>FAT</span><span class="c14">start</span
            ><span>&nbsp;= LBA</span><span class="c14">start</span
            ><span class="c6">&nbsp;+ ReservedSectors * Bytes/Sector </span>
        </p>
        <p class="c1">
            <span>Root</span><span class="c14">start</span><span>&nbsp;= </span
            ><span>FAT</span><span class="c14">start</span
            ><span class="c6"
                >&nbsp;+ NumberOfFats * Sectors/FAT * Bytes/Sector
            </span>
        </p>
        <p class="c1">
            <span>Data</span><span class="c14">start</span
            ><span>&nbsp;= Root</span><span class="c14">start</span
            ><span class="c6">&nbsp;+ MaxRoots * 32 </span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6">When deleting something in FAT:</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >Directory entries are only changed in the first byte to mark
                files as deleted.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Still have the start cluster and length of each file</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >The FAT entries are wiped (marked as free clusters)</span
            >
        </p>
        <h3 class="c20" id="h.5ng8e3lgc44t">
            <span class="c13">RIOS and ISRs</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >RIOS scheduling uses reentrant interrupt service
                routines.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Reentrant means that an ISR can be safely interrupted (directly
                or indirectly) by itself.</span
            >
        </p>
        <p class="c1">
            <span class="c6"
                >Purpose is that it allows higher priority tasks to interrupt
                lower priority tasks.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >This is achieved by keeping static information in a global
                array and advancing the index of the array with the nesting
                depth.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span
                >Reentrant is a property of a function so that it can be safely
                called again before it is completed (e.g., recursion or </span
            ><span class="c16">ISR</span><span class="c6">).</span>
        </p>
        <p class="c1">
            <span
                >Self-preemption is related to scheduling. A preemptive
                scheduler is one which can take the CPU away from a task in
                order to give a new or another instance of the same task access
                to the CPU.</span
            >
        </p>
        <h3 class="c20" id="h.3b4ovbkk1ckb">
            <span class="c13">Memory Architecture</span>
        </h3>
        <p class="c1"><span class="c19 c11">Von Neumann</span></p>
        <p class="c1"><span class="c19 c11">Harvard</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c16">Difference</span
            ><span class="c6"
                >: Von Neumann, program memory and data memory are stored in the
                same place and share the same bus. Harvard, program memory and
                data memory are separated and use different buses.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c16">Harvard good for microcontrollers</span
            ><span class="c6"
                >: No shared bus so easier for instructions to be executed every
                clock cycle due to no contention. Data can&rsquo;t be
                accidentally executed. Program memory can&rsquo;t be
                accidentally overwritten. Cheaper and more efficient to use
                different storage types for program and data.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c16">How C deals with harvard</span
            ><span class="c6"
                >: C doesn&rsquo;t support different memory spaces. So compiler
                deals with this by adding big offset to different memory
                spaces.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <h3 class="c20" id="h.rg4aakzcoo2i">
            <span class="c13">LaFortuna Stuff</span>
        </h3>
        <p class="c1">
            <span class="c6"
                >After resetting, the clock needs time to stabilize.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c6"
                >When compiling, you need the correct clock frequency so
                periodic events are accurate to real time.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Ports: PINx, PORTx, DDRx</span></p>
        <p class="c1"><span class="c6">Where x is a port letter.</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">DDR </span
            ><span class="c6">(Data Direction Register)</span>
        </p>
        <p class="c1"><span class="c6">DDR = 0, input</span></p>
        <p class="c1"><span class="c6">DDR = 1, output</span></p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c19 c11">PORT</span></p>
        <p class="c1">
            <span class="c6"
                >Usually used with output pin in which it sets output to high or
                low.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c19 c11">PIN</span></p>
        <p class="c1">
            <span class="c6"
                >Sets state of internal pull-up resistors. PIN register is used
                to get the data from the pins set to inputs.</span
            >
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1">
            <span class="c11">sei();</span
            ><span class="c6">&nbsp;- Enables interrupts.</span>
        </p>
        <p class="c1">
            <span class="c11">cli(); </span
            ><span class="c6">- Disables all interrupts.</span>
        </p>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1"><span class="c6">Setting a bit (=1)</span></p>
        <ul class="c0 lst-kix_f26ok3ixoa0w-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c37">DDRB</span><span>&nbsp;</span
                ><span class="c63">|=</span><span>&nbsp;</span
                ><span class="c6 c57">_BV(PBx)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c37">Register name</span><span>&nbsp;</span
                ><span class="c63">Binary OR</span><span>&nbsp;</span
                ><span class="c57"
                    >Macro generates a byte with xth bit set to 1, otherwise
                    0</span
                >
            </li>
        </ul>
        <p class="c1"><span class="c6">Clearing a bit (=0)</span></p>
        <ul class="c0 lst-kix_f26ok3ixoa0w-1">
            <li class="c1 c5 li-bullet-0">
                <span class="c37">DDRB</span><span>&nbsp;</span
                ><span class="c48">&amp;=</span><span>&nbsp;</span
                ><span class="c6 c62">~_BV(PBx)</span>
            </li>
            <li class="c1 c5 li-bullet-0">
                <span class="c37">Register name</span><span>&nbsp;</span
                ><span class="c48">Binary AND</span><span>&nbsp;</span
                ><span class="c62"
                    >Macro generates a byte with xth bit set to 0, otherwise
                    1</span
                >
            </li>
        </ul>
        <p class="c1 c15"><span class="c6"></span></p>
        <p class="c1 c15"><span class="c6"></span></p>
    </body>
</html>
