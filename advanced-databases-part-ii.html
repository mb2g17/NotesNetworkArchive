<html>
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
        <link rel="stylesheet" href="css/advanced-databases-part-ii.css" />
        <link rel="stylesheet" href="css/page.css" />
    </head>
    <body class="c92">
        <div>
            <p class="c12">
                <span class="c34 c42"
                    ><a class="c9" href="index.html"
                        >Computer Science / Software Engineering Notes
                        Network</a
                    ></span
                >
            </p>
            <p class="c12">
                <span class="c34 c42"
                    ><a class="c9" href="advanced-databases-part-i.html"
                        >Advanced Database Notes Part 1</a
                    ></span
                >
            </p>
        </div>
        <p class="c86 c101 title" id="h.rxgh0p54p9bi">
            <span class="c8 c59">Advanced Databases Part 2</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 261.5px;
                    height: 189.86px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image52.png"
                    style="
                        width: 261.5px;
                        height: 189.86px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c86 c116 subtitle" id="h.gmb3eefrpucv">
            <span class="c8 c82 c98">Matthew Barnes</span>
        </p>
        <p class="c86 c96">
            <span class="c24 c6"
                ><a class="c9" href="#h.3t1nsxxk71np"
                    >Relational Algebra</a
                ></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.3t1nsxxk71np">2</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.2lbt955gft1f"
                    >Relational Transformations</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.2lbt955gft1f">5</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.l0hiecp14a6z"
                    >Relational Algebra and SQL</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.l0hiecp14a6z">6</a></span
            >
        </p>
        <p class="c86 c88">
            <span class="c24 c6"
                ><a class="c9" href="#h.486eyxq0r9p"
                    >Problems and Complexity in Databases</a
                ></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.486eyxq0r9p">7</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.1ali68ksqbrd"
                    >Relational calculus</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.1ali68ksqbrd">8</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.7yqh3pih0jg3"
                    >List all the airlines</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.7yqh3pih0jg3">9</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.js8cm53cgjh9"
                    >List the codes of the airports in London</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.js8cm53cgjh9">10</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.l23yydntxu1h"
                    >List the airlines that fly directly from London to
                    Glasgow</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.l23yydntxu1h">11</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.ujbxd9dp8mw">Active domain</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.ujbxd9dp8mw">11</a></span
            >
        </p>
        <p class="c88 c86">
            <span class="c24 c6"
                ><a class="c9" href="#h.53bezut1j07r"
                    >Conjunctive Query - Containment and Minimisation</a
                ></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.53bezut1j07r">12</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.vvmxb1hmz8x5"
                    >Conjunctive queries</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.vvmxb1hmz8x5">12</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.uryd9fsv0cf4"
                    >List all the airlines</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.uryd9fsv0cf4">13</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.ojwoz4vy4rua"
                    >List the codes of the airports</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.ojwoz4vy4rua">13</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.nil0ducszhpj"
                    >List the airlines that fly directly from London to
                    Glasgow</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.nil0ducszhpj">13</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.lgknhkuzmibi">Homomorphism</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.lgknhkuzmibi">14</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.fbmn937yyzso"
                    >Semantics of Conjunctive Queries</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.fbmn937yyzso">16</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.m0tm84eziyk0">CQ problems</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.m0tm84eziyk0">17</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.5vpvyubzstx2"
                    >Homomorphism Theorem</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.5vpvyubzstx2">18</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.awhrssi7kv7g">Minimisation</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.awhrssi7kv7g">21</a></span
            >
        </p>
        <p class="c88 c86">
            <span class="c24 c6"
                ><a class="c9" href="#h.mjbylyfzlbu">Query Processing</a></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.mjbylyfzlbu">23</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.75wonmsunkoz"
                    >Logical query plans</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.75wonmsunkoz">24</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.47pfd9yok2c9">Cost Estimation</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.47pfd9yok2c9">24</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.8tj025sdsqzi"
                    >Query Optimisation</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.8tj025sdsqzi">26</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.6m1icxg0w7lv"
                    >Physical query plans</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.6m1icxg0w7lv">29</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.4fyz0l52p1zo">Scanning</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.4fyz0l52p1zo">30</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.5mzvndl8ub5s"
                    >One-Pass Algorithms</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.5mzvndl8ub5s">30</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.yw0cyn8tbgso"
                    >Nested-Loop Joins</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.yw0cyn8tbgso">32</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.edjb7a7g677c"
                    >Two-Pass Algorithms</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.edjb7a7g677c">35</a></span
            >
        </p>
        <p class="c39">
            <span class="c8 c24"
                ><a class="c9" href="#h.z1pim3kq5wp6"
                    >Index-based Algorithms</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.z1pim3kq5wp6">36</a></span
            >
        </p>
        <p class="c88 c86">
            <span class="c24 c6"
                ><a class="c9" href="#h.rf06a65oif31">Data Integration</a></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.rf06a65oif31">37</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.kckd6zosxjx1">Query Rewriting</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.kckd6zosxjx1">38</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.5oi8hgw72iis">Global as View</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.5oi8hgw72iis">40</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.ewnu4rlsrpk4">Local as View</a></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.ewnu4rlsrpk4">40</a></span
            >
        </p>
        <p class="c39">
            <span class="c24 c8"
                ><a class="c9" href="#h.rqc7o1x5kln3"
                    >The Bucket Algorithm</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.rqc7o1x5kln3">42</a></span
            >
        </p>
        <p class="c88 c86">
            <span class="c24 c6"
                ><a class="c9" href="#h.rf06a65oif31"
                    >Ontology Based Data Integration</a
                ></span
            ><span class="c24 c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c6"
                ><a class="c9" href="#h.rf06a65oif31">44</a></span
            >
        </p>
        <p class="c35">
            <span class="c24 c8"
                ><a class="c9" href="#h.br3cpfjowi3h"
                    >Ontology-Based Query Answering (OBQA)</a
                ></span
            ><span class="c24 c8"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c24 c8"
                ><a class="c9" href="#h.br3cpfjowi3h">44</a></span
            >
        </p>
        <p class="c35">
            <span class="c82"
                ><a class="c9" href="#h.bd7dqahdoay">Universal Models</a></span
            ><span class="c82"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c82"><a class="c9" href="#h.bd7dqahdoay">44</a></span>
        </p>
        <p class="c80">
            <span class="c82"
                ><a class="c9" href="#h.yuzg5iwphvdg">The Chase</a></span
            ><span class="c82"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c82"
                ><a class="c9" href="#h.yuzg5iwphvdg">44</a></span
            >
        </p>
        <h1 class="c23" id="h.3t1nsxxk71np">
            <span class="c8 c40">Relational Algebra</span>
        </h1>
        <ul class="c7 lst-kix_q4coxc3xwb4d-0 start">
            <li class="c3 li-bullet-0">
                <span>A lot of the stuff in here just crosses over with </span
                ><span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://docs.google.com/document/d/1QbzdrEdHI0rAUaiDWb-1DdvvDgpFhm3nLKCJl06iuco/edit%23bookmark%3Did.62zqkftff96s&amp;sa=D&amp;source=editors&amp;ust=1623780154334000&amp;usg=AOvVaw3JrUlB7RLAtI0Xn3Oo6gCO"
                        >Data Management</a
                    ></span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >To uphold brevity, I&rsquo;m only going to note the stuff
                    that is new and can&rsquo;t be found in Data
                    Management.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you want a full refresher, read up on Data
                    Management&rsquo;s topics:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_q4coxc3xwb4d-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >&ldquo;Relational Model &gt; Relational Algebra&rdquo;
                    and</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >&ldquo;Data languages &gt; Relational Algebra vs
                    SQL&rdquo;</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >&ldquo;Database Systems &gt; Modelling and SQL basics &gt;
                    Joins&rdquo;</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_q4coxc3xwb4d-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >... and then come back. If you already know all that stuff,
                    read ahead!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_q4coxc3xwb4d-0">
            <li class="c3 li-bullet-0">
                <span class="c34">Just quickly</span
                ><span class="c5 c8"
                    >: relations are subsets of cartesian products of sets, and
                    records are represented as tuples.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Properties of relations:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_1ypbwn2xsllr-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Each row represents a k-tuple of R</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The values of an attribute are all from the same
                    domain</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Each attribute of each tuple in a relation contains a
                    single atomic value</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>The ordering of rows is immaterial </span
                ><span class="c8 c61 c36"
                    >(relations are just sets, so row order doesn&rsquo;t
                    matter)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>All rows are distinct </span
                ><span class="c8 c61 c36"
                    >(relations are sets, so there can be no duplicates)</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_r7hps454isd7-0 start">
            <li class="c3 li-bullet-0">
                <span>Now, relations can come in two flavours: </span
                ><span class="c22 c10">named perspective</span><span>, or </span
                ><span class="c49 c10">unnamed perspective</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Extra properties of </span
                ><span class="c22">named perspective</span
                ><span class="c5 c8">:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_kdid1b7mwgq5-0 start" start="6">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Each column is identified by its name</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The ordering of the attributes (columns) do not
                    matter</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_r7hps454isd7-0">
            <li class="c3 li-bullet-0">
                <span>Extra properties of </span
                ><span class="c49">unnamed perspective</span
                ><span class="c5 c8">:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_vnfda449sl0v-0 start" start="6">
            <li class="c13 li-bullet-0">
                <span>The ordering of the attributes matter </span
                ><span class="c8 c61 c36"
                    >(so we can reference attributes by order, not by
                    name)</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_laq9get4ucaj-0 start">
            <li class="c3 li-bullet-0">
                <span>For an easy way to remember, just think like this: </span
                ><span class="c45">named</span><span>&nbsp;perspective </span
                ><span class="c45">names</span
                ><span class="c5 c8"
                    >&nbsp;the columns; unnamed perspective does not so it has
                    to use order.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_laq9get4ucaj-0">
            <li class="c3 li-bullet-0">
                <span>There are k-ary relation schemas, that look like </span
                ><span class="c2">R(A</span><span class="c2 c4">1</span
                ><span class="c2">,A</span><span class="c2 c4">2</span
                ><span class="c2">,A</span><span class="c2 c4">3</span
                ><span class="c2">, ... A</span><span class="c2 c4">K</span
                ><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_laq9get4ucaj-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">R</span
                ><span class="c5 c8">&nbsp;is the relation name</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">A</span><span class="c2 c4">i</span
                ><span class="c5 c8">&nbsp;are names of attributes</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_laq9get4ucaj-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In a DBMS, they give types to the attributes too, like int
                    or string.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >There are also relational database schemas that look like </span
                ><span class="c2">R</span><span class="c2 c4">i</span
                ><span class="c2">(A</span><span class="c2 c4">1</span
                ><span class="c2">, A</span><span class="c2 c4">2</span
                ><span class="c2">, A</span><span class="c2 c4">3</span
                ><span class="c2">&nbsp;... A</span><span class="c2 c4">k</span
                ><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_laq9get4ucaj-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">R</span><span class="c2 c4">i</span
                ><span class="c5 c8">&nbsp;are the names of the relations</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">A</span><span class="c2 c4">i</span
                ><span>&nbsp;are names of attributes in </span
                ><span class="c2">R</span><span class="c2 c4 c5">i</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Notice now it&rsquo;s </span><span class="c2">R</span
                ><span class="c2 c4">i</span><span>&nbsp;and not </span
                ><span class="c2">R</span
                ><span class="c5 c8"
                    >. That means there&rsquo;s multiple relation schemas,
                    because it&rsquo;s a relational database schema!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_laq9get4ucaj-0">
            <li class="c3 li-bullet-0">
                <span>These schemas can be </span
                ><span class="c10">instantiated</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Instantiated </span
                ><span class="c32 c56">relation schemas</span
                ><span>&nbsp;and </span
                ><span class="c84 c20">relational database schemas</span
                ><span>&nbsp;are called </span
                ><span class="c32 c56">relations</span><span>&nbsp;and </span
                ><span class="c20 c84">databases</span
                ><span class="c5 c8">, respectively.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>These concepts have names: </span
                ><span class="c10">intension</span><span>&nbsp;and </span
                ><span class="c10">extension</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <a id="t.a21796b789e2795eac7675a36cbc4c2bee7f3adf"></a><a id="t.0"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c18" colspan="1" rowspan="1">
                        <p class="c47"><span class="c5 c6">Intension</span></p>
                    </td>
                    <td class="c18" colspan="1" rowspan="1">
                        <p class="c47"><span class="c5 c6">Extension</span></p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c38 c56" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c51 c8 c32">Relation Schema</span>
                        </p>
                    </td>
                    <td class="c38 c56" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c51 c8 c32"
                                >Instance of a relation schema (Relation)</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c38 c20" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c51 c8 c84"
                                >Relational Database Schema</span
                            >
                        </p>
                    </td>
                    <td class="c20 c38" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c51 c8 c84"
                                >Relational Database Instance (Database)</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Intensions (schemas) do not change very much because
                    they&rsquo;re like the blueprints; unless you&rsquo;re
                    changing the business model, there&rsquo;s no need to edit
                    it.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Extensions (instantiations) are very dynamic because
                    that&rsquo;s the actual data; millions of inserts and
                    deletes are happening every second.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In relational algebra, we can use $ to distinguish
                    positions, for example in the relation R(A, B, C) then $1 is
                    A, $2 is B and $3 is C.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Relational Algebra operators come in groups.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c10">Group 1</span><span>: </span
                ><span class="c8 c61 c36"
                    >(three binary operations from set theory)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0"><span class="c5 c8">Union</span></li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Difference</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Cartesian Product</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Group 2</span><span>: </span
                ><span class="c8 c61 c36"
                    >(two unary operations on relations)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Projection</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Selection</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Depending on the variant </span
                ><span class="c5 c8">of relational algebra we might need:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Renaming operator</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s also an operator for assigning names to
                    intermediary operations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This can abstract huge operations using names.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>These abstractions are called </span
                ><span class="c10">views</span><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">It looks like this: &larr; </span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here&rsquo;s an example:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">&pi;</span
                ><span class="c2 c4">fname,lname</span
                ><span class="c2">(&sigma;</span
                ><span class="c2 c4">salary&gt;&pound;40,000</span
                ><span class="c5 c2 c11">(Staff))</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s the same operation but broken down:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2"
                    >ExpensiveStaff
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&larr;
                    &sigma;</span
                ><span class="c2 c4">salary&gt;&pound;40,000</span
                ><span class="c5 c2 c11">(Staff)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2"
                    >Result
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&larr;
                    &pi;</span
                ><span class="c2 c4">fname,lname</span
                ><span class="c5 c2 c11">(ExpensiveStaff)</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Rules for operators:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">Union</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-2 start">
            <li class="c25 li-bullet-0">
                <span>&#9989; Commutativity: </span><span class="c2 c22">R</span
                ><span class="c2">&nbsp;&#8899; </span><span class="c1">S</span
                ><span class="c2">&nbsp;</span><span class="c43 c10">=</span
                ><span class="c2">&nbsp;</span><span class="c1">S</span
                ><span class="c2">&nbsp;&#8899; </span
                ><span class="c51 c2 c22 c11">R</span>
            </li>
            <li class="c25 li-bullet-0">
                <span>&#9989; Associativity: </span><span class="c2 c22">R</span
                ><span class="c2">&nbsp;&#8899; (</span
                ><span class="c2 c14">S</span
                ><span class="c2 c20">&nbsp;&#8899; </span
                ><span class="c2 c32 c20">T</span><span class="c2">) </span
                ><span class="c43 c10">=</span><span class="c2">&nbsp;(</span
                ><span class="c2 c57 c20">R</span
                ><span class="c2 c20">&nbsp;&#8899; </span
                ><span class="c2 c14">S</span><span class="c2">) &#8899; </span
                ><span class="c0">T</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Difference</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-2 start">
            <li class="c25 li-bullet-0">
                <span>&#10060; Commutativity: </span
                ><span class="c2 c22">R</span><span class="c2">&nbsp;- </span
                ><span class="c1">S</span><span class="c2">&nbsp;</span
                ><span class="c43 c10">&ne;</span><span class="c2">&nbsp;</span
                ><span class="c1">S</span><span class="c2">&nbsp;- </span
                ><span class="c2 c22">R</span>
            </li>
            <li class="c25 li-bullet-0">
                <span>&#10060; Associativity: </span
                ><span class="c2 c22">R</span><span class="c2">&nbsp;- (</span
                ><span class="c2 c14">S</span
                ><span class="c2 c20">&nbsp;- </span
                ><span class="c2 c32 c20">T</span><span class="c2">) </span
                ><span class="c43 c10">&ne;</span><span class="c2">&nbsp;(</span
                ><span class="c2 c57 c20">R</span
                ><span class="c2 c20">&nbsp;- </span
                ><span class="c2 c14">S</span><span class="c2">) - </span
                ><span class="c0">T</span><span>&nbsp;(</span
                ><span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://proofwiki.org/wiki/Set_Difference_is_not_Associative&amp;sa=D&amp;source=editors&amp;ust=1623780154360000&amp;usg=AOvVaw3C8qcnyqoyJ71QxrwPLEGV"
                        >proof</a
                    ></span
                ><span>)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Cartesian Product</span
                ><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-2 start">
            <li class="c25 li-bullet-0">
                <span>&#10060; Commutativity: </span
                ><span class="c2 c22">R</span
                ><span class="c2">&nbsp;&#10761; </span><span class="c1">S</span
                ><span class="c2">&nbsp;&ne; </span><span class="c1">S</span
                ><span class="c2">&nbsp;&#10761; </span
                ><span class="c2 c22">R</span>
            </li>
            <li class="c25 li-bullet-0">
                <span>&#9989; Associativity: </span><span class="c2 c22">R</span
                ><span class="c2">&nbsp;&#10761; (</span
                ><span class="c2 c14">S</span
                ><span class="c2 c20">&nbsp;&#10761; </span
                ><span class="c2 c32 c20">T</span><span class="c2">) </span
                ><span class="c43 c10">=</span><span class="c2">&nbsp;(</span
                ><span class="c2 c57 c20">R</span
                ><span class="c2 c20">&nbsp;&#10761; </span
                ><span class="c2 c14">S</span><span class="c2">) &#10761; </span
                ><span class="c0">T</span>
            </li>
            <li class="c25 li-bullet-0">
                <span>&#9989; Distributivity: </span
                ><span class="c2 c22">R</span
                ><span class="c2">&nbsp;&#10761; (</span
                ><span class="c2 c14">S</span
                ><span class="c2 c20">&nbsp;&#8899; </span
                ><span class="c2 c32 c20">T</span><span class="c2">) </span
                ><span class="c43 c10">=</span><span class="c2">&nbsp;(</span
                ><span class="c2 c57 c20">R</span
                ><span class="c2 c20">&nbsp;&#10761; </span
                ><span class="c2 c14">S</span><span class="c2">) &#8899; (</span
                ><span class="c2 c57 c20">R</span
                ><span class="c2 c20">&nbsp;&#10761; </span
                ><span class="c2 c32 c20">T</span
                ><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Selection</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-2 start">
            <li class="c25 li-bullet-0">
                <span>&#9989; Commutativity: </span
                ><span class="c2 c22">&sigma;</span
                ><span class="c2 c22 c4">&Theta;1</span><span class="c2">(</span
                ><span class="c1">&sigma;</span
                ><span class="c1 c4">&Theta;2</span><span class="c2">(R)) </span
                ><span class="c43 c10">=</span><span class="c2">&nbsp;</span
                ><span class="c1">&sigma;</span
                ><span class="c1 c4">&Theta;2</span><span class="c2">(</span
                ><span class="c2 c22">&sigma;</span
                ><span class="c2 c22 c4">&Theta;1</span
                ><span class="c5 c2 c11">(R))</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2 c22">&sigma;</span
                ><span class="c2 c22 c4">&Theta;1</span><span class="c2">(</span
                ><span class="c1">&sigma;</span
                ><span class="c1 c4">&Theta;2</span><span class="c2">(R)) </span
                ><span class="c43 c10">=</span
                ><span class="c2">&nbsp;&sigma;</span
                ><span class="c2 c22 c4">&Theta;1</span
                ><span class="c2 c4">&#8896;</span
                ><span class="c1 c4">&Theta;2</span
                ><span class="c5 c2 c11">(R)</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2">&sigma;</span><span class="c2 c4">&Theta;</span
                ><span class="c2">(R &#10761; S) </span
                ><span class="c10 c43">=</span
                ><span class="c2">&nbsp;&sigma;</span
                ><span class="c2 c4">&Theta;</span
                ><span class="c2">(R) &#10761; S </span
                ><span class="c36"
                    >(if &Theta; mentions only attributes in R)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >These rules can be used in query processing and
                    optimisation.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can derive the intersection operation using
                    difference:</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">R &cap; S </span><span class="c43 c10">=</span
                ><span class="c2">&nbsp;R &ndash; (R &ndash; S) </span
                ><span class="c43 c10">=</span
                ><span class="c5 c2 c11">&nbsp;S &ndash; (S &ndash; R)</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s some symbols for operations you already
                    knew:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Left outer join:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 102px;
                    height: 32.81px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image33.png"
                    style="
                        width: 102px;
                        height: 32.81px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Right outer join:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 110.34px;
                    height: 43.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image34.png"
                    style="
                        width: 376.06px;
                        height: 43.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_x6rq7lh3ipve-1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Full outer join:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 110.27px;
                    height: 42.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image61.png"
                    style="
                        width: 445.52px;
                        height: 42.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_z3mztkvpwlu8-0 start">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">semijoin </span
                ><span class="c5 c8"
                    >finds the records of the first relation that are within the
                    join of the first and second relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Alright, that&rsquo;s a weird sentence to read, but once
                    you look at this example it&rsquo;ll make sense:</span
                >
            </li>
        </ul>
        <a id="t.1c6fe892009a5c9b0fa9e6decf89d0243ac93c68"></a><a id="t.1"></a>
        <table class="c26">
            <tbody>
                <tr class="c60">
                    <td class="c50" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.509b4dd36a249cb2af50e40e57f37eb042155692"></a
                        ><a id="t.2"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c79" colspan="2" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6"
                                                >Characters</span
                                            >
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c78 c97" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Character</span>
                                        </p>
                                    </td>
                                    <td class="c78 c97" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Stand ID</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Jotaro Kujo</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">1</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Polnareff</span>
                                        </p>
                                    </td>
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">2</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Jonathan Joestar</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">null</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Gyro Zeppeli</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c78" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">4</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c106" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.9218eedf8cbfd83d69022f7c1d8ce3c85b7fd245"></a
                        ><a id="t.3"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td
                                        class="c97 c118"
                                        colspan="2"
                                        rowspan="1"
                                    >
                                        <p class="c47">
                                            <span class="c5 c6">Stands</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c87" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Stand ID</span>
                                        </p>
                                    </td>
                                    <td class="c27" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Stand</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c89" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">1</span>
                                        </p>
                                    </td>
                                    <td class="c90" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Star Platinum</span
                                            >
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c89" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">2</span>
                                        </p>
                                    </td>
                                    <td class="c90" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Silver Chariot</span
                                            >
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c89" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">3</span>
                                        </p>
                                    </td>
                                    <td class="c90" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">The World</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c104" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.911a5da7da11c23512268f8fd1f9381cfeb958a5"></a
                        ><a id="t.4"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td
                                        class="c97 c117"
                                        colspan="2"
                                        rowspan="1"
                                    >
                                        <p class="c47">
                                            <span class="c5 c6">Semijoin</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td
                                        class="c112 c97"
                                        colspan="1"
                                        rowspan="1"
                                    >
                                        <p class="c17">
                                            <span class="c5 c8">Character</span>
                                        </p>
                                    </td>
                                    <td class="c27" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Stand ID</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c112" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8"
                                                >Jotaro Kujo</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c90" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">1</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c112" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Polnareff</span>
                                        </p>
                                    </td>
                                    <td class="c90" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">2</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul class="c7 lst-kix_fzldr5agj4wf-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here, the only records that come from the semijoin are
                    Jotaro and Polnareff because they&rsquo;re the only ones in
                    the relation that have recorded stands.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If this were a join, Jotaro would&rsquo;ve been paired up
                    with Star Platinum and Polnareff would&rsquo;ve been paired
                    up with Silver Chariot. Since Jotaro and Polnareff
                    would&rsquo;ve been in that join, they alone (and not their
                    stands) are returned in the resulting semijoin
                    relation.</span
                >
            </li>
        </ul>
        <a id="id.pxdxomojflt6"></a>
        <ul class="c7 lst-kix_fzldr5agj4wf-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">A semijoin is defined like this:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 429.5px;
                    height: 48.46px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image35.png"
                    style="
                        width: 429.5px;
                        height: 48.46px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.2lbt955gft1f">
            <span class="c64 c8">Relational Transformations</span>
        </h2>
        <ul class="c7 lst-kix_2r0cnsloodec-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here are a bunch of transformations you can do in
                    relational algebra:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_2r0cnsloodec-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Conjunctive selections can cascade into individual
                    selections</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 361px;
                    height: 34.66px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image19.png"
                    style="
                        width: 361px;
                        height: 34.66px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_hp8qy8gd52vg-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Only the last in a sequence of projections is
                    required</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 373px;
                    height: 35.7px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image24.png"
                    style="
                        width: 373px;
                        height: 35.7px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_ph0cagdqt875-0 start">
            <li class="c13 li-bullet-0">
                <span>Selection and projection are commutative </span
                ><span class="c8 c61 c36"
                    >(only if selection attributes are projected)</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 436.72px;
                    height: 32.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image6.png"
                    style="
                        width: 436.72px;
                        height: 32.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v2dpquqotm9-0 start">
            <li class="c13 li-bullet-0">
                <span>Cartesian product and theta join are commutative </span
                ><span class="c36">(only with </span
                ><span class="c36 c10">named perspective</span
                ><span class="c8 c61 c36">)</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 284.5px;
                    height: 38.67px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image57.png"
                    style="
                        width: 284.5px;
                        height: 38.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 265.04px;
                    height: 33.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image60.png"
                    style="
                        width: 265.04px;
                        height: 33.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_qhi3xeeylnb1-0 start">
            <li class="c13 li-bullet-0">
                <span>Selection distributes over theta join </span
                ><span class="c8 c61 c36"
                    >(if predicate only involves attributes being joined)</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 415.46px;
                    height: 36.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image30.png"
                    style="
                        width: 415.46px;
                        height: 36.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 406px;
                    height: 38.94px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image17.png"
                    style="
                        width: 406px;
                        height: 38.94px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_cy2ltp37bexj-0 start">
            <li class="c13 li-bullet-0">
                <span>Projection distributed over theta join </span
                ><span class="c8 c61 c36"
                    >(if relations have attributes that are being projected, and
                    join condition only uses those attributes)</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 510.5px;
                    height: 34.77px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image37.png"
                    style="
                        width: 510.5px;
                        height: 34.77px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 556.5px;
                    height: 26.81px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image40.png"
                    style="
                        width: 556.5px;
                        height: 26.81px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_fderebt6txf7-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Selection distributes over set operations</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 368.5px;
                    height: 35.55px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image14.png"
                    style="
                        width: 368.5px;
                        height: 35.55px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 357px;
                    height: 34.6px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image58.png"
                    style="
                        width: 357px;
                        height: 34.6px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 372.5px;
                    height: 35.24px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image36.png"
                    style="
                        width: 372.5px;
                        height: 35.24px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v8357bg85c32-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Projection distributes over set union</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 382.5px;
                    height: 33.75px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image63.png"
                    style="
                        width: 382.5px;
                        height: 33.75px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_azek7uvmeieo-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Associativity of theta join and cartesian product</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 417px;
                    height: 36.94px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image50.png"
                    style="
                        width: 417px;
                        height: 36.94px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 405px;
                    height: 36.08px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image15.png"
                    style="
                        width: 405px;
                        height: 36.08px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_uz1ukvti46q-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Associativity of set union and intersection</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 380.5px;
                    height: 35.36px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image13.png"
                    style="
                        width: 380.5px;
                        height: 35.36px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 389.5px;
                    height: 36.58px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image48.png"
                    style="
                        width: 389.5px;
                        height: 36.58px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.l0hiecp14a6z">
            <span class="c64 c8">Relational Algebra and SQL</span>
        </h2>
        <ul class="c7 lst-kix_7e9ls09klyai-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This topic draws parallels between relational algebra and
                    SQL.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It talks about self-joins, aliases, multisets etc.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Again, if you don&rsquo;t remember, refer to the </span
                ><span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://docs.google.com/document/d/1QbzdrEdHI0rAUaiDWb-1DdvvDgpFhm3nLKCJl06iuco/edit%23bookmark%3Did.juz518jlojof&amp;sa=D&amp;source=editors&amp;ust=1623780154398000&amp;usg=AOvVaw1IDZuhQEqaakKWKZrz_vPa"
                        >Data Management Notes</a
                    ></span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <h1 class="c23" id="h.486eyxq0r9p">
            <span class="c40 c8">Problems and Complexity in Databases</span>
        </h1>
        <ul class="c7 lst-kix_c20ojoyvj3xw-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >To gauge how efficient our database operations are, we need
                    to calculate their complexities.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>We can use complexity theory for this </span
                ><span class="c8 c61 c36">(you know, Big O and stuff)</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k1kth63zjj0h-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In this chapter we will tackle two problems:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1 start">
            <li class="c13 li-bullet-0">
                <span class="c22 c10">Query Output Tuple </span
                ><span class="c51 c8 c22">(QOT)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-2 start">
            <li class="c25 li-bullet-0">
                <span class="c34">Formally</span><span>: Given a database </span
                ><span class="c2 c32">D</span><span>, a query </span
                ><span class="c2 c57">Q</span><span>&nbsp;in </span
                ><span class="c10">L</span
                ><span>, and a tuple of constants </span
                ><span class="c10">t</span><span>, is </span
                ><span class="c43 c10">t</span
                ><img src="assets/advanced-databases-part-ii/image1.png" /><span
                    class="c2 c57"
                    >Q</span
                ><span class="c2">(</span><span class="c2 c32">D</span
                ><span class="c5 c2 c11">)?</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Informally</span
                ><span class="c5 c8"
                    >: Let&rsquo;s say I give you a record from a database, and
                    a query acting upon that database. If I got the output of
                    that query, would the given record be in that output?</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Example</span
                ><span>: Say our database is </span
                ><span class="c2"
                    >{(&lsquo;a&rsquo;, 1), (&lsquo;b&rsquo;, 2)}</span
                ><span>, your given record is </span
                ><span class="c2">(&lsquo;a&rsquo;, 1)</span
                ><span>&nbsp;and the query is </span
                ><span class="c2"
                    >SELECT * FROM database WHERE $1 = &lsquo;a&rsquo;</span
                ><span
                    >. The answer to this QOT problem would be true, because we
                    would get our record </span
                ><span class="c2">(&lsquo;a&rsquo;, 1)</span
                ><span>&nbsp;in that query.</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1">
            <li class="c13 li-bullet-0">
                <span class="c49 c10">Boolean Query Evaluation </span
                ><span class="c51 c8 c49">(BQE)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-2 start">
            <li class="c25 li-bullet-0">
                <span class="c34">Formally</span><span>: Given a database </span
                ><span class="c2 c32">D</span><span>, a query </span
                ><span class="c2 c57">Q</span><span>&nbsp;in </span
                ><span class="c10">L</span
                ><span>, and a tuple of constants </span
                ><span class="c43 c10">t</span><span>, is </span
                ><span class="c2 c57">Q</span><span class="c2">(</span
                ><span class="c2 c32">D</span
                ><span class="c2">) &ne; &Oslash;</span
                ><span class="c5 c8">?</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Informally</span
                ><span class="c5 c8"
                    >: Let&rsquo;s say you have a database and a query acting on
                    that database. If you got the output of that query, would it
                    have any tuples?</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Example</span
                ><span>: Say our database is </span
                ><span class="c2"
                    >{(&lsquo;a&rsquo;, 1), (&lsquo;b&rsquo;, 2)}</span
                ><span>, and the query is </span
                ><span class="c2">SELECT * FROM database WHERE $2 = 3</span
                ><span class="c5 c8"
                    >. The answer to this BQE problem would be false, because
                    there are no tuples (records) where the second element is
                    3.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-0">
            <li class="c3 li-bullet-0">
                <span>There is a theorem that states </span
                ><span class="c2 c22">QOT</span
                ><span class="c2">(RA) &equiv;</span><span class="c2 c4">L</span
                ><span class="c2">&nbsp;</span><span class="c1">BQE</span
                ><span class="c5 c2 c11">(RA)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1 start">
            <li class="c13 li-bullet-0">
                <span>(</span><span class="c2">&equiv;</span
                ><span class="c2 c4">L</span
                ><span>&nbsp;means logspace-equivalent)</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k1kth63zjj0h-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s three ways to measure complexity in
                    databases:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">Combined complexity</span><span>: both </span
                ><span class="c32">D</span><span>&nbsp;and </span
                ><span class="c57">Q</span
                ><span>&nbsp;are part of the input </span
                ><span class="c8 c61 c36"
                    >(you&rsquo;re checking the complexity of both)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10">Query complexity</span><span>: fixed </span
                ><span class="c32">D</span><span>, input </span
                ><span class="c57">Q</span><span>&nbsp;</span
                ><span class="c8 c61 c36"
                    >(you&rsquo;re only checking the complexity of the
                    query)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10">Data complexity</span><span>: input </span
                ><span class="c32">D</span><span>, fixed </span
                ><span class="c57">Q</span><span>&nbsp;</span
                ><span class="c8 c61 c36"
                    >(you&rsquo;re only checking the complexity of the
                    database)</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k1kth63zjj0h-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >BQE is PSPACE-complete with combined complexity</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >BQE is PSPACE-complete when database is fixed (query
                    complexity)</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >BQE is LOGSPACE when query is fixed (data complexity)</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >When a problem is LOGSPACE, it is polynomial time as well
                    because there&rsquo;s a polynomial number of
                    configurations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So why are the BQE and QOT problems so easy when the query
                    is fixed, but not when the database is fixed?</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The complexities of these problems are actually
                    exponential.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >But the size of the query is the exponent (the small number
                    on top; the power)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >So if the size of the query is fixed, the complexity
                    changes to polynomial.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k1kth63zjj0h-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There are some more problems that relate to
                    databases:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">Satisfiability </span
                ><span class="c5 c8">(SAT)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-2 start">
            <li class="c25 li-bullet-0">
                <span class="c34">Formally</span><span>: Given a query </span
                ><span class="c2 c57">Q</span
                ><span>, is there a finite database </span
                ><span class="c2 c32">D</span><span>&nbsp;such that </span
                ><span class="c2 c57">Q</span><span class="c2">(</span
                ><span class="c2 c32">D</span
                ><span class="c2">) &ne; &Oslash;</span
                ><span class="c5 c8">?</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Informally</span
                ><span class="c5 c8"
                    >: If you have a query, is it possible to find a database
                    where this query&rsquo;s output will not be empty?</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >If the answer is no, then the query makes no sense and can
                    trivially be calculated as empty.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Equivalence </span
                ><span class="c5 c8">(EQUIV)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-2 start">
            <li class="c25 li-bullet-0">
                <span class="c34">Formally</span
                ><span>: Given two queries </span><span class="c2 c57">Q</span
                ><span class="c4 c57">1</span><span>&nbsp;and </span
                ><span class="c2 c57">Q</span><span class="c4 c57">2</span
                ><span>, </span><span class="c2 c57">Q</span
                ><span class="c2 c4 c57">1</span><span class="c2">(</span
                ><span class="c2 c32">D</span><span class="c2">) &equiv; </span
                ><span class="c2 c57">Q</span><span class="c2 c4 c57">2</span
                ><span class="c2">(</span><span class="c2 c32">D</span
                ><span class="c2">)</span
                ><span>? (for every finite database </span
                ><span class="c2 c32">D</span><span>)</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Informally</span
                ><span class="c5 c8"
                    >: If you have two queries, are their outputs exactly the
                    same for every database?</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >If the answer is yes, then we can simply use the query that
                    is the easiest to calculate, even if it&rsquo;s
                    syntactically a different query than the one we got.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Containment </span
                ><span class="c5 c8">(CONT)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k1kth63zjj0h-2 start">
            <li class="c25 li-bullet-0">
                <span class="c34">Formally</span
                ><span>: Given two queries </span><span class="c2 c57">Q</span
                ><span class="c4 c57">1</span><span>&nbsp;and </span
                ><span class="c2 c57">Q</span><span class="c4 c57">2</span
                ><span>, </span><span class="c2 c57">Q</span
                ><span class="c2 c4 c57">1</span><span class="c2">(</span
                ><span class="c2 c32">D</span><span class="c2">) &sube; </span
                ><span class="c2 c57">Q</span><span class="c2 c4 c57">2</span
                ><span class="c2">(</span><span class="c2 c32">D</span
                ><span class="c2">)</span
                ><span>? (for every finite database </span
                ><span class="c2 c32">D</span><span class="c5 c8">)</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c34">Informally</span
                ><span class="c5 c8"
                    >: Given two queries, can all the outputs of the first query
                    be found in the outputs in the second query for all
                    databases?</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >If the answer is yes, we can approximate a query by picking
                    the other query that is a subset.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >This sacrifices completeness with complexity.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k1kth63zjj0h-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >They&rsquo;re all undecidable, unfortunately...</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">... for relational algebra, that is!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s other relational query languages, such as
                    relational calculus.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Sublanguages of relational algebra can also make these
                    problems decidable, like only having select, project and
                    equijoin (like our SJDB coursework).</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >But for now we&rsquo;ll look at relational calculus.</span
                >
            </li>
        </ul>
        <h2 class="c52" id="h.1ali68ksqbrd">
            <span class="c64 c8">Relational calculus</span>
        </h2>
        <ul class="c7 lst-kix_6ibkhamnlcbo-0 start">
            <li class="c3 li-bullet-0">
                <span
                    >Here&rsquo;s a thought: if relations are just sets, and
                    queries return relations as output, why can&rsquo;t we use
                    set comprehension as queries?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c10">Relational calculus</span
                ><span class="c5 c8"
                    >&nbsp;is like that: it&rsquo;s very similar to set
                    comprehension in set theory.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Or, if you&rsquo;ve ever done list comprehension or set
                    comprehension in Python, it&rsquo;s like that.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">The syntax is like this:</span>
            </li>
        </ul>
        <p class="c12">
            <span class="c2 c31">{x</span><span class="c2 c4 c31">1</span
            ><span class="c2 c31">, ..., x</span><span class="c2 c4 c31">k</span
            ><span class="c107 c2 c31 c11">&nbsp;| &phi;}</span>
        </p>
        <ul class="c7 lst-kix_5lmuq2v6ey86-0 start">
            <li class="c3 li-bullet-0"><span class="c5 c8">Where:</span></li>
        </ul>
        <ul class="c7 lst-kix_5lmuq2v6ey86-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">x</span><span class="c2 c4">1</span
                ><span class="c2">, ... x</span><span class="c2 c4">k</span
                ><span class="c5 c8"
                    >&nbsp;are the values in our output tuples</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">&phi;</span
                ><span class="c5 c8"
                    >&nbsp;is a formula that our values abide by</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_5lmuq2v6ey86-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Makes no sense? Don&rsquo;t worry, these examples will
                    clear things up.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s a database we&rsquo;re going to work
                    with:</span
                >
            </li>
        </ul>
        <a id="t.1de5980dc9e74fb14b5a423825be7a72578b07ee"></a><a id="t.5"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.76274854115fc11125ff7ad36ef5e33097f595b7"></a
                        ><a id="t.6"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="3" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Flight</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Origin</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6"
                                                >Destination</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Airline</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">BA</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">U2</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">OS</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.c29508bb5e7f04794c60f534ae4eb40fd9a9da6c"></a
                        ><a id="t.7"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="2" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Airport</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Code</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">City</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Vienna</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Larnaca</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Glasgow</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">EDI</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Edinburgh</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul class="c7 lst-kix_765pvda84di1-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you don&rsquo;t know what a plane is, these tables
                    represent flights that are going on in different airports.
                    Different airlines offer different flights between
                    airports.</span
                >
            </li>
            <li class="c3 li-bullet-0"><span>&#9992;&#65039;</span></li>
        </ul>
        <h3 class="c73" id="h.7yqh3pih0jg3">
            <span class="c8 c66 c37">List all the airlines</span>
        </h3>
        <a id="t.1de5980dc9e74fb14b5a423825be7a72578b07ee"></a><a id="t.8"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.76274854115fc11125ff7ad36ef5e33097f595b7"></a
                        ><a id="t.9"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="3" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Flight</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Origin</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6"
                                                >Destination</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Airline</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c16 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">BA</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c16 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">U2</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">OS</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.c29508bb5e7f04794c60f534ae4eb40fd9a9da6c"></a
                        ><a id="t.10"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="2" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Airport</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Code</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">City</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Vienna</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Larnaca</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Glasgow</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">EDI</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Edinburgh</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul class="c7 lst-kix_fyut19gtd4t8-0 start">
            <li class="c3 li-bullet-0">
                <span class="c34">Query</span><span>: </span
                ><span class="c5 c2 c11"
                    >{z | &exist;x&exist;y Flight(x,y,z)}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">English, please:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Let&rsquo;s break this down.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>The bit on the left of the bar, </span
                ><span class="c2">{</span><span class="c0">z</span
                ><span class="c2">&nbsp;| &exist;x&exist;y Flight(x,y,z)}</span
                ><span class="c5 c8"
                    >, is what we want in our output. It is defined by the part
                    to the right of the bar. Basically, we want our output to be
                    a set of all the different values z could be.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>The bit on the right of the bar, </span
                ><span class="c2">{</span><span class="c2">z</span
                ><span class="c2">&nbsp;| </span
                ><span class="c0">&exist;x&exist;y</span
                ><span class="c2">&nbsp;Flight(x,y,z)}</span
                ><span class="c5 c8"
                    >, simply introduces some new variables for us to reason
                    with. It means that, within this formula, there exists
                    values for these variables that satisfy this query. If we
                    need new variables to use, but don&rsquo;t want them in our
                    output, then &ldquo;declare&rdquo; them like this.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>The bit on the far right, </span
                ><span class="c2">{z | </span
                ><span class="c2">&exist;x&exist;y</span
                ><span class="c2">&nbsp;</span
                ><span class="c0">Flight(x,y,z)</span><span class="c2">}</span
                ><span
                    >, says that the values of variables x, y and z must be the
                    values of the tuples within Flight. For example, for one of
                    the possibilities, </span
                ><span class="c2">x = VIE</span><span>, </span
                ><span class="c2">y = LHR</span><span>&nbsp;and </span
                ><span class="c2">z = BA</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The output says we want all values that z satisfy, and
                    since the formula says z is the Airline column in Flight,
                    this query gets all the airlines.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">This works the same as a projection.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">&pi;</span><span class="c2 c4">airline</span
                ><span class="c5 c2 c11">&nbsp;Flight</span>
            </li>
        </ul>
        <h3 class="c73" id="h.js8cm53cgjh9">
            <span class="c8 c66 c37"
                >List the codes of the airports in London</span
            >
        </h3>
        <a id="t.1de5980dc9e74fb14b5a423825be7a72578b07ee"></a><a id="t.11"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.76274854115fc11125ff7ad36ef5e33097f595b7"></a
                        ><a id="t.12"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="3" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Flight</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Origin</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6"
                                                >Destination</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Airline</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">BA</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">U2</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">OS</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.c29508bb5e7f04794c60f534ae4eb40fd9a9da6c"></a
                        ><a id="t.13"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c54 c94" colspan="2" rowspan="1">
                                        <p class="c47">
                                            <span class="c6 c46">Airport</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Code</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">City</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Vienna</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Larnaca</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Glasgow</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">EDI</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Edinburgh</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c34">Query</span><span>: </span
                ><span class="c2"
                    >{x | &exist;y Airport(x,y) &#8896; y = London}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">English, please:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Airport(x,y)</span
                ><span class="c5 c8"
                    >&nbsp;means that the variables x,y relate to the attributes
                    in the tuples of Airport, meaning x are values of Code and y
                    are values of City.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">y = London</span
                ><span class="c5 c8"
                    >&nbsp;means that y must have the value of London. Since the
                    formula before said that y must have values of City, this
                    limits our output relation to only having the city of
                    London.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Since the output is x, and the first formula defined x to
                    be the codes of the Airport, those codes will be our output.
                    Since y is limited to just the value of London, the output
                    will be the airport codes within London.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This works the same as a projection and selection.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">&pi;</span><span class="c2 c4">code</span
                ><span class="c2">&nbsp;(&sigma;</span
                ><span class="c2 c4">city=&rsquo;London&rsquo;</span
                ><span class="c2">&nbsp;Airport)</span>
            </li>
        </ul>
        <h3 class="c73" id="h.l23yydntxu1h">
            <span class="c8 c66 c37"
                >List the airlines that fly directly from London to
                Glasgow</span
            >
        </h3>
        <a id="t.1de5980dc9e74fb14b5a423825be7a72578b07ee"></a><a id="t.14"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.76274854115fc11125ff7ad36ef5e33097f595b7"></a
                        ><a id="t.15"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="3" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Flight</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Origin</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6"
                                                >Destination</span
                                            >
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Airline</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">BA</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c16 c20" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c51 c8 c84">U2</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c16" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">OS</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                    <td class="c81" colspan="1" rowspan="1">
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <a id="t.c29508bb5e7f04794c60f534ae4eb40fd9a9da6c"></a
                        ><a id="t.16"></a>
                        <table class="c26">
                            <tbody>
                                <tr class="c15">
                                    <td class="c94 c54" colspan="2" rowspan="1">
                                        <p class="c47">
                                            <span class="c46 c6">Airport</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">Code</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c47">
                                            <span class="c5 c6">City</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">VIE</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Vienna</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LHR</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LGW</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">London</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">LCA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Larnaca</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">GLA</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Glasgow</span>
                                        </p>
                                    </td>
                                </tr>
                                <tr class="c33">
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">EDI</span>
                                        </p>
                                    </td>
                                    <td class="c19" colspan="1" rowspan="1">
                                        <p class="c17">
                                            <span class="c5 c8">Edinburgh</span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c34">Query</span><span>: </span
                ><span class="c5 c2 c11"
                    >{z | &exist;x&exist;y&exist;u&exist;v Airport(x,u)
                    &#8896;</span
                >
            </li>
        </ul>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;u = London &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;Airport(y, v) &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;v = Glasgow &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;Flight(x,y,z)</span>
        </p>
        <p class="c29"><span class="c2">}</span></p>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">English, please:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-1 start">
            <li class="c13 li-bullet-0">
                <span>The first two, </span
                ><span class="c2">Airport(x,u) &#8896; u = London</span
                ><span class="c5 c8"
                    >, defines that x and u are codes and cities, and that the
                    only cities that u should inhibit is London.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>The next two, </span
                ><span class="c2">Airport(y,v) &#8896; v = Glasgow</span
                ><span class="c5 c8"
                    >, defines that y and v are codes and cities, and that the
                    only cities that v should inhibit is Glasgow. Keep in mind
                    that this is completely separate to what we did with x and
                    u.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>The last one, </span><span class="c2">Flight(x,y,z)</span
                ><span class="c5 c8"
                    >, says that we&rsquo;re only focusing on the flights from x
                    to y, and using z to store the airlines. Since u has to be
                    London and v has to be Glasgow, going from airports x to y
                    must be going from London to Glasgow.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Since the output is z, we are getting the airlines of
                    flights that go from airports located in London to
                    Glasgow.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_fyut19gtd4t8-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">This works the same as a join.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">&pi;</span><span class="c2 c4">airline</span
                ><span class="c2">&nbsp;((Flight &#8904;</span
                ><span class="c2 c4">origin=code</span
                ><span class="c2">&nbsp;(</span><span class="c2">&sigma;</span
                ><span class="c2 c4">city=&rsquo;London&rsquo;</span
                ><span class="c2">&nbsp;Airport)) &#8904;</span
                ><span class="c2 c4">destination=code</span
                ><span class="c2">&nbsp;((&sigma;</span
                ><span class="c2 c4">city=&rsquo;Glasgow&rsquo;</span
                ><span class="c5 c2 c11">&nbsp;Airport))</span>
            </li>
        </ul>
        <h3 class="c73" id="h.ujbxd9dp8mw">
            <span class="c8 c66 c37">Active domain</span>
        </h3>
        <ul class="c7 lst-kix_60lwnmhyotht-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Relational calculus is cool and all, but there are some
                    problematic queries.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We&rsquo;ve been using &ldquo;there exists&rdquo;, but what
                    about &ldquo;for all&rdquo;?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c2 c11">{x | &forall;y R(x,y)}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">How is this calculated?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >This means &ldquo;get all values of x such that they are
                    connected to </span
                ><span class="c45">all </span
                ><span class="c5 c8">values of y&rdquo;</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >As opposed to &ldquo;get all values of x such that they are
                    connected to </span
                ><span class="c45">some </span><span>values of y&rdquo; </span
                ><span class="c8 c61 c36"
                    >(for the &ldquo;there exists&rdquo; operator)</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >What does it mean &ldquo;all values&rdquo; of y?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>It means all values in the </span
                ><span class="c10">active domain</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The active domain is the set of all values in the relation
                    at that current point in time. No outside values; no
                    possible values we can think of. This means the domain is
                    always closed.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If we look at an example, it&rsquo;ll make more
                    sense.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_60lwnmhyotht-0">
            <li class="c3 li-bullet-0">
                <span class="c10">dom </span><span>= </span
                ><span class="c5 c2 c11">{1,2,3}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c10">D</span><span>&nbsp;= </span
                ><span class="c5 c2 c11">{R(1,1), R(1,2)}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c2 c11">{x | &forall;y R(x,y)} &rarr; {}</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c2 c11"></span></p>
        <ul class="c7 lst-kix_88v3p1mevgkw-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here, the query has no output.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >1 can map to 1 and 2, but it can&rsquo;t map to 3.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >2 doesn&rsquo;t map to anything, and 3 doesn&rsquo;t map to
                    anything.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>So there can be no value of x that maps to </span
                ><span class="c45">every</span
                ><span class="c5 c8">&nbsp;value of y.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here&rsquo;s another example:</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_60lwnmhyotht-0">
            <li class="c3 li-bullet-0">
                <span class="c10">dom </span><span>= </span
                ><span class="c5 c2 c11">{1,2}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c10">D</span><span>&nbsp;= </span
                ><span class="c5 c2 c11">{R(1,1), R(1,2)}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c2 c11">{x | &forall;y R(x,y)} &rarr; {1}</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c2 c11"></span></p>
        <ul class="c7 lst-kix_yhfezcc5zvh8-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here, the domain has changed to just 1 and 2.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >2 still doesn&rsquo;t map to anything, but 1 now maps to 1
                    and 2.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">1 can map to any value in the domain!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >That means 1 is a possible value for x, since it can map to
                    any y value.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >By changing the domain like this, we can make or break
                    these queries. This is why we use the active domain.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_yhfezcc5zvh8-0">
            <li class="c3 li-bullet-0">
                <span>A theorem states that relational algebra (</span
                ><span class="c10">RA</span
                ><span>), domain relational calculus (</span
                ><span class="c10">DRC</span
                ><span>) and tuple relational calculus (</span
                ><span class="c10">TRC</span><span>) are all </span
                ><span class="c32 c56">equally expressive</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">What is tuple relational calculus?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s a declarative language introduced by Codd. It
                    predates domain relational calculus.</span
                >
            </li>
        </ul>
        <h1 class="c23" id="h.53bezut1j07r">
            <span class="c40 c8"
                >Conjunctive Query - Containment and Minimisation</span
            >
        </h1>
        <h2 class="c52" id="h.vvmxb1hmz8x5">
            <span class="c8 c64">Conjunctive queries</span>
        </h2>
        <ul class="c7 lst-kix_jtxvbakb7g7i-0 start">
            <li class="c3 li-bullet-0">
                <span class="c10">Conjunctive Queries (CQ) </span
                ><span class="c5 c8"
                    >are yet another query language that we can use.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s called that because it is expressed as a set of
                    atoms.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In practice, you can think of it as syntactic sugar for
                    relational calculus.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However, it&rsquo;s more powerful, even though it&rsquo;s
                    less expressive.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">It&rsquo;s syntax goes like this:</span>
            </li>
        </ul>
        <p class="c12">
            <span class="c2 c31">Q(x) := &exist;y (R</span
            ><span class="c2 c4 c31">1</span><span class="c2 c31">(v</span
            ><span class="c2 c4 c31">1</span
            ><span class="c2 c31">) &and; ... &and; R</span
            ><span class="c2 c4 c31">m</span><span class="c2 c31">(v</span
            ><span class="c2 c4 c31">m</span
            ><span class="c107 c2 c31 c11">))</span>
        </p>
        <ul class="c7 lst-kix_5dyygcje2jg2-0 start">
            <li class="c13 li-bullet-0">
                <span class="c2">R</span><span class="c2 c4">i</span
                ><span class="c2">&nbsp;(1 &le; i &le; m)</span
                ><span class="c5 c8">&nbsp;are relations</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">x, y, v</span><span class="c2 c4">1</span
                ><span class="c2">, ... v</span><span class="c2 c4">m</span
                ><span class="c5 c8">&nbsp;are tuples of variables</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Each variable mentioned in </span><span class="c2">v</span
                ><span class="c2 c4">i</span
                ><span class="c2">&nbsp;(1 &lt;= i &lt;= m)</span
                ><span>&nbsp;appears in either </span><span class="c2">x</span
                ><span>&nbsp;or </span><span class="c5 c2 c11">y</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>The variables in </span><span class="c2">x</span
                ><span>, which are free, are called </span
                ><span class="c10">distinguished variables</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_vrnn86ex771v-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Conjunctive queries have a form that use rule-based queries
                    that look like this:</span
                >
            </li>
        </ul>
        <p class="c12">
            <span class="c2 c31">Q(x) :- R</span><span class="c2 c4 c31">1</span
            ><span class="c2 c31">(v</span><span class="c2 c4 c31">1</span
            ><span class="c2 c31">) &and; ... &and; R</span
            ><span class="c2 c4 c31">m</span><span class="c2 c31">(v</span
            ><span class="c2 c4 c31">m</span><span class="c2 c31">)</span>
        </p>
        <ul class="c7 lst-kix_vrnn86ex771v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is very similar to before, but less verbose and
                    doesn&rsquo;t require existential quantifications (like
                    &ldquo;for all&rdquo; and &ldquo;there exists&rdquo;).</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The body of Q can be seen as a set of atoms.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>The </span><span class="c2">(x)</span
                ><span>&nbsp;bit in </span><span class="c2">Q(x)</span
                ><span>&nbsp;can also be called the </span
                ><span class="c10">head</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_vrnn86ex771v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s convert the relational calculus examples into
                    conjunctive queries for our examples!</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.uryd9fsv0cf4">
            <span class="c8 c66 c37">List all the airlines</span>
        </h3>
        <ul class="c7 lst-kix_86r9uqfhjp1s-0 start">
            <li class="c3 li-bullet-0">
                <span>Relational calculus</span><span>: </span
                ><span class="c5 c2 c11"
                    >{z | &exist;x&exist;y Flight(x,y,z)}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Conjunctive queries: </span
                ><span class="c5 c2 c11">Q(z) :- Flight(x,y,z)</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Explanation:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_86r9uqfhjp1s-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Here, instead of putting our output variables to the left
                    of the bar, we put it as a parameter of query Q. In this
                    case, that&rsquo;s z.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In the rule-based query form, we don&rsquo;t need the
                    &ldquo;there exists&rdquo; quantification.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Everything else is much of the same.</span>
            </li>
        </ul>
        <h3 class="c73" id="h.ojwoz4vy4rua">
            <span class="c8 c66 c37">List the codes of the airports</span>
        </h3>
        <ul class="c7 lst-kix_86r9uqfhjp1s-0">
            <li class="c3 li-bullet-0">
                <span>Relational calculus: </span
                ><span class="c5 c2 c11"
                    >{x | &exist;y Airport(x,y) &#8896; y = London}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Conjunctive queries: </span
                ><span class="c5 c2 c11">Q(x) :- Airport(x,y), y = London</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Explanation</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_86r9uqfhjp1s-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s pretty much the same as the last example, except
                    we can also have invariants for the variables, like with y =
                    London.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >However, what if I told you we don&rsquo;t even need
                    that?</span
                >
            </li>
            <li class="c13 li-bullet-0"><span class="c5 c8">Behold!</span></li>
        </ul>
        <ul class="c7 lst-kix_86r9uqfhjp1s-0">
            <li class="c3 li-bullet-0">
                <span>Conjunctive queries: </span
                ><span class="c5 c2 c11">Q(x) :- Airport(x,London)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_86r9uqfhjp1s-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >With conjunctive queries, we don&rsquo;t need to create a
                    variable and define it just to limit an attribute in
                    Airport; we can just state the value.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.nil0ducszhpj">
            <span class="c8 c66 c37"
                >List the airlines that fly directly from London to
                Glasgow</span
            >
        </h3>
        <ul class="c7 lst-kix_65wyfqvvydgs-0 start">
            <li class="c3 li-bullet-0">
                <span>Relational calculus: </span
                ><span class="c5 c2 c11"
                    >{z | &exist;x&exist;y&exist;u&exist;v Airport(x,u)
                    &#8896;</span
                >
            </li>
        </ul>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;u = London &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;Airport(y, v) &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;v = Glasgow &#8896;</span>
        </p>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; &nbsp;Flight(x,y,z)</span>
        </p>
        <p class="c29"><span class="c5 c2 c11">}</span></p>
        <ul class="c7 lst-kix_65wyfqvvydgs-0">
            <li class="c3 li-bullet-0">
                <span>Conjunctive queries: </span
                ><span class="c5 c2 c11">Q(z) :- Airport(x,London),</span>
            </li>
        </ul>
        <p class="c58 c65">
            <span class="c5 c2 c11">&nbsp;Airport(y,Glasgow),</span>
        </p>
        <p class="c65 c58">
            <span class="c5 c2 c11">&nbsp;Flight(x,y,z)</span>
        </p>
        <ul class="c7 lst-kix_65wyfqvvydgs-0">
            <li class="c3 li-bullet-0">
                <span>Explanation</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_65wyfqvvydgs-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Much like before, we don&rsquo;t need to define variables
                    just to limit attributes.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The conjunctive query is a lot more succinct here: the
                    first atom says that x is an airport based in London, the
                    second atom says that y is an airport based in Glasgow, and
                    the third atom says that z is an airline that has a flight
                    from x to y.</span
                >
            </li>
        </ul>
        <h2 class="c52" id="h.lgknhkuzmibi">
            <span class="c64 c8">Homomorphism</span>
        </h2>
        <ul class="c7 lst-kix_fu6tiq2e3368-0 start">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">homomorphism </span
                ><span class="c5 c8"
                    >is a substitution that converts a set of atoms from one
                    conjunctive query into a set of atoms from another
                    conjunctive query, while preserving structure.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >It is a substitution from a set of atoms A to a set of
                    atoms B, </span
                ><span class="c2">h : terms(A) &rarr; terms(B) </span
                ><span class="c5 c8">such that:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_fu6tiq2e3368-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">t</span><span>&nbsp;is a constant &rArr; </span
                ><span class="c5 c2 c11">h(t) = t</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2 c22">R(t1, ..., tk)</span
                ><span class="c2">&nbsp;&isin; A &rArr; h(</span
                ><span class="c2 c22">R(t1, ..., tk)</span
                ><span class="c5 c2 c11">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">h(</span
                ><span class="c2 c22">R(t1, ..., tk)</span
                ><span class="c2">) = R(</span
                ><span class="c1">h(t1), ..., h(tk)</span
                ><span class="c5 c2 c11">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">R(</span
                ><span class="c1">h(t1), ..., h(tk)</span
                ><span class="c5 c2 c11">) &isin; B</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_fu6tiq2e3368-0">
            <li class="c3 li-bullet-0">
                <span>Where </span><span class="c2">terms(A) = {t | t </span
                ><span>is a variable or constant that occurs in</span
                ><span class="c5 c2 c11">&nbsp;A}</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_7jmwphpsi226-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If it&rsquo;s still confusing, let me give you an
                    example:</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,y), P(y,z), P(z,w)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 276px;
                    height: 37px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image28.png"
                    style="
                        width: 276px;
                        height: 37px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_7jmwphpsi226-0">
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">2</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,y), P(y,z), P(z,x)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 159px;
                    height: 87px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image26.png"
                    style="
                        width: 159px;
                        height: 87px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_7jmwphpsi226-0">
            <li class="c3 li-bullet-0">
                <span>We can define a homomorphism &lsquo;h&rsquo; from S</span
                ><span class="c4">1</span><span>&nbsp;to S</span
                ><span class="c4">2</span><span>&nbsp;as </span
                ><span class="c5 c2 c11"
                    >{x &rarr; x, y &rarr; y, z &rarr; z, w &rarr; x}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">h(S</span><span class="c2 c4">1</span
                ><span class="c2">) = {</span><span class="c22 c43 c10">h</span
                ><span class="c2 c22">(P(x,y))</span
                ><span class="c2"
                    >, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                ><span class="c49 c43 c10">h</span
                ><span class="c1">(P(y,z))</span
                ><span class="c2"
                    >,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                ><span class="c32 c43 c56 c10">h</span
                ><span class="c0">(P(z,x))</span
                ><span class="c5 c2 c11">}</span>
            </li>
        </ul>
        <p class="c58 c86 c108 c48">
            <span class="c2">= {</span><span class="c2 c22">P(</span
            ><span class="c22 c43 c10">h</span><span class="c2 c22">(x),</span
            ><span class="c22 c43 c10">h</span><span class="c2 c22">(y))</span
            ><span class="c2"
                >, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c1">P(</span><span class="c49 c43 c10">h</span
            ><span class="c1">(y),</span><span class="c49 c43 c10">h</span
            ><span class="c1">(z))</span
            ><span class="c2"
                >,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0">P(</span><span class="c32 c43 c56 c10">h</span
            ><span class="c0">(z),</span><span class="c32 c43 c56 c10">h</span
            ><span class="c0">(x))</span><span class="c5 c2 c11">}</span>
        </p>
        <p class="c58 c86 c48 c108">
            <span class="c2">= {</span><span class="c2 c22">P(x,y)</span
            ><span class="c2"
                >,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c1">P(y,z)</span
            ><span class="c2"
                >,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0">P(z,x)</span><span class="c5 c2 c11">}</span>
        </p>
        <ul class="c7 lst-kix_7jmwphpsi226-0">
            <li class="c3 li-bullet-0">
                <span>All the elements of </span><span class="c2">h(S</span
                ><span class="c2 c4">1</span><span class="c2">)</span
                ><span>&nbsp;also belong to </span><span class="c2">S</span
                ><span class="c2 c4">2</span><span>. Therefore </span
                ><span class="c2">h</span
                ><span>&nbsp;is a homomorphism from </span
                ><span class="c2">S</span><span class="c2 c4">1</span
                ><span>&nbsp;to </span><span class="c2">S</span
                ><span class="c2 c4">2</span><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c34">Note</span
                ><span
                    >: In these notes, when I define a homomorphism, I&rsquo;ll
                    often omit the direction of the mapping for the sake of
                    making the explanation easier (e.g. S</span
                ><span class="c4">1</span><span>&nbsp;to S</span
                ><span class="c4">2</span
                ><span
                    >). However, if you&rsquo;re writing them out in an exam or
                    something, you </span
                ><span class="c10">must </span
                ><span class="c5 c8"
                    >explicitly state what the homomorphism is mapping to and
                    from where. Otherwise, it can be ambiguous, and probably
                    won&rsquo;t even be a proper homomorphism.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_7jmwphpsi226-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Let&rsquo;s try a more trivial one.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,y), P(y,x), P(y,y)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 203px;
                    height: 52px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image23.png"
                    style="
                        width: 203px;
                        height: 52px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_7jmwphpsi226-0">
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">2</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,x)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 52px;
                    height: 55px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image39.png"
                    style="
                        width: 52px;
                        height: 55px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_hy7c5xdzxlge-0 start">
            <li class="c3 li-bullet-0">
                <span>We can define h as </span
                ><span class="c5 c2 c11">{x &rarr; x, y &rarr; x}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">h(S</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11"
                    >) = {P(x,x), P(x,x), P(x,x)} = {P(x,x)}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Again, all elements of </span><span class="c2">h(S</span
                ><span class="c2 c4">1</span><span class="c2">)</span
                ><span>&nbsp;also belong to </span><span class="c2">S</span
                ><span class="c2 c4">2</span><span>, so </span
                ><span class="c2">h</span
                ><span>&nbsp;is a homomorphism from </span
                ><span class="c2">S</span><span class="c2 c4">1</span
                ><span>&nbsp;to </span><span class="c2">S</span
                ><span class="c2 c4">2</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_hy7c5xdzxlge-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you want to think of it a bit more graphically, try it
                    this way:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_hy7c5xdzxlge-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >You have a graph. Your objective is to make your graph look
                    like the other graph, or at least be a &ldquo;subset&rdquo;
                    of it.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>You can change the nodes to other values</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >If you change a node to another node value that already
                    exists, you can &ldquo;merge&rdquo; it with that node </span
                ><span class="c8 c61 c36"
                    >(if you change w to x, you can &ldquo;merge&rdquo; the w
                    node into the x node)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >You can also &ldquo;split&rdquo; nodes if a transition is
                    bidirectional, but you can&rsquo;t leave any duplicate
                    nodes</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_hy7c5xdzxlge-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Wanna try an example, but graphically?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,y), P(y,z), P(z,x)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 159px;
                    height: 87px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image26.png"
                    style="
                        width: 159px;
                        height: 87px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_hy7c5xdzxlge-0">
            <li class="c3 li-bullet-0">
                <span class="c2">S</span><span class="c2 c4">2</span
                ><span class="c5 c2 c11">&nbsp;= {P(x,y), P(y,x), P(y,y)}</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 202px;
                    height: 59px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image46.png"
                    style="
                        width: 202px;
                        height: 59px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_m4lje5emk7o0-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >First of all, we can see that there is a loop in y in the
                    second graph. In the first graph, y goes to z. This means we
                    should change z to y, so that y can loop.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 195.47px;
                    height: 117.12px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image8.png"
                    style="
                        width: 195.47px;
                        height: 117.12px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_2lwiycaj5wjb-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Since we have two y&rsquo;s, we can &ldquo;merge&rdquo;
                    them together. The first y points to the other y, so
                    that&rsquo;ll create a loop, and the second y points to x.
                    Since x also points to the first y, that&rsquo;ll create a
                    bidirectional transition.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 195.47px;
                    height: 65.84px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image53.png"
                    style="
                        width: 195.47px;
                        height: 65.84px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_isopdd3me3bn-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >I&rsquo;d say that looks like our second graph! Therefore a
                    homomorphism exists.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >All we did was change z to y, so our only mapping will be z
                    &rarr; y. Everything else will be the identity function,
                    making our </span
                ><span class="c5 c2 c11"
                    >h = {x &rarr; x, y &rarr; y, z &rarr; y}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >This method is only really for visualising a homomorphism;
                    for actually calculating one, it&rsquo;s probably best if
                    you just write it. But I don&rsquo;t know. Maybe you like
                    doing things this way. Whatever gets you that 1</span
                ><span class="c114">st</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <h2 class="c52" id="h.fbmn937yyzso">
            <span class="c64 c8">Semantics of Conjunctive Queries</span>
        </h2>
        <ul class="c7 lst-kix_66ey6m1wk7wi-0 start">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">match </span
                ><span class="c5 c8"
                    >is a homomorphism from a conjunctive query to a
                    database.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It maps the variables in the body of the conjunctive query
                    to values in the database.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Think of it like one of the outputs of the query.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Formally, it goes like this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(x</span><span class="c2 c4">1</span
                ><span class="c2">, ..., x</span><span class="c2 c4">k</span
                ><span class="c5 c2 c11">) :- body</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Let there be database </span
                ><span class="c5 c2 c11">D</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Match is homomorphism </span><span class="c2">h</span
                ><span>&nbsp;such that </span
                ><span class="c5 c2 c11">h(body) &sube; D</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here&rsquo;s an example:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Say we have a database with some records:</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c43 c10">School</span><span class="c2">(</span
                ><span class="c2 c22">Student(Name, Age, ClassID)</span
                ><span class="c2">, </span
                ><span class="c1">Class(ClassID, ClassName)</span
                ><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-2 start">
            <li class="c25 li-bullet-0">
                <span class="c51 c2 c22 c11"
                    >Student(&ldquo;Matthew&rdquo;, 21, 13)</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c51 c2 c22 c11"
                    >Student(&ldquo;John&rdquo;, 24, 14)</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c51 c2 c22 c11"
                    >Student(&ldquo;Giorno&rdquo;, 15, 14)</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c1 c51 c11"
                    >Class(13, &ldquo;Computer Science&rdquo;)</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c1 c51 c11">Class(14, &ldquo;Biology&rdquo;)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">We also have a conjunctive query:</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q(Name) :- Student(Name, BioID), Class(BioID,
                    &ldquo;Biology&rdquo;)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We can match the variables of the conjunctive query to
                    values in the database to create a match:</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >{Name &rarr; &ldquo;Giorno&rdquo;, BioID &rarr; 14}</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">That&rsquo;s one possible match!</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >There is one other possible match, you know.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >{Name &rarr; &ldquo;John&rdquo;, BioID &rarr; 14}</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >So each individual query result is a match, but what do we
                    call all the possible matches?</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">I thought you&rsquo;d never ask...</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_66ey6m1wk7wi-0">
            <li class="c3 li-bullet-0">
                <span>The </span><span class="c10">answer </span
                ><span class="c5 c8"
                    >to a conjunctive query over a database is the set of
                    k-tuples, where each tuple is the result of a match mapping
                    each conjunctive query atom to its database
                    counterpart.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Formally, it goes like this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(D) := {(h(x</span><span class="c2 c4">1</span
                ><span class="c2">),&hellip;, h(x</span
                ><span class="c2 c4">k</span
                ><span class="c5 c2 c11">)) | h is a match of Q in D}</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s an example, following that school one I
                    defined before:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_66ey6m1wk7wi-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">This is the query in question:</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q(Name, Age) :- Student(Name, BioID), Class(BioID,
                    &ldquo;Biology&rdquo;)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >These are the two matches that this query has in the
                    database:</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">h</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11"
                    >&nbsp;= {Name &rarr; &ldquo;Giorno&rdquo;, Age &rarr; 15,
                    BioID &rarr; 14}</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">h</span><span class="c2 c4">2</span
                ><span class="c5 c2 c11"
                    >&nbsp;= {Name &rarr; &ldquo;John&rdquo;, Age &rarr; 24,
                    BioID &rarr; 14}</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >So we just run the matches on the atoms in the query:</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">{ (</span><span class="c2 c22">h</span
                ><span class="c2 c22 c4">1</span
                ><span class="c2 c22">(Name), h</span
                ><span class="c2 c22 c4">1</span
                ><span class="c2 c22">(Age)</span><span class="c2">), (</span
                ><span class="c1">h</span><span class="c1 c4">2</span
                ><span class="c1">(Name), h</span><span class="c1 c4">2</span
                ><span class="c1">(Age)</span><span class="c5 c2 c11">) }</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">{ (</span
                ><span class="c2 c22">&ldquo;Giorno&rdquo;, 15</span
                ><span class="c2">), (</span
                ><span class="c1">&ldquo;John&rdquo;, 24</span
                ><span class="c5 c2 c11">) }</span>
            </li>
        </ul>
        <h2 class="c52" id="h.m0tm84eziyk0">
            <span class="c64 c8">CQ problems</span>
        </h2>
        <ul class="c7 lst-kix_t638hiaoozvm-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >For CQs, the problems are a little bit better:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span>BQE(</span><span class="c10">CQ</span
                ><span>) is NP-complete </span
                ><span class="c8 c61 c36">(combined complexity)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>BQE[</span><span class="c32">D</span><span>](</span
                ><span class="c10">CQ</span
                ><span>) is NP-complete, for fixed database </span
                ><span class="c8 c61 c36">(query complexity)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>BQE[</span><span class="c57">Q</span><span>](</span
                ><span class="c10">CQ</span
                ><span>) is LOGSPACE, for a fixed query </span
                ><span class="c8 c61 c36">(data complexity)</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span>Why BQE and BQE[</span><span class="c32">D</span
                ><span class="c5 c8">] are NP:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span>To solve, go through every possible substitution of </span
                ><span class="c2">h : terms(body) &rarr; terms(D)</span
                ><span>&nbsp;and check if it&rsquo;s a match of </span
                ><span class="c57">Q</span><span>&nbsp;in </span
                ><span class="c51 c8 c32">D</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Basically, use brute force</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <a id="id.o1nt2bxlotgm"></a>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span>Why BQE and BQE[</span><span class="c32">D</span
                ><span class="c5 c8">] are NP-hard:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Reduction from 3-colourability</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Let&rsquo;s say we have an undirected graph G with edges
                    and nodes.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Let&rsquo;s say the query Q</span><span class="c4">G</span
                ><span class="c5 c8"
                    >&nbsp;has a match if D satisfies 3-colourability.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If the graph G is 3-colourable, there must be a
                    homomorphism from this graph to a cycle that just loops red
                    &rarr; blue &rarr; green.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>In other words, there must be a match of Q</span
                ><span class="c4">G</span><span>&nbsp;in </span
                ><span class="c2">D = {E(r,g), E(g,b), E(b,r)}</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s hard to think of it in just words: let&rsquo;s
                    have a visual example!</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Here&rsquo;s our graph G:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 163.06px;
                    height: 155.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image41.png"
                    style="
                        width: 163.06px;
                        height: 155.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_27lh3nuveaqt-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >That looks pretty 3-colourable to me. In fact, it&rsquo;s
                    already 3-coloured!</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >So according to this proof, there must be a homomorphism
                    from this graph to a loop that goes red &rarr; blue &rarr;
                    green (or just cycles any pattern of those three
                    colours).</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 105.09px;
                    height: 88.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image49.png"
                    style="
                        width: 105.09px;
                        height: 88.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_pypi0vcnohox-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Why, yes there is!</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >{1 &rarr; a, 2 &rarr; b, 3 &rarr; c, 4 &rarr; a, 5 &rarr;
                    c, 6 &rarr; a}</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >They all just map to their colour equivalents.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >All the reds map to a, all the greens map to b and all the
                    blues map to c.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Therefore, if we can find a homomorphism in polynomial time
                    (find if a match exists for Q</span
                ><span class="c4">G</span
                ><span
                    >&nbsp;in D through a BQE algorithm), then we can solve
                    3-colourability in polynomial time.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span>Why BQE[</span><span class="c57">Q</span
                ><span class="c5 c8">] is LOGSPACE:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span>BQE[</span><span class="c57">Q</span
                ><span>] with CQ is LOGSPACE because BQE[</span
                ><span class="c75">Q</span
                ><span class="c5 c8"
                    >] with domain relational calculus is also LOGSPACE.</span
                >
            </li>
        </ul>
        <p class="c41 c77"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">canonical database </span
                ><span>of a query Q</span><span class="c10">&nbsp;</span
                ><span class="c5 c8"
                    >is a database of which the homomorphism of Q on the
                    database is the identity function.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>It&rsquo;s syntax is like this: </span
                ><span class="c2">D[Q]</span><span>&nbsp;</span
                ><span class="c8 c61 c36"
                    >(this says &ldquo;D, the canonical database of
                    Q&rdquo;)</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >You can create one from a query Q by taking every variable </span
                ><span class="c2">x</span
                ><span>&nbsp;and mapping it to a new constant like </span
                ><span class="c5 c2 c11">x&rsquo;</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>This process is called &ldquo;</span
                ><span class="c10">freezing</span
                ><span class="c5 c8">&rdquo;.</span>
            </li>
            <li class="c3 li-bullet-0"><span class="c5 c8">Example:</span></li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span>Given </span
                ><span class="c5 c2 c11"
                    >Q(x,y) :- R(x,y), P(y,z,w), R(z,x)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Then </span
                ><span class="c5 c2 c11"
                    >D[Q] = {R(x&rsquo;, y&rsquo;),
                    P(y&rsquo;,z&rsquo;,w&rsquo;), R(z&rsquo;, x&rsquo;)}</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span class="c34">Note</span
                ><span
                    >: the mapping of variables to new constants is a bijection,
                    e.g. for all </span
                ><span class="c2">x &rarr; x&rsquo;</span
                ><span>, then you can do </span
                ><span class="c5 c2 c11">x&rsquo; &rarr; x</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This also means if you have a canonical database, you can
                    get the query it was defined from too!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">So why did I tell you this?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The concept of canonical databases solves one of the
                    problems we&rsquo;ve seen!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Satisfiability (SAT) of CQs</span
                ><span class="c5 c8"
                    >&nbsp;can be solved using canonical databases.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you have a conjunctive query Q, there will always be a
                    database that satisfies it because every conjunctive query
                    has a canonical database.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Therefore satisfiability of CQs is constant time, because
                    it&rsquo;s always true!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span class="c10"
                    >Equivalence (EQUIV) and Containment (CONT) of CQs</span
                ><span class="c5 c8">:</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Keep in mind these rules only work for conjunctive
                    queries!</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We can turn an equivalence problem into a containment
                    problem by:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-2 start">
            <li class="c25 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;&equiv; Q</span><span class="c4">2</span>
            </li>
            <li class="c25 li-bullet-0"><span class="c5 c8">&rarr; </span></li>
            <li class="c25 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;&sube; Q</span><span class="c4">2</span
                ><span>&nbsp;and Q</span><span class="c4">2</span
                ><span>&nbsp;&sube; Q</span><span class="c4">1</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We can turn a containment problem into an equivalence
                    problem by:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-2 start">
            <li class="c25 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;&sube; Q</span><span class="c4">2</span>
            </li>
            <li class="c25 li-bullet-0"><span class="c5 c8">&rarr; </span></li>
            <li class="c25 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;&equiv; (Q</span><span class="c4">1</span
                ><span>&nbsp;&and; Q</span><span class="c4">2</span
                ><span>) </span><span class="c36">(this means if Q</span
                ><span class="c36 c4">1</span
                ><span class="c36">&nbsp;is equivalent to itself and Q</span
                ><span class="c36 c4">1</span
                ><span class="c36">&nbsp;conjuncted with Q</span
                ><span class="c36 c4">2</span><span class="c8 c61 c36">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_t638hiaoozvm-0">
            <li class="c3 li-bullet-0">
                <span
                    >Because of this, we only need to worry about CONT, and
                    EQUIV can follow.</span
                >
            </li>
        </ul>
        <h2 class="c52" id="h.5vpvyubzstx2">
            <span class="c64 c8">Homomorphism Theorem</span>
        </h2>
        <ul class="c7 lst-kix_jsmf6hnncz1d-0 start">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">containment mapping </span
                ><span>or </span><span class="c10">query homomorphism </span
                ><span class="c5 c8"
                    >is simply a homomorphism from query to query.</span
                >
            </li>
            <li class="c3 li-bullet-0"><span class="c5 c8">Formally:</span></li>
        </ul>
        <ul class="c7 lst-kix_jsmf6hnncz1d-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q</span><span class="c2 c4">1</span
                ><span class="c2">(x</span><span class="c2 c4">1</span
                ><span class="c2">, ..., x</span><span class="c2 c4">k</span
                ><span class="c2">) :- body</span
                ><span class="c5 c2 c4">1</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Q</span><span class="c2 c4">2</span
                ><span class="c2">(y</span><span class="c2 c4">1</span
                ><span class="c2">, ..., y</span><span class="c2 c4">k</span
                ><span class="c2">) :- body</span
                ><span class="c5 c2 c4">2</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">h : terms(body</span
                ><span class="c2 c4">1</span
                ><span class="c2">) &rarr; terms(body</span
                ><span class="c2 c4">2</span><span class="c5 c2 c11">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Such that:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_jsmf6hnncz1d-2 start">
            <li class="c25 li-bullet-0">
                <span class="c2">h</span><span>&nbsp;is homomorphism from </span
                ><span class="c2">body</span><span class="c2 c4">1</span
                ><span>&nbsp;to </span><span class="c2">body</span
                ><span class="c5 c2 c4">2</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2">(h(x</span><span class="c2 c4">1</span
                ><span class="c2">), ..., h(x</span><span class="c2 c4">k</span
                ><span class="c2">)) = (y</span><span class="c2 c4">1</span
                ><span class="c2">, ..., y</span><span class="c2 c4">k</span
                ><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_fn68vyjl70gz-0 start">
            <li class="c3 li-bullet-0">
                <span>The </span><span class="c10">homomorphism theory </span
                ><span>states that for any two conjunctive queries Q</span
                ><span class="c4">1</span><span>&nbsp;and Q</span
                ><span class="c4">2</span><span>, if Q</span
                ><span class="c4">1</span><span>&nbsp;&sube; Q</span
                ><span class="c4">2</span
                ><span>, there exists a containment mapping from Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span><span>, and vice versa.</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_2lrdglrzt1qm-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s a little example to help with
                    visualisation:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_2lrdglrzt1qm-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q</span><span class="c2 c4">1</span
                ><span class="c5 c2 c11">(x,y) :- R(x,z), S(z,z), R(z,y)</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 325px;
                    height: 86px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image21.png"
                    style="
                        width: 325px;
                        height: 86px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_2lrdglrzt1qm-1">
            <li class="c13 li-bullet-0">
                <span class="c2">Q</span><span class="c2 c4">2</span
                ><span class="c5 c2 c11">(a,b) :- R(a,c), S(c,d), R(d,b)</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 455px;
                    height: 53px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image42.png"
                    style="
                        width: 455px;
                        height: 53px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_2lrdglrzt1qm-0">
            <li class="c3 li-bullet-0">
                <span>We know that Q</span><span class="c4">1</span
                ><span>&nbsp;&sube; Q</span><span class="c4">2</span
                ><span>&nbsp;because there is a homomorphism from Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span><span class="c5 c8">:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_2lrdglrzt1qm-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >h = {a &rarr; x, b &rarr; y, c &rarr; z, d &rarr; z}</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_2lrdglrzt1qm-0">
            <li class="c3 li-bullet-0">
                <span>There is no homomorphism from Q</span
                ><span class="c4">1</span><span>&nbsp;to Q</span
                ><span class="c4">2</span><span>, so Q</span
                ><span class="c4">1</span><span>&nbsp;&sub; Q</span
                ><span class="c4">2</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_2lrdglrzt1qm-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Is there a proof of this?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Why, yes there is! Two, in fact, that go both ways.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Note that I&rsquo;m only going to explain the high-level
                    ideas; if you&rsquo;re really a masochist for mathematical
                    syntax, check out the slides; it&rsquo;s full of it.</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_yfyt1raoxpyy-0 start" start="1">
            <li class="c3 li-bullet-0">
                <span class="c10">Q</span><span class="c4 c10">1</span
                ><span class="c10">&nbsp;&sube; Q</span
                ><span class="c4 c10">2</span
                ><span class="c10">&nbsp;&rArr; Homomorphism from Q</span
                ><span class="c4 c10">2</span><span class="c10">&nbsp;to Q</span
                ><span class="c4 c10">1</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_lqx0897gngol-0 start">
            <li class="c13 li-bullet-0">
                <span>We can get the canonical database of Q</span
                ><span class="c4">1</span><span>&nbsp;by writing D[Q</span
                ><span class="c4">1</span><span class="c5 c8">]</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>There is an answer to Q</span><span class="c4">1</span
                ><span>&nbsp;over D[Q</span><span class="c4">1</span
                ><span class="c5 c8">] (trivially)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Since Q</span><span class="c4">1</span
                ><span>&nbsp;is a subset of Q</span><span class="c4">2</span
                ><span>, that means that same answer will work for Q</span
                ><span class="c4">2</span><span>&nbsp;upon D[Q</span
                ><span class="c4">1</span><span class="c5 c8">]</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>If Q</span><span class="c4">2</span
                ><span>&nbsp;has an answer for D[Q</span
                ><span class="c4">1</span
                ><span>], that must mean there is a homomorphism from Q</span
                ><span class="c4">2</span><span>&nbsp;to D[Q</span
                ><span class="c4">1</span><span class="c5 c8">]</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>But since D[Q</span><span class="c4">1</span
                ><span>] is essentially a copy-paste of Q</span
                ><span class="c4">1</span><span>, then Q</span
                ><span class="c4">2</span
                ><span>&nbsp;also has a homomorphism to Q</span
                ><span class="c4">1</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_exvr1mxxw5c3-0 start" start="2">
            <li class="c3 li-bullet-0">
                <span class="c10">Homomorphism from Q</span
                ><span class="c4 c10">2</span><span class="c10">&nbsp;to Q</span
                ><span class="c4 c10">1</span
                ><span class="c10">&nbsp;&rArr; Q</span
                ><span class="c4 c10">1</span
                ><span class="c10">&nbsp;&sube; Q</span
                ><span class="c4 c10">2</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_37nb3fubt85u-0 start">
            <li class="c13 li-bullet-0">
                <span>Let&rsquo;s say we have a database </span
                ><span class="c2">D</span><span>, and there is a tuple </span
                ><span class="c2">t</span><span>&nbsp;such that </span
                ><span class="c2">t &isin; Q</span><span class="c2 c4">1</span
                ><span class="c2">(D) </span><span class="c36">(tuple </span
                ><span class="c2 c36">t</span
                ><span class="c36">&nbsp;is one of the matches that Q</span
                ><span class="c36 c4">1</span
                ><span class="c36">&nbsp;has over </span
                ><span class="c2 c36">D</span><span class="c8 c61 c36">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>To complete this proof, we need to show that </span
                ><span class="c2">t &isin; Q</span><span class="c2 c4">2</span
                ><span class="c2">(D)</span><span>&nbsp;</span
                ><span class="c36">(tuple </span><span class="c2 c36">t</span
                ><span class="c36">&nbsp;is also one of the matches that Q</span
                ><span class="c36 c4">2</span
                ><span class="c36">&nbsp;has over </span
                ><span class="c2 c36">D</span><span class="c8 c61 c36">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Since there is a homomorphism </span
                ><span class="c2">h</span><span>&nbsp;from Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span
                ><span>, we can convert the body of Q</span
                ><span class="c4">2</span><span>&nbsp;to the body of Q</span
                ><span class="c4">1</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Since there is a match from Q</span
                ><span class="c4">1</span
                ><span
                    >&nbsp;to D, that means there is a homomorphism from Q</span
                ><span class="c4">1</span
                ><span
                    >&nbsp;to D (because that&rsquo;s what a match basically is:
                    a homomorphism). We&rsquo;ll call it </span
                ><span class="c5 c2 c11">g</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Now we can use </span><span class="c2">h</span
                ><span>&nbsp;to get from the body of Q</span
                ><span class="c4">2</span><span>&nbsp;to the body of Q</span
                ><span class="c4">1</span><span>, and then we can use </span
                ><span class="c2">g</span
                ><span>&nbsp;to get to the body of Q</span
                ><span class="c4">1</span><span>&nbsp;to the database </span
                ><span class="c2">D</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>That implies there is at least one tuple </span
                ><span class="c2">t</span
                ><span>&nbsp;that is from the body of Q</span
                ><span class="c4">2</span><span>&nbsp;and the body of Q</span
                ><span class="c4">1</span
                ><span>&nbsp;which can be mapped to database </span
                ><span class="c2">D</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>If tuple </span><span class="c2">t</span
                ><span>&nbsp;is from the body of Q</span
                ><span class="c4">2</span><span>&nbsp;and Q</span
                ><span class="c4">1</span><span>, that means </span
                ><span class="c2">t &isin; Q</span><span class="c2 c4">2</span
                ><span class="c2">(D) </span><span>and</span
                ><span class="c2">&nbsp;t &isin; Q</span
                ><span class="c2 c4">1</span><span class="c2">(D)</span
                ><span class="c5 c8">, respectively.</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_gfnlnnezftbe-0 start">
            <li class="c3 li-bullet-0">
                <span
                    >That&rsquo;s amazing! So if we find a homomorphism from
                    Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span
                ><span class="c5 c8"
                    >, we can basically solve CONT, and in turn, EQUIV.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >One small problem though: deciding whether a homomorphism
                    exists is NP-complete.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_gfnlnnezftbe-1 start">
            <li class="c13 li-bullet-0">
                <span class="c34">Why it&rsquo;s NP</span
                ><span class="c5 c8"
                    >: iterate through all possible substitutions, looking for a
                    valid homomorphism</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c34">Why it&rsquo;s NP-hard</span
                ><span>: reduction from BQE(</span><span class="c10">CQ</span
                ><span class="c5 c8">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_gfnlnnezftbe-2 start">
            <li class="c25 li-bullet-0">
                <span>You have queries Q</span><span class="c4">1</span
                ><span>&nbsp;and Q</span><span class="c5 c4 c62">2</span>
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >If you have an algorithm that can find homomorphisms in
                    polynomial time, you can find a homomorphism from Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span
                ><span class="c5 c8">&nbsp;in polynomial time.</span>
            </li>
            <li class="c25 li-bullet-0">
                <span>You can also find a homomorphism from Q</span
                ><span class="c4">2</span><span>&nbsp;to D[Q</span
                ><span class="c4">1</span><span>] in polynomial time, or Q</span
                ><span class="c4">1</span><span>&nbsp;to D[Q</span
                ><span class="c4">2</span
                ><span
                    >] in polynomial time, so you could effectively use that to
                    solve BQE(</span
                ><span class="c10">CQ</span
                ><span class="c5 c8"
                    >) with Q upon D, where D is the canonical database of some
                    query.</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_gfnlnnezftbe-0">
            <li class="c3 li-bullet-0">
                <span
                    >Because of the homomorphism theory, if finding a
                    homomorphism for CQs is NP-complete, that means EQUIV(</span
                ><span class="c10">CQ</span><span>) and CONT(</span
                ><span class="c10">CQ</span
                ><span class="c5 c8">) are also NP-complete.</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_gfnlnnezftbe-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s a graph of all the problems we&rsquo;ve seen
                    so far in complexity groups:</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 493.45px;
                    height: 370.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image27.png"
                    style="
                        width: 493.45px;
                        height: 370.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.awhrssi7kv7g">
            <span class="c64 c8">Minimisation</span>
        </h2>
        <ul class="c7 lst-kix_tkt6ic8r9k8n-0 start">
            <li class="c3 li-bullet-0">
                <span>How do we </span><span class="c10">minimise </span
                ><span class="c5 c8">a conjunctive query?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>A conjunctive query Q</span><span class="c4">1</span
                ><span>&nbsp;is minimal if there is no other CQ Q</span
                ><span class="c4">2</span
                ><span class="c5 c8">&nbsp;such that:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_i3ogcr7tgue2-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;&equiv; Q</span><span class="c5 c62 c4">2</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Q</span><span class="c4">2</span
                ><span>&nbsp;has fewer body atoms than Q</span
                ><span class="c5 c62 c4">1</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_k94sm6n6qgwm-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So when we minimise a query, we&rsquo;re computing the
                    minimal queries that are still equivalent to the original
                    query.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k94sm6n6qgwm-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can exploit the homomorphism theory a little to help
                    us:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_k94sm6n6qgwm-1 start">
            <li class="c13 li-bullet-0">
                <span>Let&rsquo;s say we have a CQ Q</span
                ><span class="c4">1</span><span>(x</span
                ><span class="c4">1</span><span>, ..., x</span
                ><span class="c4">k</span><span>) :- body</span
                ><span class="c5 c62 c4">1</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Q</span><span class="c4">1</span
                ><span>&nbsp;is equivalent to Q</span><span class="c4">2</span
                ><span>(y</span><span class="c4">1</span><span>, ..., y</span
                ><span class="c4">k</span><span>) :- body</span
                ><span class="c4">2</span><span>&nbsp;where |body</span
                ><span class="c4">2</span><span>| &lt; |body</span
                ><span class="c4">1</span><span class="c5 c8">|</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Because they&rsquo;re equivalent, there&rsquo;s a
                    homomorphism from Q</span
                ><span class="c4">1</span><span>&nbsp;to Q</span
                ><span class="c4">2</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >But equivalency works both ways: there&rsquo;s also a
                    homomorphism from Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span><span class="c5 c8">!</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>But Q</span><span class="c4">2</span
                ><span>&nbsp;has less atoms than Q</span
                ><span class="c4">1</span><span>. If we go from Q</span
                ><span class="c4">1</span><span>&nbsp;to Q</span
                ><span class="c4">2</span><span>&nbsp;to Q</span
                ><span class="c4">1</span
                ><span class="c5 c8"
                    >&nbsp;again, we&rsquo;ll end up with less atoms than
                    before.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>In other words, this means there exists a query Q</span
                ><span class="c4">1</span><span>(x</span
                ><span class="c4">1</span><span>, ..., x</span
                ><span class="c4">k</span><span>) :- body</span
                ><span class="c4">3</span><span class="c5 c8">&nbsp;...</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>... such that body</span><span class="c4">3</span
                ><span>&nbsp;&sube; body</span><span class="c4">1</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_k94sm6n6qgwm-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This theorem, in a nutshell, states that all we need to do
                    is remove atoms from the body. No need for any weird
                    substitution!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_k94sm6n6qgwm-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s some pseudocode for minimisation:</span
                >
            </li>
        </ul>
        <a id="t.e15170207c40dceabe3bd6b2a4436d9e6f726d6f"></a><a id="t.17"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c28 c2">Minimization(</span
                            ><span class="c53 c2">Q(x) :- body</span
                            ><span class="c28 c2">)<br /></span
                            ><span class="c28 c43 c10">Repeat until</span
                            ><span class="c28 c2 c11 c115"
                                >&nbsp;no change</span
                            >
                        </p>
                        <p class="c58">
                            <span class="c28 c2"
                                >&nbsp; choose an atom &alpha; &isin; body<br />
                                &nbsp;</span
                            ><span class="c28 c43 c10">if </span
                            ><span class="c28 c2"
                                >there is a containment mapping from </span
                            ><span class="c53 c2">Q(x) :- body</span
                            ><span class="c28 c2">&nbsp;to </span
                            ><span class="c53 c2"
                                >Q(x) :- body &#8726; {&alpha;}</span
                            ><span class="c28 c2"
                                ><br />
                                &nbsp;</span
                            ><span class="c28 c43 c10">then </span
                            ><span class="c28 c2"
                                >body := body &#8726; {&alpha;}<br /></span
                            ><span class="c28 c43 c10">Return </span
                            ><span class="c53 c2">Q(x) :- body</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d5v2sxnqpozh-0 start">
            <li class="c3 li-bullet-0">
                <span class="c10">Note</span><span>:</span
                ><span
                    >&nbsp;if there is a query homomorphism from Q(x) :- body to
                    Q(x) :- body \ {&alpha;}, then the two queries are
                    equivalent because there is a trivial containment mapping
                    from the latter to the former query </span
                ><span class="c36"
                    >(it&rsquo;s simply the identity function)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d5v2sxnqpozh-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >What was that? You wanna see this in action?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here you go:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 520.12px;
                    height: 225.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image20.png"
                    style="
                        width: 520.12px;
                        height: 225.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_p8buy87ly5cq-0 start">
            <li class="c3 li-bullet-0">
                <span
                    >You might think you can reduce it further by turning R(x,b)
                    to R(a,b) through x &rarr; a, but that&rsquo;s not valid
                    because x is a distinguished variable </span
                ><span class="c36">(it&rsquo;s in the output)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_p8buy87ly5cq-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s a question: does the order in which we remove
                    the atoms matter?</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_p8buy87ly5cq-1 start">
            <li class="c13 li-bullet-0"><span class="c5 c8">No.</span></li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >No matter what path you&rsquo;re on, if you&rsquo;re not at
                    a minimal query, there will always be a more minimal query
                    below you that you&rsquo;re equivalent to.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Because of the theorem above, that &ldquo;more
                    minimal&rdquo; query is just the query you&rsquo;re on, but
                    with lesser atoms.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >So it&rsquo;s impossible to hit a &ldquo;dead end&rdquo;
                    when going through this minimisation tree </span
                ><span class="c36"
                    >(unless you&rsquo;re at a minimal query)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_p8buy87ly5cq-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s another theorem to think about:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_p8buy87ly5cq-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s say you have a conjunctive query Q.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>You have two more, Q</span><span class="c4">1</span
                ><span>&nbsp;and Q</span><span class="c4">2</span
                ><span class="c5 c8"
                    >, that are minimal conjunctive queries.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>If Q</span><span class="c4">1</span
                ><span>&nbsp;&equiv; Q and Q</span><span class="c4">2</span
                ><span>&nbsp;&equiv; Q, then Q</span><span class="c4">1</span
                ><span>&nbsp;and Q</span><span class="c4">2</span
                ><span class="c5 c8">&nbsp;are isomorphic.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >That means they&rsquo;re identical, and that they only
                    differ by variable renaming.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>So semantically, Q</span><span class="c4">1</span
                ><span>&nbsp;and Q</span><span class="c4">2</span
                ><span class="c5 c8">&nbsp;are exactly the same.</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_p8buy87ly5cq-0">
            <li class="c3 li-bullet-0">
                <span
                    >Because of this theorem, every query has one and only one
                    minimal conjunctive query </span
                ><span class="c36">(semantically speaking)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>This is called the </span><span class="c10">core </span
                ><span class="c5 c8">of Q.</span>
            </li>
        </ul>
        <h1 class="c23" id="h.mjbylyfzlbu">
            <span class="c40 c8">Query Processing</span>
        </h1>
        <ul class="c7 lst-kix_jt25ldh2j6h1-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you&rsquo;ve already done the coursework, the first half
                    of this topic should be straightforward.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >When you perform a query on a database, it goes through
                    different levels:</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 411.89px;
                    height: 304.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image7.png"
                    style="
                        width: 411.89px;
                        height: 304.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_3bv146qh8av5-0 start">
            <li class="c3 li-bullet-0">
                <span>When the query is parsed, a </span
                ><span class="c10">logical query plan </span
                ><span class="c5 c8">is created.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is a plan of the relational algebra operators to use
                    to perform your query.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">It&rsquo;s abstract and high-level.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Once that is made, a </span
                ><span class="c10">physical query plan </span
                ><span class="c5 c8">is created.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is a plan of all the algorithms the RDMS is going to
                    use to perform all those logical operations. It&rsquo;s
                    low-level.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Optimisation takes place in both of these plans; they both
                    need optimising, but they are optimised in different
                    ways.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 281.28px;
                    height: 301.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image44.png"
                    style="
                        width: 281.28px;
                        height: 301.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.75wonmsunkoz">
            <span class="c64 c8">Logical query plans</span>
        </h2>
        <ul class="c7 lst-kix_8szcteqiot7f-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In order to optimise, we need to begin with an inefficient
                    &ldquo;starting point&rdquo; that we need to improve
                    upon.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>This is our </span><span class="c10">canonical form</span
                ><span class="c5 c8"
                    >, which is a standard way of representing a query as a
                    logical query plan.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 365.5px;
                    height: 255.85px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image32.png"
                    style="
                        width: 365.5px;
                        height: 255.85px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_ur1cwng2kcgt-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In a canonical query plan, all the projects sit at the top,
                    the selects are all daisy chained using &ldquo;and&rdquo;
                    operators, and all the relations are connected left-deep
                    using products.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.47pfd9yok2c9">
            <span class="c8 c66 c37">Cost Estimation</span>
        </h3>
        <ul class="c7 lst-kix_mo17s2wha19t-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can estimate the cost of a plan by giving a cost to each
                    operator in terms of the size, and the number of unique
                    values, of the relations on which it operates.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Then, we can pick query plans that minimise this
                    cost.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">We calculate cost using:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_mo17s2wha19t-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">T(R)</span
                ><span class="c5 c8"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-
                    Number of tuples in relation R (cardinality of R)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2"
                    >V(R,
                    A)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                ><span class="c5 c8"
                    >- Number of distinct values for attribute A in relation
                    R</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_mo17s2wha19t-0">
            <li class="c3 li-bullet-0">
                <span class="c34">Note</span><span>: for any relation R, </span
                ><span class="c2">V(R, A) &lt; T(R)</span
                ><span class="c5 c8">&nbsp;for all attributes A on R</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s how we can estimate the cost of each
                    operator:</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <a id="t.11fc86263da4db42ddf2f30c4a10430a8802571a"></a><a id="t.18"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Scan</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11">T(scan(R)) = T(R)</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span>For all </span><span class="c2">A</span
                            ><span>&nbsp;in </span><span class="c2">R</span
                            ><span>, </span
                            ><span class="c5 c2 c11"
                                >V(scan(R), A) = V(R, A)</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Product</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11"
                                >T(R &#10005; S) = T(R)T(S)</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span>For all </span><span class="c2">A </span
                            ><span>in</span
                            ><span class="c5 c2 c11"
                                >&nbsp;R, V(R &#10005; S, A) = V(R,A)</span
                            >
                        </p>
                        <p class="c17">
                            <span>For all </span><span class="c2">B </span
                            ><span>in</span
                            ><span class="c5 c2 c11"
                                >&nbsp;S, V(R &#10005; S, B) = V(S,B)</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Projection</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(&pi;</span
                            ><span class="c2 c4">A</span
                            ><span class="c5 c2 c11">(R)) = T(R)</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span>For all</span><span class="c2">&nbsp;A </span
                            ><span>in</span><span class="c2">&nbsp;R </span
                            ><span>and</span><span class="c2">&nbsp;&pi;</span
                            ><span class="c2 c4">A</span
                            ><span class="c2">(R), V(&pi;</span
                            ><span class="c2 c4">A</span
                            ><span class="c5 c2 c11">(R),A) = V(R,A)</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span
                                >This assumes that the projection does not
                                remove duplicate tuples </span
                            ><span class="c8 c61 c36"
                                >(so value count remains the same)</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c6">Selection attr=value</span>
                        </p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(&sigma;</span
                            ><span class="c2 c4">A=c</span
                            ><span class="c5 c2 c11">(R)) = T(R) / V(R,A)</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c2">V(&sigma;</span
                            ><span class="c2 c4">A=c</span
                            ><span class="c5 c2 c11">(R),A) = 1</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c5 c8"
                                >Assumes all values of A appear with equal
                                frequency</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Selection</span></p>
                        <p class="c17"><span class="c5 c6">attr=attr</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(&sigma;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c5 c2 c11"
                                >(R)) = T(R) / max(V(R,A), V(R,B))</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c2">V(&sigma;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c2">(R),A) = V(&sigma;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c5 c2 c11"
                                >(R),B) = min(V(R,A), V(R,B))</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c5 c8"
                                >Assumes that all values of A and B appear with
                                equal frequency</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c8"></span></p>
                        <p class="c17">
                            <span
                                >Note: for all other attributes X of R, you can
                                reduce it to </span
                            ><span class="c2">V(R, X)</span
                            ><span class="c5 c8"
                                >&nbsp;because it&rsquo;s not being acted
                                upon</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Selection</span></p>
                        <p class="c17"><span class="c5 c6">Inequality</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(&sigma;</span
                            ><span class="c2 c4">A&lt;c</span
                            ><span class="c2">(R)) = T(R) / 3 </span
                            ><span class="c8 c61 c36"
                                >(as a rule of thumb)</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c5 c8"
                                >May be different if range of values and
                                distribution is known</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Selection</span></p>
                        <p class="c17">
                            <span class="c5 c6">Conjunction / Disjunction</span>
                        </p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(&sigma;</span
                            ><span class="c2 c4">A=c1&and;B=c2</span
                            ><span class="c2">(R)) =</span
                            ><img
                                src="assets/advanced-databases-part-ii/image2.png"
                            /><span class="c5 c2 c11">&nbsp;(and)</span>
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c2">T(&sigma;</span
                            ><span class="c2 c4">A=c1&or;B=c2</span
                            ><span class="c2">(R)) =</span
                            ><img
                                src="assets/advanced-databases-part-ii/image3.png"
                            /><span class="c2 c31">+</span
                            ><img
                                src="assets/advanced-databases-part-ii/image4.png"
                            /><span class="c5 c2 c11">&nbsp;(or)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c69" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Join</span></p>
                    </td>
                    <td class="c30" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c2">T(R&#8904;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c5 c2 c11"
                                >S) = T(R)T(S) / max(V(R,A), V(S,B))</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c2">T(R&#8904;</span
                            ><span class="c2 c4">R1=S1&and;R2=S2</span
                            ><span class="c2">S) =</span
                            ><img
                                src="assets/advanced-databases-part-ii/image5.png"
                            />
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c5 c2 c11"
                                >T(R)T(S) / max(V(R,R1), V(S,S1))</span
                            >
                        </p>
                        <p class="c17 c55"><span class="c5 c2 c11"></span></p>
                        <p class="c17">
                            <span class="c2">V(R&#8904;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c2">S,A) = V(R&#8904;</span
                            ><span class="c2 c4">A=B</span
                            ><span class="c5 c2 c11"
                                >S,B) = min(V(R,A), V(S,B))</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_uep88mk7swvk-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Throughout these formulae, we&rsquo;ve assumed that all
                    values have equal frequency.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However this is unrealistic and can give us inaccurate
                    estimates.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can calculate cost based on some other approaches based
                    on histograms:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_uep88mk7swvk-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">Equal-width</span
                ><span
                    >: divide the attribute domain into equal parts, give tuple
                    counts for each </span
                ><span class="c8 c61 c36"
                    >(e.g. split integer attribute A into categories 1-10,
                    11-20, 21-30, give tuple counts for each)</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 298px;
                    height: 225px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image16.png"
                    style="
                        width: 602px;
                        height: 225px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_uep88mk7swvk-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Equal-height</span
                ><span
                    >: sort tuples by attribute, divide into equal-sized sets of
                    tuples and give maximum value for each set </span
                ><span class="c8 c61 c36"
                    >(e.g. integer attribute A is split into categories 1-5,
                    6-12, 13-30, where each category has the same number of
                    tuples)</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 304px;
                    height: 225px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image16.png"
                    style="
                        width: 602px;
                        height: 225px;
                        margin-left: -298px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_uep88mk7swvk-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Most-frequent values</span
                ><span class="c5 c8"
                    >: give tuple counts for top-n most frequent values</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_uep88mk7swvk-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s an example of equal-width:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_uep88mk7swvk-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We have a relation R(A, B, C) with 10,000 tuples.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The following is an equal-width histogram on A:</span
                >
            </li>
        </ul>
        <a id="t.bc76dbea96e44896fe05fe51f8e83c1b1607efd6"></a><a id="t.19"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Range</span></p>
                    </td>
                    <td class="c103" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">[1,10]</span></p>
                    </td>
                    <td class="c113" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">[11,20]</span></p>
                    </td>
                    <td class="c76" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">[21,30]</span></p>
                    </td>
                    <td class="c100" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">[31,40]</span></p>
                    </td>
                    <td class="c100" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">[41,50]</span></p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c6">Tuples in range</span>
                        </p>
                    </td>
                    <td class="c103" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">50</span></p>
                    </td>
                    <td class="c113" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">2,000</span></p>
                    </td>
                    <td class="c76" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">2,000</span></p>
                    </td>
                    <td class="c100" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">3,000</span></p>
                    </td>
                    <td class="c100" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c8">2,950</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_bzyd2m7php8x-0 start">
            <li class="c13 li-bullet-0">
                <span>What is </span><span class="c2">T(&sigma;</span
                ><span class="c2 c4">A=10</span><span class="c2">(R))?</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We need to find how many tuples are equal to 10 in the
                    range [1,10], which we can do by doing 50 * (1 / 10)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Therefore the answer will be 5 tuples.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.8tj025sdsqzi">
            <span class="c8 c66 c37">Query Optimisation</span>
        </h3>
        <ul class="c7 lst-kix_5k0h6zywo44-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">How do we optimise a query?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">We go through these steps:</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ol class="c7 lst-kix_gjrbekhkw1gv-0 start" start="1">
            <li class="c3 li-bullet-0">
                <span class="c5 c6">Start with canonical form</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_48vtofdec19w-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Let&rsquo;s start with a database:</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 397px;
                    height: 43.91px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image11.png"
                    style="
                        width: 397px;
                        height: 43.91px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_y3ywq6p9wcht-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Here is our canonical form tree of a query:</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 407.8px;
                    height: 303.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image29.png"
                    style="
                        width: 417.21px;
                        height: 320.75px;
                        margin-left: -9.41px;
                        margin-top: -17.25px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_9b1k15dta00-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In case you haven&rsquo;t noticed, everything is going to
                    be from the slides.</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_gjrbekhkw1gv-0" start="2">
            <li class="c3 li-bullet-0">
                <span class="c5 c6">Move &sigma; operators down the tree</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_yb9im8al1gcd-0 start">
            <li class="c13 li-bullet-0">
                <span>We move the &sigma;</span><span class="c4">attr=val</span
                ><span class="c5 c8"
                    >&nbsp;operations just above the relations that contain the
                    attribute.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>We move the &sigma;</span><span class="c4">attr=attr</span
                ><span class="c5 c8"
                    >&nbsp;operations just above the product that introduces
                    those two attributes to the relation.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 433.5px;
                    height: 268.17px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image59.png"
                    style="
                        width: 433.5px;
                        height: 268.17px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ol class="c7 lst-kix_gjrbekhkw1gv-0" start="3">
            <li class="c3 li-bullet-0">
                <span class="c5 c6"
                    >Reorder subtrees to put most restrictive &sigma;
                    first</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_ocefh746tdxw-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Reorder the subtrees to put the most restrictive relations
                    (fewest tuples) first</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >For the sake of simplicity, we can keep it left-deep</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 399.5px;
                    height: 245.05px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image31.png"
                    style="
                        width: 399.5px;
                        height: 245.05px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ol class="c7 lst-kix_gjrbekhkw1gv-0" start="4">
            <li class="c3 li-bullet-0">
                <span class="c5 c6"
                    >Combine &times; and &sigma; to create &#10781;</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_1y7aztwvj7dr-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If there is a product and a select above it, we can convert
                    it into a join.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 400.5px;
                    height: 243.9px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image22.png"
                    style="
                        width: 417.13px;
                        height: 258.45px;
                        margin-left: -16.63px;
                        margin-top: -14.55px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ol class="c7 lst-kix_gjrbekhkw1gv-0" start="5">
            <li class="c3 li-bullet-0">
                <span class="c5 c6">Move &pi; operators down the tree</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_m6dei3k61ujx-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We can use projections to only project the attributes we
                    need.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >By reducing the degree (or arity) of the relations, we can
                    use fewer buffer frames.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 409.49px;
                    height: 257.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image38.png"
                    style="
                        width: 409.49px;
                        height: 257.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v2t238o0k783-0 start">
            <li class="c3 li-bullet-0">
                <span
                    >After all that, we&rsquo;ve successfully optimised our
                    logical query plan!</span
                >
            </li>
        </ul>
        <a id="id.beeau8cavgvs"></a>
        <h2 class="c52" id="h.6m1icxg0w7lv">
            <span class="c64 c8">Physical query plans</span>
        </h2>
        <ul class="c7 lst-kix_clzj0zpnn4rt-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So now we have an optimised logical query plan.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">How do we execute these operations?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s a wide range of algorithms to choose from:
                    what are they and which do we pick?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">It depends on stuff like:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_clzj0zpnn4rt-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Structure of relations</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Size of relations</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Presence of indexes and hashes</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_clzj0zpnn4rt-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >To pick the best algorithm, we need to quantise its
                    effectiveness.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Therefore we need a &ldquo;cost&rdquo;.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The cost can be the number of disk accesses the algorithm
                    makes.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We make the assumption that the arguments of the operator
                    (all the relations and stuff) are on disk, and the results
                    are on main memory.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We won&rsquo;t care about memory accesses because
                    they&rsquo;re so much faster than disk accesses, it&rsquo;s
                    practically negligible.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_clzj0zpnn4rt-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here are the cost parameters we will be using:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_clzj0zpnn4rt-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">M</span
                ><span class="c5 c8"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-
                    Main memory available for buffers</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10">S(R)</span
                ><span class="c5 c8"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Size of a
                    tuple of relation R</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10">B(R)</span
                ><span class="c5 c8"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Blocks
                    used to store relation R</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10"
                    >T(R)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                ><span class="c5 c8"
                    >- Number of tuples in relation R (cardinality of R)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c10"
                    >V(R,a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                ><span>- Number of distinct values for attribute </span
                ><span class="c2">a</span
                ><span class="c5 c8">&nbsp;in relation R</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_clzj0zpnn4rt-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >On disk, we don&rsquo;t just store a huge bank of tuples in
                    one giant blob.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We store tuples into blocks, and then we can fetch those
                    blocks instead of individual tuples.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">There&rsquo;s two ways of doing this:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_vdmx66tczupd-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c10">Clustered File</span
                ><span class="c5 c8">&nbsp;(non-clustered relations)</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_clzj0zpnn4rt-2 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Tuples from different relations, that are joined on
                    particular attribute values, are put together into the same
                    blocks.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2">[</span><span class="c2 c22">R1</span
                ><span class="c2">&nbsp;</span><span class="c2 c22">R2</span
                ><span class="c2">&nbsp;</span><span class="c1">S1</span
                ><span class="c2">&nbsp;</span><span class="c1">S2</span
                ><span class="c2">] [</span><span class="c2 c22">R3</span
                ><span class="c2">&nbsp;</span><span class="c2 c22">R4</span
                ><span class="c2">&nbsp;</span><span class="c1">S3</span
                ><span class="c2">&nbsp;</span><span class="c1">S4</span
                ><span class="c5 c2 c11">]</span>
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >They might not be joined; the point is, all the tuples in a
                    block don&rsquo;t have to be from the same relation.</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_kjyyes8275qh-0 start" start="2">
            <li class="c13 li-bullet-0">
                <span class="c10">Clustered Relation</span
                ><span class="c5 c8">&nbsp;(also called contiguous)</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_ag8m9zfc0j27-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Tuples from the same relation are also put into the same
                    blocks.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2">[</span><span class="c2 c22">R1</span
                ><span class="c2">&nbsp;</span><span class="c2 c22">R2</span
                ><span class="c2">&nbsp;</span><span class="c2 c22">R3</span
                ><span class="c2">&nbsp;</span><span class="c2 c22">R4</span
                ><span class="c2">] [</span><span class="c1">S1</span
                ><span class="c2">&nbsp;</span><span class="c1">S2</span
                ><span class="c2">&nbsp;</span><span class="c1">S3</span
                ><span class="c2">&nbsp;</span><span class="c1">S4</span
                ><span class="c2">]</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The point is, all tuples in a block are from the same
                    relation.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_iwh93xbjgdxv-0 start">
            <li class="c3 li-bullet-0">
                <span>We can also get something called a </span
                ><span class="c10">clustering index</span
                ><span class="c5 c8"
                    >, which allows tuples to be read in an order that
                    corresponds to physical order.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This index is stored on disk, and simply points to the
                    blocks that contain the tuples we want to get.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 335.79px;
                    height: 129.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image45.png"
                    style="
                        width: 335.79px;
                        height: 129.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c73" id="h.4fyz0l52p1zo">
            <span class="c8 c66 c37">Scanning</span>
        </h3>
        <ul class="c7 lst-kix_cl50vpn7163m-0 start">
            <li class="c3 li-bullet-0">
                <span class="c10">Scanning </span
                ><span class="c5 c8"
                    >is exactly what you think it is: an iteration over all
                    tuples in a relation R, checking for tuples that satisfy
                    some predicate.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >You could use scanning for certain binary queries.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It can also be used by the later algorithms to fetch blocks
                    that hold needed tuples.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">There&rsquo;s two kinds of scanning:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_pcgpnvegl0ei-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c6">Table scan</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_lfq59v9af4x6-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >All the tuples we want to scan are in blocks.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span>We already know those blocks </span
                ><span class="c36"
                    >(perhaps they&rsquo;re stored in some kind of table)</span
                ><span class="c5 c8"
                    >, but we need to load them from disk one at a time.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The number of disk accesses is B(R), because we need to
                    load all the blocks that have relation R records.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >However, if R is not clustered, there is a worst-case
                    scenario.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8">What if our blocks are like this?</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_lfq59v9af4x6-1 start">
            <li class="c58 c63 c83 li-bullet-0">
                <span class="c2">[</span><span class="c2 c22">R1</span
                ><span class="c2">, </span><span class="c1">S1, S2, S3</span
                ><span class="c5 c2 c11">]</span>
            </li>
            <li class="c58 c83 c63 li-bullet-0">
                <span class="c2">[</span><span class="c2 c22">R2</span
                ><span class="c2">, </span><span class="c1">S4, S5, S6</span
                ><span class="c5 c2 c11">]</span>
            </li>
            <li class="c58 c83 c63 li-bullet-0">
                <span class="c2">[</span><span class="c2 c22">R3</span
                ><span class="c2">, </span><span class="c1">S7, S8, S9</span
                ><span class="c5 c2 c11">]</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_lfq59v9af4x6-0">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s only one relation from R in every
                    block!</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >Therefore the number of disk accesses will be T(R), because
                    we&rsquo;ll need to read one block for every tuple.</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_pcgpnvegl0ei-0" start="2">
            <li class="c13 li-bullet-0">
                <span class="c5 c6">Index scan</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_3xr0ujr487j-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >We have an index on some attribute of R.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Therefore, we can use that index to find all blocks holding
                    R.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >The I/O cost is a little higher: it&rsquo;s B(R) +
                    B(I</span
                ><span class="c4">R</span
                ><span class="c5 c8">), if R is clustered.</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >However, since the number of blocks holding R is way
                    greater than the number of blocks holding the index, we can
                    treat it as just B(R).</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >By the same logic as table scan, the I/O cost can be T(R)
                    if R is not clustered.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.5mzvndl8ub5s">
            <span class="c8 c66 c37">One-Pass Algorithms</span>
        </h3>
        <ul class="c7 lst-kix_8iqitgeus8oz-0 start">
            <li class="c3 li-bullet-0">
                <span class="c10">One-Pass </span
                ><span class="c5 c8"
                    >algorithms are algorithms that only read from disk
                    once.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It uses stuff like buffers and accumulators.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">There&rsquo;s three main categories:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_ujgqnkpfzh5a-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c6">Unary, tuple at a time</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_u0rbmowccmdu-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >This is used for selects and projects.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >For every block of R, the block is read into the input
                    buffer.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The operation (select or project) is then performed on
                    every tuple in that block.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The block is then moved to the output buffer (which will
                    become our result).</span
                >
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <a id="t.3d400b635a1e1ecfcb0d34146803403433bc47a6"></a><a id="t.20"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c28 c2">foreach </span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">of</span
                            ><span class="c28 c2"
                                >&nbsp;R:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2"
                                >&nbsp;input buffer<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perform
                                operation (</span
                            ><span class="c53 c2">select</span
                            ><span class="c28 c2">, project) </span
                            ><span class="c53 c2">on</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">each</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2"
                                ><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move
                                selected/projected tuples </span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2">&nbsp;output buffer</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 371.5px;
                    height: 103.47px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image56.png"
                    style="
                        width: 371.5px;
                        height: 103.47px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_1kvegu1nel1x-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >B(R) and T(R) disk access depends on clustering.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >If we have a select operator that compares an attribute to
                    a constant, and there is an index for that attribute,
                    there&rsquo;s going to be way less disk access.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The good thing about this algorithm is that you only really
                    need one block of memory, and that&rsquo;s for the input
                    operation.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Well, that&rsquo;s not including the output buffer, but
                    still...</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_ujgqnkpfzh5a-0" start="2">
            <li class="c13 li-bullet-0">
                <span class="c5 c6">Unary, full-relation</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_9h0olroxpwat-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >This is used for duplicate elimination and grouping.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >This is like unary tuple at a time, but now we have an
                    accumulator!</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The accumulator can store tuples, or integer values, or
                    anything, really.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >For every block R, we copy the block to the input
                    buffer.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Depending on the tuples in the block, we update the
                    accumulator and move tuples to the output buffer.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 381.13px;
                    height: 158.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image18.png"
                    style="
                        width: 381.13px;
                        height: 158.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_h6g0uhtitwng-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >To do duplicate elimination, store all the
                    &ldquo;seen&rdquo; tuples in the accumulator. If we find a
                    tuple that&rsquo;s already in the accumulator, don&rsquo;t
                    send it into the output. Otherwise, put it in the output
                    buffer.</span
                >
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <a id="t.85c3e3a22372357bd4af2bd0e7362065f0ac3be7"></a><a id="t.21"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c28 c2">foreach </span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">of</span
                            ><span class="c28 c2"
                                >&nbsp;R:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2"
                                >&nbsp;input buffer<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach </span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2"
                                ><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">if</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">is</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">not</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2"
                                >&nbsp;accumulator<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2"
                                >&nbsp;accumulator
                                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2">&nbsp;output buffer</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_h6g0uhtitwng-0">
            <li class="c25 li-bullet-0">
                <span>We require at least </span
                ><span class="c2">B(&delta;(R)) + 1</span
                ><span class="c5 c8">&nbsp;blocks of memory:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_h6g0uhtitwng-1 start">
            <li class="c58 c83 c63 li-bullet-0">
                <span class="c5 c8"
                    >1 block of memory for the input buffer</span
                >
            </li>
            <li class="c58 c83 c63 li-bullet-0">
                <span class="c2">B(&delta;(R))</span
                ><span>&nbsp;for all the &ldquo;seen&rdquo; tuples </span
                ><span class="c8 c61 c36">(delta means distinct tuples)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_h6g0uhtitwng-0">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >The accumulator can be implemented as a data structure,
                    like a tree or a hash.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >If we have less memory than that, we&rsquo;ll have to
                    thrash </span
                ><span class="c36">(dip into the disk space a bit)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8">The cost is still B(R).</span>
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_h6g0uhtitwng-0">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >We can also do things like grouping, so min, max, sum,
                    count, avg</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span>Our accumulator can just be a number or something.</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_ujgqnkpfzh5a-0" start="3">
            <li class="c13 li-bullet-0">
                <span class="c5 c6">Binary, full-relation</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_pyjfdmu1qmct-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >This is like an &ldquo;applied&rdquo; version of unary,
                    full-relation.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >It works by reading one relation and loading it into an
                    index, then reading another relation with access to that
                    index.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s say we have two relations: R and S, and S is
                    smaller than R.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8">Our accumulator is now our index!</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >We read all blocks in S, and store them in our index.</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Then we read all blocks in R, using our index to construct
                    new tuples for the output.</span
                >
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <a id="t.fe22463378a38e4ee294ea1fe898e4e2d877e229"></a><a id="t.22"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c28 c2">foreach </span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">of</span
                            ><span class="c28 c2"
                                >&nbsp;S:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">read</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2"
                                ><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">add</span
                            ><span class="c28 c2">&nbsp;tuples </span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2"
                                >&nbsp;search structure<br />foreach </span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">of</span
                            ><span class="c28 c2"
                                >&nbsp;R<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2"
                                >&nbsp;input buffer<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach </span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">block</span
                            ><span class="c28 c2"
                                ><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;find </span
                            ><span class="c53 c2">matching</span
                            ><span class="c28 c2">&nbsp;tuples </span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2"
                                >&nbsp;search structure<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;construct </span
                            ><span class="c53 c2">new</span
                            ><span class="c2 c28">&nbsp;tuples </span
                            ><span class="c2 c53">and</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">copy</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c53 c2">to</span
                            ><span class="c28 c2">&nbsp;output</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_pyjfdmu1qmct-0">
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >We can use this for joins: R(X,Y) and S(Y,Z).</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >The search index will be keyed on Y, and for every tuple in
                    R, we search for a matching tuple in the search index </span
                ><span class="c36">(a tuple belonging to S)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <h3 class="c73" id="h.yw0cyn8tbgso">
            <span class="c8 c66 c37">Nested-Loop Joins</span>
        </h3>
        <ul class="c7 lst-kix_uf1u0iws68xg-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >A nested-loop join uses a nested loop to iterate through
                    all the tuples in two relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>This is also known as an </span
                ><span class="c10">iteration join</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >For this example, we&rsquo;ll say we want to join relations
                    R1 and R2 on attribute C:</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <a id="t.6ba898658ac3c50340fceb677cd4cf9a7c0aa47c"></a><a id="t.23"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c2 c111">foreach</span
                            ><span class="c28 c2">&nbsp;tuple r1 </span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2"
                                >&nbsp;R1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c111 c2">foreach</span
                            ><span class="c28 c2">&nbsp;tuple r2 </span
                            ><span class="c53 c2">in</span
                            ><span class="c28 c2"
                                >&nbsp;R2<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
                            ><span class="c53 c2">if</span
                            ><span class="c28 c2">&nbsp;r1.C = r2.C </span
                            ><span class="c53 c2">then</span
                            ><span class="c28 c2">&nbsp;</span
                            ><span class="c111 c2">output</span
                            ><span class="c28 c2">&nbsp;r1,r2 pair</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">These factors could affect cost:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Tuples of relation stored physically together
                    (clustered)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Relations sorted by join attribute</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Indexes exist</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We&rsquo;re going to be doing a bunch of examples, so
                    here&rsquo;s some stats to work with:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">T(R1) = 10,000 (number of tuples)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">T(R2) = 5,000</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >S(R1) = S(R2) = 1/10 block (size of tuple in
                    relation)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">M = 101 blocks (memory)</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #1</span
                ><span class="c5 c8">: Tuple-based nested loop join</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >What&rsquo;s the total cost if we used the nested-loop
                    join?</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >The relations aren&rsquo;t contiguous right now, so
                    there&rsquo;s one disk access per tuple.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Cost to read each tuple in R1 = cost to read tuple + cost
                    to read all of R2</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Total cost = </span
                ><span class="c5 c8"
                    >all tuples in R1 * cost to read one tuple in R1</span
                >
            </li>
        </ul>
        <p class="c58 c86 c102">
            <span class="c5 c2 c11"
                >&nbsp; &nbsp; &nbsp;= T(R1) * (1 + T(R2))</span
            >
        </p>
        <p class="c58 c86">
            <span class="c5 c2 c11"
                >&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp; &nbsp; = 10,000 * (1 + 5,000)</span
            >
        </p>
        <p class="c58 c86 c102">
            <span class="c2">&nbsp; &nbsp; &nbsp;= </span
            ><span class="c0 c51 c11">50,010,000 disk accesses</span>
        </p>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Phew! That&rsquo;s a lot of disk accesses!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Can we reduce it? Can we make it better?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Yes, we can.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Right now, we&rsquo;re wasting so much space.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We only need two blocks of memory to perform this
                    algorithm, yet we have 101 blocks at our disposal.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can read a chunk of 100 blocks of R1, iterate through
                    that, and then read the next chunk of 100 blocks and so
                    on.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #2</span
                ><span class="c5 c8">: Block-based nested loop join</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_4t5ku2zhh2ps-1 start">
            <li class="c13 li-bullet-0">
                <span>Cost to read one 100-block chunk of R1 </span
                ><span class="c5 c2 c11">= 100 / S(R1)</span>
            </li>
        </ul>
        <p class="c58 c86 c109">
            <span>&nbsp; &nbsp; &nbsp;</span
            ><span class="c5 c2 c11">= 1,000 disk accesses</span>
        </p>
        <ul class="c7 lst-kix_gs91pbmc53om-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Remember, we&rsquo;re not contiguous, so it&rsquo;s 1 disk
                    access per tuple.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >But we do want to fill our memory blocks with just R1
                    tuples, so we fetch tuples until we fill our blocks.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Cost to process each chunk </span
                ><span class="c5 c2 c11">= 1,000 + T(R2) = 6,000</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span
                ><span class="c5 c2 c11"
                    >= all chunks to read * cost to process each chunk</span
                >
            </li>
        </ul>
        <p class="c58 c68">
            <span class="c2">&nbsp; = T(R1) / 1,000 * 6,000 = </span
            ><span class="c0">60,000</span
            ><span class="c51 c8 c32 c56">&nbsp;disk accesses</span>
        </p>
        <p class="c41 c77"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_7t2mf27qxu16-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Well, it is a huge improvement.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Did you know that we can do even better?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If we reverse the join order, so replace R1 with R2 and
                    vice versa, we can improve.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_7t2mf27qxu16-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #3</span
                ><span class="c5 c8">: Join reordering</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_7t2mf27qxu16-1 start">
            <li class="c13 li-bullet-0">
                <span>Cost to read one 100-block chunk of R2 </span
                ><span class="c5 c2 c11">= 100 / S(R2)</span>
            </li>
        </ul>
        <p class="c58 c86 c109">
            <span>&nbsp; &nbsp; &nbsp;</span
            ><span class="c2">= 1,000 disk accesses</span>
        </p>
        <ul class="c7 lst-kix_gs91pbmc53om-0">
            <li class="c13 li-bullet-0">
                <span>Cost to process each chunk </span
                ><span class="c5 c2 c11">= 1,000 + T(R1) = 11,000</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span
                ><span class="c2">= T(R2) / 1,000 * 11,000 = </span
                ><span class="c0">55,000</span
                ><span class="c51 c8 c32 c56">&nbsp;disk accesses</span>
            </li>
        </ul>
        <p class="c41"><span class="c51 c8 c32 c56"></span></p>
        <ul class="c7 lst-kix_642esjh7k7s7-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Alright, it&rsquo;s somewhat better.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">But what if I told you...</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>... we can do </span><span class="c45">even better</span
                ><span class="c5 c8">?!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If our relations are contiguous (clustered), we can do
                    things even faster.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_re6mdiwbuvig-0 start">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #4</span
                ><span class="c5 c8">: Contiguous relations</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_re6mdiwbuvig-1 start">
            <li class="c13 li-bullet-0">
                <span>B(R1) = 1,000 </span
                ><span class="c8 c61 c36">(number of blocks in R1)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>B(R2) = 500 </span
                ><span class="c8 c61 c36">(number of blocks in R2)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Cost to read one 100-block chunk of R2 = 100 disk accesses </span
                ><span class="c8 c61 c36"
                    >(now it&rsquo;s contiguous, so one block = one disk
                    access)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Cost to process each chunk </span
                ><span class="c5 c2 c11">= 100 + B(R1) = 1,100</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span
                ><span class="c2">= B(R2) / 100 * 1,100 = </span
                ><span class="c0 c51 c11">5,500 disk accesses</span>
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_60u2tfujpmt5-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s way better when it&rsquo;s contiguous!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Wait... no way...</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>We can do </span><span class="c45 c10">even better</span
                ><span class="c5 c8">?!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">That&rsquo;s right!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>If both relations are contiguous </span
                ><span class="c34">and</span><span>&nbsp;</span
                ><span class="c5 c8"
                    >sorted by C, we can do a little trick.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Just a small question, though: when was the last time you
                    implemented merge sort?</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_60u2tfujpmt5-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #5</span
                ><span class="c5 c8">: Merge join</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_60u2tfujpmt5-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >We have two pointers to the start of R1 records and to the
                    start of R2 records.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If the referenced R1 has a lower C value, we move on to the
                    next R1 record.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If the referenced R2 has a lower C value, we move on to the
                    next R2 record.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If both referenced R1 and R2 records have the same C value,
                    we have a match.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If you understand merge sort, it&rsquo;s very similar to
                    merging.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In terms of the blocks, we can just read the next one as we
                    go.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span
                ><span class="c5 c2 c11">= B(R1) + B(R2)</span>
            </li>
        </ul>
        <p class="c58 c74">
            <span
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </span
            ><span class="c2">= 1,000 + 500 = </span
            ><span class="c0 c11 c51">1,500 disk accesses</span>
        </p>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_937ne421bwbo-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Wow! Using merging to compute a join; who would&rsquo;ve
                    thought? There can&rsquo;t possibly be any algorithm faster
                    than this...</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">... right?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >N-No... no way...! We can do even BETTER?!</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.edjb7a7g677c">
            <span class="c8 c66 c37">Two-Pass Algorithms</span>
        </h3>
        <ul class="c7 lst-kix_gvla0g4ln2er-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Well, not necessarily &ldquo;better&rdquo;, but more suited
                    for general data.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Not all relations are going to be sorted by a specific
                    attribute.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So if we want to use our merge join, we need to sort it,
                    right?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >But if we waste time sorting and then merging, will we
                    actually save time as opposed to just using a nested loop
                    like before? Let&rsquo;s see...</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_gvla0g4ln2er-0">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">two-pass </span
                ><span>algorithm </span
                ><span class="c5 c8"
                    >is an algorithm that reads the disk twice.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Why do we need one right now?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Sorting all the chunks using merge sort requires two
                    passes:</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_t0360s8pzujq-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Reading each chunk, sorting each individual chunk, then
                    writing the chunk back to disk</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Taking all the chunks, sorting the chunks using merge sort,
                    writing back to disk</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_gvla0g4ln2er-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Then, obviously, we do the join at the end.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_gvla0g4ln2er-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #6</span
                ><span class="c5 c8">: Merge join with sort</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_gvla0g4ln2er-1 start">
            <li class="c13 li-bullet-0">
                <span>Sort cost of </span
                ><span class="c5 c2 c11"
                    >R1 = 4 * 1,000 = 4,000 disk accesses</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Sort cost of </span
                ><span class="c5 c2 c11"
                    >R2 = 4 * 500 &nbsp; = 2,000 disk accesses</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span><span class="c2">=</span
                ><span class="c5 c8">&nbsp;sort cost + join cost</span>
            </li>
        </ul>
        <p class="c58 c68">
            <span class="c5 c2 c11">&nbsp; = 6,000 + 1,500</span>
        </p>
        <p class="c58 c68">
            <span class="c2">&nbsp; = </span
            ><span class="c0 c51 c11">7,500 disk accesses</span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_l52w1i4cqtdm-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Hmm... it was better last time. It seems it&rsquo;s not
                    worth it.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >But wait! Let&rsquo;s try a bigger example...</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_l52w1i4cqtdm-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">B(R1) = 10,000 blocks</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">B(R2) = 5,000 blocks</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Nested loop cost:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_l52w1i4cqtdm-2 start">
            <li class="c25 li-bullet-0">
                <span>Total cost </span
                ><span class="c5 c2 c11">= (5,000 / 100) * (100 + 10,000)</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c0 c51 c11">505,000 disk accesses</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_l52w1i4cqtdm-1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Merge join cost:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_l52w1i4cqtdm-0">
            <li class="c25 li-bullet-0">
                <span>Sort cost of </span
                ><span class="c5 c2 c11"
                    >R1 = 4 * 10,000 &nbsp;= 40,000 disk accesses</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span>Sort cost of </span
                ><span class="c5 c2 c11"
                    >R2 = 4 * 5,000 &nbsp; = 20,000 disk accesses</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span>Total cost </span><span class="c2">=</span
                ><span class="c5 c8">&nbsp;sort cost + join cost</span>
            </li>
        </ul>
        <p class="c29">
            <span class="c5 c2 c11">&nbsp; = 60,000 + 15,000</span>
        </p>
        <p class="c58 c83">
            <span class="c2">&nbsp; = </span
            ><span class="c0">75,000 disk accesses</span>
        </p>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v7v8a3bsef2c-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It seems with bigger examples, it works out better.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >One way to figure out which algorithm to use is to
                    calculate their cost, and pick the most efficient one.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Heh... you called it. There&rsquo;s a way we can do even
                    better.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v7v8a3bsef2c-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We don&rsquo;t have to fully sort our relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>We can write the records into runs </span
                ><span class="c36">(sorted blocks)</span
                ><span class="c5 c8">, and then join with just the runs.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_v7v8a3bsef2c-0">
            <li class="c3 li-bullet-0">
                <span class="c10">Attempt #7</span
                ><span class="c5 c8">: Improved merge join</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_v7v8a3bsef2c-1 start">
            <li class="c13 li-bullet-0">
                <span>Read R1 + write R1 into runs </span
                ><span class="c5 c2 c11">= 2 * 1,000 = 2,000</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Read R2 + write R2 into runs </span
                ><span class="c5 c2 c11">= 2 * 500 = 1,000</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Total cost </span
                ><span class="c5 c2 c11">= 2,000 + 1,000 + (1,000 + 500)</span>
            </li>
        </ul>
        <p class="c58 c68">
            <span class="c2">&nbsp; = </span
            ><span class="c0 c51 c11">4,500 disk accesses</span>
        </p>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_i6nmkk9y0ds7-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If you&rsquo;re wondering how to perform merge join without
                    a fully sorted file of records, one could use heaps to store
                    the smallest join attribute of each block: one heap for R1
                    and one heap for R2.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The join can use the heaps to get the next blocks of R1 and
                    R2 as the join goes along. That way, the fully sorted file
                    isn&rsquo;t written to disk. You would need a bit more
                    memory to store the heaps, but it would reduce disk
                    accesses.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_i6nmkk9y0ds7-0">
            <li class="c3 li-bullet-0">
                <span>There&rsquo;s another kind of join called </span
                ><span class="c10">Hash-Join</span
                ><span class="c5 c8"
                    >&nbsp;that uses a hash index to write records to buckets
                    using the join attribute.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >All records in the same bucket are all matches with each
                    other.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It works by reading all of R1 and writing them to buckets,
                    reading all of R2 and writing them into buckets, and then
                    joining R1 and R2.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The complexity calculation is the same as the improved
                    merge join.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If a bucket gets full in memory, the disk is used.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 371.6px;
                    height: 239.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image55.png"
                    style="
                        width: 371.6px;
                        height: 239.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c73" id="h.z1pim3kq5wp6">
            <span class="c8 c37 c66">Index-based Algorithms</span>
        </h3>
        <ul class="c7 lst-kix_s9v6g29yvi2i-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >You can also use an index-based algorithm.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However, this assumes you already have an index created and
                    stored in memory.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">There are three assumptions:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_s9v6g29yvi2i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">R2.C index exists</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">R1 is contiguous, but unordered</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">R2.C index fits in memory</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_s9v6g29yvi2i-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If those three criteria are fulfilled, the index-based
                    algorithm goes like this:</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <a id="t.300c8b63126992de4206bbfdcf92e6caf0240e21"></a><a id="t.24"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c105" colspan="1" rowspan="1">
                        <p class="c58">
                            <span class="c28 c2">foreach R1 </span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2"
                                >:<br />
                                &nbsp;check if R1.C is in index<br />
                                &nbsp;</span
                            ><span class="c53 c2">if</span
                            ><span class="c28 c2">&nbsp;match, </span
                            ><span class="c53 c2">read</span
                            ><span class="c28 c2">&nbsp;R2 </span
                            ><span class="c53 c2">tuple</span
                            ><span class="c28 c2">: </span
                            ><span class="c2 c110">1</span
                            ><span class="c28 c2">&nbsp;disk access</span>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_3bbn366xvgbo-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Fairly simple, right? It just goes through all the R1
                    tuples, looking for matches in the index.</span
                >
            </li>
        </ul>
        <h1 class="c23" id="h.rf06a65oif31">
            <span class="c40 c8">Data Integration</span>
        </h1>
        <ul class="c7 lst-kix_mpoo85peesls-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >You can fetch data from lots of different sources.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However, each source is going to have its own schema.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Do you really want to query every source using their own
                    schemas?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >No! We want to have one universal schema that we convert
                    all our sources to, so we only need to use one schema to
                    query all the data from the sources.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>This universal (or global) schema is a part of the </span
                ><span class="c10">domain (or global or target) language</span
                ><span class="c5 c8">, and it encompasses:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_mpoo85peesls-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Database schema</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>Ontologies (OWL 2) </span
                ><span class="c8 c61 c36"
                    >(basically constraints about our data)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Description Logics</span>
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 461.79px;
                    height: 235.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image62.png"
                    style="
                        width: 461.79px;
                        height: 235.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_m7ws7qofevf6-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s four parts to this we&rsquo;re going to be
                    looking at:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-1 start">
            <li class="c13 li-bullet-0">
                <span class="c22 c10">Query language</span
                ><span class="c5 c8"
                    >&nbsp;- what we will use to query our domain</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-2 start">
            <li class="c25 li-bullet-0">
                <span>e.g. conjunctive queries, </span
                ><span class="c2"
                    >q(z) &larr; Employee(&ldquo;John&rdquo;, x) &and;
                    HasManager(x, z)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-1">
            <li class="c13 li-bullet-0">
                <span class="c10 c49">Domain language</span
                ><span class="c5 c8"
                    >&nbsp;- relational schemas that represent what our domain
                    will look like</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-2 start">
            <li class="c25 li-bullet-0">
                <span>e.g. </span
                ><span class="c2"
                    >Employee(name, ID), HasManager(employeeID, managerID),
                    Manager(name, ID), DirectsProject(managerID, projectID),
                    Project(name, ID)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-1">
            <li class="c13 li-bullet-0">
                <span class="c32 c56 c10">Schema mapping language</span
                ><span class="c5 c8"
                    >&nbsp;- mapping the data sources to our domain (global
                    schema)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">There&rsquo;s three kinds:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-2 start">
            <li class="c25 li-bullet-0">
                <span class="c10">Global-Local as View</span
                ><span class="c5 c8"
                    >&nbsp;(multiple sources to multiple domain):</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c2 c11"
                    >S1(x, y1) &and; S2(y1, y2) &rarr; Manager(x, z1) &and;
                    Employee(z2, z1)</span
                >
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c2 c11"></span></p>
        <ul class="c7 lst-kix_m7ws7qofevf6-2">
            <li class="c25 li-bullet-0">
                <span class="c10">Local as View</span
                ><span class="c5 c8"
                    >&nbsp;(one source to multiple domains):</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c2 c11"
                    >S1(x, y1) &rarr; Manager(x, z1) &and; Employee(z2,
                    z1)</span
                >
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c2 c11"></span></p>
        <ul class="c7 lst-kix_m7ws7qofevf6-2">
            <li class="c25 li-bullet-0">
                <span class="c10">Global as View</span
                ><span class="c5 c8"
                    >&nbsp;(multiple sources to one domain):</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c2 c11"
                    >S1(x, y1) &and; S2(y1, y2) &rarr; Manager(x, z1)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Data Sources language</span
                ><span class="c5 c8"
                    >&nbsp;- databases of different relational schemas
                    representing the different sources</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_m7ws7qofevf6-2 start">
            <li class="c25 li-bullet-0">
                <span>e.g. </span
                ><span class="c5 c2 c11">S1(a, b), S2(c, d, e) etc.</span>
            </li>
        </ul>
        <p class="c41 c102"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_3o4g1rt62xp2-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So, how do we query the data from the sources using our
                    domain?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">There&rsquo;s two ways to do this.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>The first way is called </span
                ><span class="c10">data warehousing</span
                ><span class="c5 c8">. It&rsquo;s the simple option.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We construct a centralised database for our domain, and
                    then we periodically update that database using our
                    sources.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 385.5px;
                    height: 232.95px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image47.png"
                    style="
                        width: 385.5px;
                        height: 232.95px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_uhlr5rmu7shk-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is simple, but we need to host a database, and we need
                    to keep updating it.</span
                >
            </li>
        </ul>
        <h2 class="c52" id="h.kckd6zosxjx1">
            <span class="c64 c8">Query Rewriting</span>
        </h2>
        <ul class="c7 lst-kix_uhlr5rmu7shk-0">
            <li class="c3 li-bullet-0">
                <span>The other way is </span
                ><span class="c10">virtual data integration (VDI)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Instead of having a centralised database, we convert our
                    domain query on the fly to queries over the sources.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 403.13px;
                    height: 240.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image54.png"
                    style="
                        width: 403.13px;
                        height: 240.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_h3asnksljm0p-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So we have some conjunctive query Q, which only uses
                    relations from the domain.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We want to convert this query into Q&rsquo; such that
                    Q&rsquo; only uses relations from the sources.</span
                >
            </li>
            <li class="c3 li-bullet-0"><span class="c5 c8">We want:</span></li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-1 start">
            <li class="c13 li-bullet-0">
                <span>Q&rsquo; &#8871; Q </span
                ><span class="c8 c61 c36"
                    >(i.e. answers in Q&rsquo; are correct, Q&rsquo; &sube;
                    Q)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Q&rsquo; to provide all possible answers to Q given the
                    sources </span
                ><span class="c8 c61 c36"
                    >(we want all the answers we can get)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-0">
            <li class="c3 li-bullet-0">
                <span>To sum those two criteria up, we want </span
                ><span class="c34">all</span><span>&nbsp;</span
                ><span class="c34">correct</span
                ><span class="c5 c8">&nbsp;answers.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_h3asnksljm0p-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">We can get two kinds of rewritings.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Given a query Q and view definitions V={V</span
                ><span class="c4">1</span><span>, ..., V</span
                ><span class="c4">n</span><span>} </span
                ><span class="c8 c61 c36"
                    >(these views simply map the domain and sources
                    together)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-1 start">
            <li class="c13 li-bullet-0">
                <span class="c10">Equivalent Rewriting</span
                ><span class="c5 c8"
                    >: our new query Q&rsquo; is semantically exactly the same
                    as Q, except it uses the source relations instead of the
                    domain relations.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Formally:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-2 start">
            <li class="c25 li-bullet-0">
                <span>Q&rsquo; refers only to views in V</span>
                <hr style="page-break-before: always; display: none" />
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8">Q&rsquo; &#8871; Q </span>
            </li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-1">
            <li class="c13 li-bullet-0">
                <span class="c10">Maximally-Contained Rewriting</span
                ><span class="c5 c8"
                    >: our new query Q&rsquo; isn&rsquo;t exactly the same as Q,
                    but it&rsquo;s the closest subset we&rsquo;re going to get
                    with these sources.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Formally:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_h3asnksljm0p-2 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8">Q&rsquo; refers only to views in V</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8">Q&rsquo; &sube; Q</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >There is no rewriting Q&rsquo;&rsquo; such that Q&rsquo;
                    &sube; Q&rsquo;&rsquo; &sube; Q and Q&rsquo;&rsquo; &ne;
                    Q</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_h3asnksljm0p-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">So how do we rewrite our queries?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >It depends on whether we&rsquo;re using Global as View or
                    Local as View.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.5oi8hgw72iis">
            <span class="c8 c66 c37">Global as View</span>
        </h3>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Remember, Global-as-View maps multiple source relations to
                    one domain relation.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In more detail, it means each global (domain) relation is
                    defined as a view over source relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Here&rsquo;s an example:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-1 start">
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c95 c11"
                    >Movie(title, year) &larr; DB1(title, director, year)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c11 c95"
                    >Movie(title, year) &larr; DB2(title, year, director,
                    actor)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c0 c51 c11"
                    >Review(title, year, review) &larr; DB1(title, director,
                    year) &and; DB3(title, review)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span
                    >So we have 3 source relations, DB1, DB2 and DB3, and 2
                    domain relations, </span
                ><span class="c49">Movie</span><span>&nbsp;and </span
                ><span class="c32 c56">Review</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s say we want to query all the reviews for movies
                    released after 1997.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">The query would look like this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(title, review) :- </span
                ><span class="c1">Movie(title, year)</span
                ><span class="c2">&nbsp;&and; year&gt;1997 &and; </span
                ><span class="c0 c51 c11">Review(title, year, review)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now, we just substitute the domain relations for the source
                    relations in accordance to the view definitions above:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(title, review) :- </span
                ><span class="c1">DB1(title, director, year)</span
                ><span class="c2">&nbsp;&and; year&gt;1997 &and; </span
                ><span class="c0 c51 c11"
                    >DB1(title, director, year) &and; DB3(title, review)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now we tidy up; you can see we have two DB1&rsquo;s in this
                    query, which we don&rsquo;t need, so we can get rid of
                    one:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(title, review) :- </span
                ><span class="c1">DB1(title, director, year)</span
                ><span class="c2">&nbsp;&and; year&gt;1997 &and; </span
                ><span class="c0 c51 c11">DB3(title, review)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >... and there&rsquo;s our rewritten query!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There&rsquo;s two mappings to Movie, so we could&rsquo;ve
                    used DB2 instead:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(title, review) :- </span
                ><span class="c1">DB2(title, year, director, actor)</span
                ><span class="c2">&nbsp;&and; year&gt;1997 &and; </span
                ><span class="c0 c51 c11">DB3(title, review)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_rwu38rd6pcbg-0">
            <li class="c3 li-bullet-0">
                <span
                    >But this is just a redundant rewriting of the query that
                    uses DB1. We&rsquo;d only need DB2 if we need the actor of
                    the film as well.</span
                >
            </li>
        </ul>
        <h3 class="c73" id="h.ewnu4rlsrpk4">
            <span class="c8 c66 c37">Local as View</span>
        </h3>
        <ul class="c7 lst-kix_8omlnqd5sv4o-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Remember, Local-As-View maps one source relation to
                    multiple domain relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In more detail, it means each source relation is defined as
                    a view over mediator (domain) relations.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Say we have DB1(title, year, director) and DB2(title,
                    review).</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We could define views on those source relations:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_8omlnqd5sv4o-1 start">
            <li class="c13 li-bullet-0">
                <span class="c1 c51 c11"
                    >V1(title, year, director) &rarr; Movie(title, year,
                    director, genre) &and; American(director) &and; year &ge;
                    1960 &and; genre = &lsquo;Comedy&rsquo;</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c0 c51 c11"
                    >V2(title, review) &rarr; Movie(title, year, director,
                    genre) &and; year &ge; 1990 &and; MovieReview(title,
                    review)</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_8omlnqd5sv4o-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s say we want to rewrite the query for the
                    reviews of comedies produced after 1950.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">The query would look like this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_8omlnqd5sv4o-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q(title, review) :- Movie(title, year, director,
                    &lsquo;Comedy&rsquo;), year &ge; 1950, MovieReview(title,
                    review)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_8omlnqd5sv4o-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The reformulated query would look like this:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_8omlnqd5sv4o-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q&rsquo;(title, review) :- </span
                ><span class="c1">V1(title, year, director)</span
                ><span class="c2">, </span
                ><span class="c0">V2(title, review)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_8omlnqd5sv4o-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s clear to see that we can get our title from
                    either V1 or V2, and we get our review from V2, but what
                    about the year being greater or equal to 1950? It just
                    vanished from the query!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >That &lsquo;year&rsquo; predicate has been
                    &ldquo;overwritten&rdquo; by V1&rsquo;s year predicate of
                    year &ge; 1960.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Basically, by calling V1, we&rsquo;re already doing a
                    filter by year.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >But since V1&rsquo;s year filter only captures films above
                    1960 and not 1950 like we wanted to in the first place, that
                    makes this query a </span
                ><span class="c45">maximally-contained rewriting</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">That means Q&rsquo; is a subset of Q.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can&rsquo;t really help it in this case, because our
                    sources don&rsquo;t support movies over 1950; only over
                    1960.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_8omlnqd5sv4o-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here are some pros and cons of Global-as-View vs
                    Local-as-View:</span
                >
            </li>
        </ul>
        <a id="t.a6819437ef096abf3893669c3c3419882dcbdb60"></a><a id="t.25"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c38 c54" colspan="1" rowspan="1">
                        <p class="c47"><span class="c5 c6">GAV</span></p>
                    </td>
                    <td class="c38 c54" colspan="1" rowspan="1">
                        <p class="c47"><span class="c5 c6">LAV</span></p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c38" colspan="1" rowspan="1">
                        <ul class="c7 lst-kix_iks42crbjmq5-0 start">
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8">Not modular</span>
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-1 start">
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Addition of new sources changes the domain
                                    schema</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-0">
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8"
                                    >Can be awkward to write mediated schema
                                    without loss of information</span
                                >
                            </li>
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8"
                                    >Query reformulation is easy</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-1 start">
                            <li class="c17 c63 c77 li-bullet-0">
                                <span class="c5 c8"
                                    >Reduces to view unfolding
                                    (polynomial)</span
                                >
                            </li>
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Can build hierarchies of mediated
                                    schemas</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-0">
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8">Best when</span>
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-1 start">
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Few, stable, data sources</span
                                >
                            </li>
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Well-known to the mediator (e.g. corporate
                                    integration)</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_iks42crbjmq5-2 start">
                            <li class="c17 c102 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Garlic, TSIMMIS, HERMES</span
                                >
                            </li>
                        </ul>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <ul class="c7 lst-kix_frdtdsw4b0if-0 start">
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8"
                                    >Modular - adding new sources is easy</span
                                >
                            </li>
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8"
                                    >Very flexible - power of the entire query
                                    language available to describe sources</span
                                >
                            </li>
                            <li class="c17 c48 c63 li-bullet-0">
                                <span class="c5 c8">Reformulation is hard</span>
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_frdtdsw4b0if-1 start">
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Involves answering queries only using views
                                    (can be intractable)</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_frdtdsw4b0if-0">
                            <li class="c17 c63 c48 li-bullet-0">
                                <span class="c5 c8">Best when</span>
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_frdtdsw4b0if-1 start">
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Many, relatively unknown data sources</span
                                >
                            </li>
                            <li class="c17 c77 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Possibility of addition / deletion of
                                    sources</span
                                >
                            </li>
                        </ul>
                        <ul class="c7 lst-kix_frdtdsw4b0if-2 start">
                            <li class="c17 c102 c63 li-bullet-0">
                                <span class="c5 c8"
                                    >Information Manifold, InfoMaster,
                                    Emerac</span
                                >
                            </li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 class="c73" id="h.rqc7o1x5kln3">
            <span class="c8 c66 c37">The Bucket Algorithm</span>
        </h3>
        <ul class="c7 lst-kix_6728fb42juuy-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >I showed you a formulated query in LAV, but I didn&rsquo;t
                    show you how I got to it.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Formulating queries with LAV is a bit more complicated than
                    GAV.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>You need to use an algorithm, like </span
                ><span class="c10">the bucket algorithm</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >Say you have a query Q and source descriptions (views)
                    V</span
                ><span class="c4">1</span><span>, ..., V</span
                ><span class="c5 c62 c4">i</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">It works like this:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_jp5oc8fa6a3z-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">For every relation g in query Q:</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_d5l65ljntzg8-0 start">
            <li class="c25 li-bullet-0">
                <span class="c5 c8">Find views that contains relation g</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c5 c8"
                    >Check that constraints in those views are compatible with
                    Q</span
                >
            </li>
            <li class="c25 li-bullet-0">
                <span
                    >Add the views that satisfy the constraints to a
                    bucket</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_jp5oc8fa6a3z-0" start="2">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Combine source relations from each bucket into a
                    conjunctive query Q&rsquo; and check for containment.</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_ympeewpxj4rk-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >I bet that didn&rsquo;t make a lot of sense, so
                    here&rsquo;s an example.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_ympeewpxj4rk-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">We have the following views:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_ympeewpxj4rk-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >V1(student,number,year) &rarr;
                    Registered(student,course,year), Course(course,number),
                    number &ge; 500, year &ge; 1992</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >V2(student,dept,course) &rarr;
                    Registered(student,course,year),
                    Enrolled(student,dept)</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >V3(student,course) &rarr; Registered(student,course,year),
                    year &le; 1990</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >V4(student,course,number) &rarr;
                    Registered(student,course,year), Course(course,number),
                    Enrolled(student,dept), number &le; 100</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_ympeewpxj4rk-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here we have a query we want to rewrite:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_ympeewpxj4rk-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q(S,D) :- Enrolled(S,D), Registered(S,C,Y), Course(C,N), N
                    &ge; 300, Y &ge; 1995</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_ympeewpxj4rk-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now we go through every relation, selecting views:</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <a id="t.e646d874376994e04301e3b599c74c91414b42a7"></a><a id="t.26"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c54 c72" colspan="1" rowspan="1">
                        <p class="c17"><span class="c5 c6">Relation</span></p>
                    </td>
                    <td class="c70 c54" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c6">Selected views</span>
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11">Enrolled(S,D)</span>
                        </p>
                    </td>
                    <td class="c70" colspan="1" rowspan="1">
                        <p class="c58 c86">
                            <span class="c2"
                                >V2(student,dept,course) &rarr;
                                Registered(student,course,year), </span
                            ><span class="c43 c10">Enrolled</span
                            ><span class="c5 c2 c11">(student,dept)</span>
                        </p>
                        <p class="c41"><span class="c5 c2 c11"></span></p>
                        <p class="c58 c86">
                            <span class="c2"
                                >V4(student,course,number) &rarr;
                                Registered(student,course,year),
                                Course(course,number), </span
                            ><span class="c43 c10">Enrolled</span
                            ><span class="c5 c2 c11"
                                >(student,dept), number &le; 100</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11">Registered(S,C,Y)</span>
                        </p>
                    </td>
                    <td class="c70" colspan="1" rowspan="1">
                        <p class="c58 c86">
                            <span class="c2"
                                >V1(student,number,year) &rarr; </span
                            ><span class="c43 c10">Registered</span
                            ><span class="c5 c2 c11"
                                >(student,course,year), Course(course,number),
                                number &ge; 500, year &ge; 1992</span
                            >
                        </p>
                        <p class="c41"><span class="c5 c2 c11"></span></p>
                        <p class="c58 c86">
                            <span class="c2"
                                >V2(student,dept,course) &rarr; </span
                            ><span class="c43 c10">Registered</span
                            ><span class="c5 c2 c11"
                                >(student,course,year),
                                Enrolled(student,dept)</span
                            >
                        </p>
                        <p class="c41"><span class="c5 c2 c11"></span></p>
                        <p class="c58 c86">
                            <span class="c2 c22"
                                >V3(student,course) &rarr; </span
                            ><span class="c22 c43 c10">Registered</span
                            ><span class="c2 c22">(student,course,year), </span
                            ><span class="c51 c22 c43 c11 c10"
                                >year &le; 1990</span
                            >
                        </p>
                        <p class="c58 c86">
                            <span class="c51 c8 c22"
                                >The year range doesn&rsquo;t fit our query, so
                                we can&rsquo;t consider V3 for Registered</span
                            >
                        </p>
                        <p class="c41"><span class="c5 c2 c11"></span></p>
                        <p class="c58 c86">
                            <span class="c2"
                                >V4(student,course,number) &rarr; </span
                            ><span class="c43 c10">Registered</span
                            ><span class="c5 c2 c11"
                                >(student,course,year), Course(course,number),
                                Enrolled(student,dept), number &le; 100</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c72" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11">Course(C,N)</span>
                        </p>
                    </td>
                    <td class="c70" colspan="1" rowspan="1">
                        <p class="c58 c86">
                            <span class="c2"
                                >V1(student,number,year) &rarr;
                                Registered(student,course,year), </span
                            ><span class="c43 c10">Course</span
                            ><span class="c5 c2 c11"
                                >(course,number), number &ge; 500, year &ge;
                                1992</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now we have our buckets filled in as follows:</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <a id="t.885764cfed2942e20705697039d3a5f8dc1ed35d"></a><a id="t.27"></a>
        <table class="c26">
            <tbody>
                <tr class="c33">
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c43 c11 c10">Enrolled(S,D)</span>
                        </p>
                    </td>
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c43 c11 c10"
                                >Registered(S,C,Y)</span
                            >
                        </p>
                    </td>
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c43 c11 c10">Course(C,N)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c33">
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11">V2(S,D,C&rsquo;)</span>
                        </p>
                        <p class="c17">
                            <span class="c5 c2 c11"
                                >V4(S,C&rsquo;,N&rsquo;)</span
                            >
                        </p>
                    </td>
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11"
                                >V1(S,N&rsquo;,Y&rsquo;)</span
                            >
                        </p>
                        <p class="c17">
                            <span class="c5 c2 c11">V2(S,D&rsquo;,C)</span>
                        </p>
                        <p class="c17">
                            <span class="c5 c2 c11">V4(S,C,N&rsquo;)</span>
                        </p>
                    </td>
                    <td class="c85" colspan="1" rowspan="1">
                        <p class="c17">
                            <span class="c5 c2 c11"
                                >V1(S&rsquo;,N,Y&rsquo;)</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c41"><span class="c5 c2 c11"></span></p>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >You may be wondering why there&rsquo;s apostrophes
                    here.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >That&rsquo;s just to show the attribute in that relation
                    does not fit with the domain&rsquo;s head.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>For example, in </span
                ><span class="c2">Enrolled(S,D)</span><span>, the C in </span
                ><span class="c2">V2(S,D,C&rsquo;)</span
                ><span class="c5 c8"
                    >&nbsp;has an apostrophe because it&rsquo;s not one of the
                    distinguished variables S or D.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >You can think of the normal attributes like the ones we
                    &ldquo;need&rdquo; and the ones with apostrophes like the
                    ones we don&rsquo;t need, or don&rsquo;t need </span
                ><span class="c45">yet</span><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span
                    >On this part, we simply do a cross product on all these
                    sets of views </span
                ><span class="c36">(Enrolled x Registered x Course)</span
                ><span class="c5 c8"
                    >&nbsp;and then pick combinations and check if they&rsquo;re
                    contained in our query.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >For starters, let&rsquo;s pick V2 for Enrolled, V1 for
                    Registered and V1 for Course.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This&rsquo;ll turn our query into this:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q&rsquo;(S,D) :- V2(S,D,C&rsquo;), V1(S,N&rsquo;,Y),
                    V1(S&rsquo;,N,Y&rsquo;), N&ge;300, Y&ge;1995</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can minimise this query a bit, since we have two
                    V1&rsquo;s and V1 already has an N comparison:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >Q&rsquo;(S,D) :- V2(S,D,C&rsquo;), V1(S,N,Y),
                    Y&ge;1995</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">That&rsquo;s our new query!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now we need to check if Q&rsquo; is contained in Q.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can do this by going the opposite direction of
                    substituting the views for domain relations:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q&rsquo;(S,D) :- </span
                ><span class="c2 c22">V2(S,D,C&rsquo;)</span
                ><span class="c2">, </span><span class="c1">V1(S,N,Y)</span
                ><span class="c2">, </span
                ><span class="c51 c2 c84 c11 c20">Y&ge;1995</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Q&rsquo;(S,D) :- </span
                ><span class="c2 c22"
                    >Registered(S,C&rsquo;,Y) &and; Enrolled(S,D)</span
                ><span class="c2">&nbsp;&and;</span
                ><span class="c2">&nbsp;</span
                ><span class="c1"
                    >Registered(S,C&rsquo;&rsquo;,Y) &and;
                    Course(C&rsquo;&rsquo;,N) &and; N &ge; 500 &and; Y &ge;
                    1992</span
                ><span class="c2">&nbsp;&and;</span
                ><span class="c2">&nbsp;</span
                ><span class="c51 c2 c75 c11 c20">Y&ge;1995</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Q&rsquo;(S,D) :- </span
                ><span class="c2 c22">Enrolled(S,D)</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c1"
                    >Registered(S,C,Y) &and; Course(C,N) &and; N &ge; 500 &and;
                    Y &ge; 1992</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c51 c2 c11 c20 c75">Y&ge;1995</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Q&rsquo;(S,D) :- </span
                ><span class="c2 c22">Enrolled(S,D)</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c1"
                    >Registered(S,C,Y) &and; Course(C,N) &and; N &ge; 500 &and; </span
                ><span class="c51 c2 c75 c11 c20">Y &ge; 1995</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Compare that with the original query:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">Q(S,D) :- </span
                ><span class="c2">Enrolled(S,D)</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c2"
                    >Registered(S,C,Y) &and; Course(C,N) &and; N &ge; 300 &and; </span
                ><span class="c5 c2 c11">Y &ge; 1995</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >As you can see, our new query only differs by checking for
                    N&rsquo;s greater than 500 as opposed to greater than 300.
                    That&rsquo;s simply because our source does not support
                    N&rsquo;s lower than 500.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >But because of this, it is reflected in our query, so
                    Q&rsquo; &sube; Q.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_y6mrs5lnmq0v-0">
            <li class="c3 li-bullet-0">
                <span
                    >To find the maximally-contained rewriting of Q, you would
                    have to go through each combination of views in that cross
                    product we did earlier to find the rewritten query that is
                    closest to Q.</span
                >
            </li>
        </ul>
        <h1 class="c23" id="h.rf06a65oif31-1">
            <span class="c40 c8">Ontology Based Data Integration</span>
        </h1>
        <ul class="c7 lst-kix_d9o94ceizlnz-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Remember when I mentioned ontologies in Data
                    Integration?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>An </span><span class="c10">ontology </span
                ><span class="c5 c8"
                    >is a set of rules that data must follow.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">How do we represent these rules?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Using a language called </span
                ><span class="c10"
                    >Source-to-target Tuple Generating Dependencies </span
                ><span class="c5 c8">(s-t TGDs).</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">They go like this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">&forall;</span><span class="c43 c10">x,y</span
                ><span class="c2">&nbsp;&phi;(</span
                ><span class="c43 c10">x</span><span class="c2">,</span
                ><span class="c43 c10">y</span
                ><span class="c2">) &rarr; &exist;z &psi;(</span
                ><span class="c43 c10">x</span><span class="c2">,</span
                ><span class="c43 c10">z</span><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0"><span class="c5 c8">Where:</span></li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">&phi;(</span><span class="c43 c10">x</span
                ><span class="c2">,</span><span class="c43 c10">y</span
                ><span class="c2">)</span
                ><span>&nbsp;conjunction of atoms, defining an </span
                ><span class="c10">antecedent</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">&psi;(</span><span class="c43 c10">x</span
                ><span class="c2">,</span><span class="c43 c10">z</span
                ><span class="c2">)</span
                ><span
                    >&nbsp;conjunction of atoms that must hold true / exist if
                    LHS is true (a </span
                ><span class="c10">consequent</span
                ><span class="c5 c8">).</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Just think of it like an &ldquo;implies&rdquo; rule, except
                    with a bunch of mathematical jargon shrouding it.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">An example of such a rule is this:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11"
                    >&forall;a Person(a) &rarr; &exist;b hasFather(a,b)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This rule says that every person has a father.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>If you remember </span
                ><span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://docs.google.com/document/d/1tTdq0eMqNu7KLAdFn8TVid755xtUZbgt4ls6zS47Sms/edit?usp%3Dsharing&amp;sa=D&amp;source=editors&amp;ust=1623780154767000&amp;usg=AOvVaw2nU6rx1Nk8RdWctatwQ7KH"
                        >Software Modelling and Design</a
                    ></span
                ><span class="c5 c8"
                    >, these rules or &ldquo;invariants&rdquo; will look
                    familiar to you.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >If you&rsquo;re afraid of mathematical syntax and how the
                    quantifiers look </span
                ><span class="c36">(don&rsquo;t worry, I am too)</span
                ><span class="c5 c8"
                    >, you can use syntactic sugar to make it look nicer:</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-1 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c2 c11">Person(a) &rarr; hasFather(a,b)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We&rsquo;ve actually been using this syntactic sugar the
                    whole time, back in query rewriting with global-as-view and
                    local-as-view; it uses the same language!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >I&rsquo;ll use these two syntaxes interchangeably, so just
                    keep that in mind so you don&rsquo;t get confused.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s go over some more definitions before we dive
                    into the heavy stuff (because trust me, it gets
                    heavy).</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>An </span><span class="c10">instance </span
                ><span class="c5 c8">is an instantiation of a database.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Remember back in Relational Algebra when we called that a
                    Relational Database Instance? Here, we&rsquo;ll just say
                    &lsquo;instance&rsquo;.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span>An instance J is a model of the rule &sigma; = </span
                ><span class="c2">&forall;</span><span class="c43 c10">x,y</span
                ><span class="c2">&nbsp;&phi;(</span
                ><span class="c43 c10">x</span><span class="c2">,</span
                ><span class="c43 c10">y</span
                ><span class="c2">) &rarr; &exist;z &psi;(</span
                ><span class="c43 c10">x</span><span class="c2">,</span
                ><span class="c43 c10">z</span><span class="c5 c2 c11">)</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>... written as </span
                ><span class="c2">J &#8871; &sigma;</span
                ><span class="c5 c8">&nbsp;if the following holds:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-1 start">
            <li class="c13 li-bullet-0">
                <span>There is a homomorphism h such that h(</span
                ><span class="c2">&phi;(</span><span class="c43 c10">x</span
                ><span class="c2">,</span><span class="c43 c10">y</span
                ><span class="c5 c2 c11">)) &sube; J</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>There exists a</span><span class="c2">&nbsp;h</span
                ><span class="c2 c4">|</span><span class="c4 c43 c10">x</span
                ><span class="c2">&nbsp;&sube; g </span><span>such that</span
                ><span class="c2">&nbsp;g(&psi;(</span
                ><span class="c43 c10">x</span><span class="c2">,</span
                ><span class="c43 c10">z</span
                ><span class="c5 c2 c11">)) &sube; J</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Whoa whoa whoa... there&rsquo;s a lot of jargon here, can
                    we dial it back a bit?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >What this is trying to say is that a database instance J is
                    a model of the rule &sigma; if the records of J satisfy that
                    rule.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Let&rsquo;s say we have a database </span
                ><span class="c2">D={A(x), B(x)}</span
                ><span>&nbsp;and we have a rule &sigma; = </span
                ><span class="c2">&forall;</span><span class="c2">x</span
                ><span class="c2">&nbsp;A(</span><span class="c2">x</span
                ><span class="c2">) &rarr; &exist;y B(</span
                ><span class="c2">x,y</span><span class="c2">)</span
                ><span>&nbsp;</span
                ><span class="c36"
                    >(basically the rule says for every x in A, that x must be
                    in B too, with some other value y)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>The instance </span><span class="c2">{A(1), B(1,0)}</span
                ><span>&nbsp;would model &sigma;, but the instance </span
                ><span class="c2">{A(1), B(2,3)}</span
                ><span class="c5 c8">&nbsp;would not model &sigma;.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now let&rsquo;s explain a bit of the syntax.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>What is h</span><span class="c4">|</span
                ><span class="c4 c10">x</span
                ><span class="c5 c8"
                    >? It simply means to restrict the domain of h to just
                    x.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>So if h was </span
                ><span class="c2">{x &rarr; a, y &rarr; b, z &rarr; c}</span
                ><span>, h</span><span class="c4">|</span
                ><span class="c4 c10">x</span><span>&nbsp;would just be </span
                ><span class="c2">{x &rarr; a}</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >An instance J is a model of &sigma; if you can find a
                    homomorphism h from the antecedent to J&rsquo;s relations,
                    and if you can find a similar homomorphism g from the
                    consequent to J&rsquo;s relations, and if g is a subset of h
                    whose domain is restricted to the variables shared between
                    the antecedent and the consequent.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >What? That was just jargon, but in English form?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >If we go over an example, it&rsquo;ll make much more
                    sense.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_d9o94ceizlnz-0">
            <li class="c3 li-bullet-0">
                <span>Let&rsquo;s check if </span
                ><span class="c2">J={A(1), B(1,0)}</span
                ><span class="c5 c8"
                    >&nbsp;is a model of that rule we looked at earlier.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>We need a homomorphism h that maps from </span
                ><span class="c2">A(x)</span><span>&nbsp;to </span
                ><span class="c2">{A(1), B(1,0)}</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>That&rsquo;s easy: </span
                ><span class="c2">h = {x &rarr; 1}</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now we need to look at what variables are shared by the
                    antecedent and the consequent.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>The rule is </span
                ><span class="c2">A(x) &rarr; B(x,y)</span
                ><span>, so what variables are shared between </span
                ><span class="c2">A(x)</span><span>&nbsp;and </span
                ><span class="c2">B(x,y)</span><span class="c5 c8">?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >It&rsquo;s x! Therefore, our second homomorphism g needs to
                    have x &rarr; 1 in it </span
                ><span class="c36"
                    >(the x&rarr; 1 comes from the homomorphism h)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>How can we construct g such that it maps </span
                ><span class="c2">B(x,y)</span><span>&nbsp;to </span
                ><span class="c2">{A(1), B(1,0)}</span
                ><span class="c5 c8">?</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>Again, that&rsquo;s not so hard: </span
                ><span class="c5 c2 c11">g = {x &rarr; 1, y &rarr; 0}</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There we go! We&rsquo;ve found the two homomorphisms: J is
                    a model of &sigma;!</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_yy9nwourw320-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;d be a bit dumb if we could only have one rule,
                    right?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We can have a set of these rules called &sum;.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >As defined before, this is an ontology.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >J is a model of the ontology &sum;, written as J &#8871;
                    &sum;, if for each &sigma; in &sum;, J &#8871;
                    &sigma;.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Basically, J models the ontology if it can model every rule
                    in it.</span
                >
            </li>
        </ul>
        <h2 class="c52" id="h.br3cpfjowi3h">
            <span class="c64 c8">Ontology-Based Query Answering (OBQA)</span>
        </h2>
        <ul class="c7 lst-kix_t2tvvlurainu-0 start">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">certain answer </span
                ><span class="c5 c8"
                    >is a tuple that satisfies a query in accordance with the
                    ontology.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 312.94px;
                    height: 215.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image12.png"
                    style="
                        width: 312.94px;
                        height: 215.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_qhmjggduejo6-0 start">
            <li class="c3 li-bullet-0"><span class="c5 c8">Formally,</span></li>
        </ul>
        <p class="c12">
            <span class="c2 c37">certain-answers(</span
            ><span class="c2 c37 c99">Q</span><span class="c2 c37">, &lt;</span
            ><span class="c2 c37 c21">D</span><span class="c2 c37">,</span
            ><span class="c2 c67 c37">&sum;</span
            ><span class="c2 c37">&gt;) = &#8898;</span
            ><span class="c2 c4 c37">J &isin; models(</span
            ><span class="c2 c4 c37 c21">D</span
            ><span class="c2 c4 c37">&and;</span
            ><span class="c2 c4 c67 c37">&sum;</span
            ><span class="c2 c4 c37">)</span><span class="c2 c37">&nbsp;</span
            ><span class="c2 c37 c99">Q</span
            ><span class="c2 c37 c11 c107">(J)</span>
        </p>
        <ul class="c7 lst-kix_qhmjggduejo6-0">
            <li class="c3 li-bullet-0">
                <span>Where </span><span class="c2">models(</span
                ><span class="c2 c21">D</span><span class="c2">&and;</span
                ><span class="c2 c67">&sum;</span
                ><span class="c2">) = {J | J &supe; </span
                ><span class="c2 c21">D</span
                ><span class="c2">&nbsp;and J &#8871; </span
                ><span class="c2 c67">&sum;</span
                ><span class="c5 c2 c11">}</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_qhmjggduejo6-0">
            <li class="c3 li-bullet-0">
                <span
                    >To sort of English-ify this definition, let&rsquo;s say you
                    have an instance. This instance can be a superset of your
                    database D, and it also models the ontology. If you find a
                    tuple in this superset (</span
                ><span class="c2">J &isin; models(</span
                ><span class="c2 c21">D</span><span class="c2">&and;</span
                ><span class="c2 c67">&sum;</span><span class="c2">)</span
                ><span>, and in the query result (</span
                ><span class="c2 c99">Q</span><span class="c2">(J)</span
                ><span>), and also appears in every other instance (</span
                ><span class="c2">&#8898;</span
                ><span class="c5 c8">), it is a certain answer.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It&rsquo;s alright if that didn&rsquo;t make sense; this is
                    a hard topic to explain. Let&rsquo;s go over an
                    example.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_qhmjggduejo6-0">
            <li class="c3 li-bullet-0">
                <span>We have a database instance </span
                ><span class="c0 c51 c11"
                    >D = {Person(john), Person(bob), Person(tom),
                    hasFather(john,bob), hasFather(bob,tom)}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>We have an ontology </span
                ><span class="c1 c51 c11"
                    >&sum; = {&forall;x (Person(x) &rarr; &exist;y
                    hasFather(x,y)),</span
                >
            </li>
        </ul>
        <p class="c58 c83">
            <span class="c1 c51 c11"
                >&forall;x&forall;y (hasFather(x,y) &rarr; Person(x) ^
                Person(y))}</span
            >
        </p>
        <ul class="c7 lst-kix_qhmjggduejo6-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Let&rsquo;s go over some queries!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">What are the certain answers of:</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_hk5m5mdn4924-0 start" start="1">
            <li class="c3 li-bullet-0">
                <span class="c5 c43 c11 c10">Q(x,y) :- hasFather(x,y)</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_p9dgp0hrxkpq-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >This query asks for son and father pairs.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Two certain answers straight away are </span
                ><span class="c2">(john,bob)</span><span>&nbsp;and </span
                ><span class="c2">(bob,tom)</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >What about Tom? He must have a father, because the ontology
                    rules state that everyone must have a father.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>It is true that Tom has a father </span
                ><span class="c36"
                    >(not in D, but in supersets that satisfy the
                    ontology)</span
                ><span>, but the pair of </span><span class="c2">(tom,z)</span
                ><span>&nbsp;</span
                ><span class="c36">(where z is a placeholder)</span
                ><span class="c5 c8">&nbsp;is not a certain answer.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Why? Because when we do the intersection of all answers,
                    this tuple will get filtered out.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >Let&rsquo;s say we have instances A and B, that are
                    supersets of D </span
                ><span class="c36">(and satisfy the ontology)</span
                ><span>, except A has </span><span class="c2">(tom,jack)</span
                ><span>&nbsp;and B has </span><span class="c2">(tom,jojo)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_p9dgp0hrxkpq-1 start">
            <li class="c25 li-bullet-0">
                <span class="c2">A: </span
                ><span class="c0">(john,bob), (bob,tom)</span
                ><span class="c2">, </span
                ><span class="c51 c2 c22 c11">(tom,jack), ...</span>
            </li>
            <li class="c25 li-bullet-0">
                <span class="c2">B: </span
                ><span class="c0">(john,bob), (bob,tom)</span
                ><span class="c2">, </span
                ><span class="c51 c2 c22 c11">(tom,jojo), ...</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_p9dgp0hrxkpq-0">
            <li class="c13 li-bullet-0">
                <span
                    >It&rsquo;s clear now that when we intersect all answers, </span
                ><span class="c2">(tom,z)</span
                ><span class="c5 c8"
                    >&nbsp;will get filtered out, meaning it is not a certain
                    answer.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Therefore the only certain answers are </span
                ><span class="c2">(john,bob)</span><span>&nbsp;and </span
                ><span class="c2">(bob,tom)</span><span class="c5 c8">.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In practice, you can think of it like this: no placeholder
                    variables in certain answers are allowed!</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_hk5m5mdn4924-0" start="2">
            <li class="c3 li-bullet-0">
                <span class="c5 c43 c11 c10">Q(x) :- hasFather(x,y)</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_yhwyabdp4c5-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">This query just asks for sons.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Two immediate answers are John and Bob.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >But what about Tom? Like we said before, he must be a son
                    of someone. So Tom must be a certain answer, right?</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">Right! Tom is also a certain answer.</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >That&rsquo;s because no matter what D superset (that
                    satisfies the ontology) you can pick, Tom will always be a
                    son.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Also, there&rsquo;s no placeholder in just </span
                ><span class="c2">(tom)</span
                ><span class="c5 c8"
                    >, so it&rsquo;s not going to get filtered out in the
                    intersection.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Therefore the certain answers are </span
                ><span class="c5 c2 c11">{(john), (bob), (tom)}</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_hk5m5mdn4924-0" start="3">
            <li class="c3 li-bullet-0">
                <span class="c5 c43 c11 c10"
                    >Q(x) :- hasFather(x,y), hasFather(y,z),
                    hasFather(z,w)</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_awg6zqgrtdij-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >This query asks for all great grandsons.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In the instance D, it&rsquo;s clear that there are no great
                    grandsons. Heck, there&rsquo;s only one grandfather.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >But instance D doesn&rsquo;t satisfy the ontology, does
                    it?</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >Therefore we only want to focus on supersets of D that do
                    satisfy the ontology.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If we had an instance superset J that satisfies the
                    ontology, every person in J would be a son of someone, a
                    grandson of someone, a great grandson of someone etc.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8">That includes John, Bob and Tom!</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >However, everyone else would be a placeholder, or simply
                    someone who doesn&rsquo;t belong in D. The same logic
                    applies in the first example, and those people would be
                    filtered out in the intersection.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span>Therefore, the certain answers are </span
                ><span class="c2">{(john), (bob), (tom)}</span>
            </li>
        </ul>
        <ol class="c7 lst-kix_hk5m5mdn4924-0" start="4">
            <li class="c3 li-bullet-0">
                <span class="c5 c43 c11 c10"
                    >Q(x,w) :- hasFather(x,y), hasFather(y,z),
                    hasFather(z,w)</span
                >
            </li>
        </ol>
        <ul class="c7 lst-kix_6rvzmrwzewr-0 start">
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >This query asks for all great grandsons and great
                    grandfathers.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >In instance D, there are no great grandfathers.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >That means for every superset of D, all great grandfathers
                    will be placeholders.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >If all great grandfathers are placeholders, that means
                    every tuple containing a great grandfather will be filtered
                    out in the intersection.</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c5 c8"
                    >So the certain answers here are... nothing. There are
                    none.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_rzasja9sh43m-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Here&rsquo;s a formal definition from the slides. To be
                    honest, typing everything out is tiring and the slides show
                    this quite well anyway, so here you go.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>By the way, </span><span class="c2">() &isin; Q(x)</span
                ><span class="c5 c8"
                    >&nbsp;simply means &ldquo;if this boolean CQ returns
                    true&rdquo;, where () is used as the &ldquo;true&rdquo;
                    constant</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 361.33px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image43.png"
                    style="
                        width: 602px;
                        height: 361.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.bd7dqahdoay">
            <span class="c64 c8">Universal Models</span>
        </h2>
        <ul class="c7 lst-kix_dyzqcsriy1al-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It seems like a real pain to imagine every kind of superset
                    model when calculating queries...</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >It would be really handy if we had just one model that we
                    can reason with, and if that model satisfies a query, every
                    possible model will satisfy it too...</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Were you wishing for that? You were, weren&rsquo;t
                    you?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >You&rsquo;re in luck, because that&rsquo;s called the </span
                ><span class="c10">Universal Model</span
                ><span>&nbsp;(also called the </span
                ><span class="c10">Canonical Model</span><span>)</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >Despite the name, it doesn&rsquo;t model the universe;
                    instead, it&rsquo;s a model that can be mapped to every
                    other possible model </span
                ><span class="c36">(well, subsets of them)</span
                ><span class="c5 c8">, but back to that in a second.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_dyzqcsriy1al-0">
            <li class="c3 li-bullet-0">
                <span>Let&rsquo;s say we have a knowledge base of </span
                ><span class="c2 c21">D = {P(c)}</span><span>&nbsp;and </span
                ><span class="c51 c2 c67 c11"
                    >&sum; = {P(x) &rarr; R(x,y) &and; P(y)}</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is virtually the same as the son father example.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s come up with all kinds of models for this
                    knowledge base:</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 564.38px;
                    height: 337.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image10.png"
                    style="
                        width: 564.38px;
                        height: 337.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c12 c55"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_o253h8rg8y4q-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Yikes... it seems to go on forever.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The key idea here is to focus on a representative model;
                    one that is as general as possible.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >That would appear to be the model on the furthest right;
                    it&rsquo;s the only one that acknowledges that it is
                    infinite.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span
                    >The model on the far right is the universal model here. You
                    can map </span
                ><span class="c36">(using a homomorphism, of course)</span
                ><span class="c5 c8"
                    >&nbsp;that universal model to all the other models on the
                    left.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>For example, </span><span class="c2">{z</span
                ><span class="c2 c4">1</span
                ><span class="c2">&nbsp;&rarr; c}</span
                ><span class="c5 c8"
                    >&nbsp;is a homomorphism from the right-most model to the
                    left-most model.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So any queries that work on that model will also work on
                    the others too.</span
                >
            </li>
        </ul>
        <p class="c41"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_qmh12ui0bfmj-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So, to put all this more formally, an instance U is a
                    universal model of D &and; &Sigma; if the following
                    holds:</span
                >
            </li>
        </ul>
        <ol class="c7 lst-kix_iq829hw7bhsj-0 start" start="1">
            <li class="c13 li-bullet-0">
                <span class="c5 c8">U is a model of D &and; &Sigma;</span>
            </li>
            <li class="c13 li-bullet-0">
                <span
                    >&forall;J &isin; models(D &and; &Sigma;), there exists a
                    homomorphism h</span
                ><span class="c4">J</span><span>&nbsp;such that h</span
                ><span class="c4">J</span
                ><span class="c5 c8">(U) &sube; J</span>
            </li>
        </ol>
        <ul class="c7 lst-kix_cmfm7bebbgdf-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is basically what I said before: a universal model is,
                    of course, a model of the database and the ontology, but it
                    can also be mapped to any other model of that same database
                    and ontology.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_cmfm7bebbgdf-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >There is a theorem that states D &and; &Sigma; &#8872; Q,
                    iff U &#8872; Q where U is a universal model of D &and;
                    &Sigma;</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Intuitively, this theorem is true, because if a query works
                    with a universal model, it&rsquo;ll work for every model
                    because the universal model has homomorphisms to the subset
                    of every model in existence.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 587px;
                    height: 276px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image25.png"
                    style="
                        width: 587px;
                        height: 276px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c52" id="h.yuzg5iwphvdg">
            <span class="c64 c8">The Chase</span>
        </h2>
        <ul class="c7 lst-kix_mvdavgwk1mn-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So, basically, universal models are a big deal.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Given a database and an ontology, how do we get one?</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">We use The Chase!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3D7viA70bYZ7U&amp;sa=D&amp;source=editors&amp;ust=1623780154799000&amp;usg=AOvVaw1WUKpjMtD9WdVfidgCBzq4"
                        >We answer questions against trivia masterminds for cash
                        prizes?</a
                    ></span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Stop the clock! That is wrong! Not that kind of
                    chase.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DeiHqkDoFFFU&amp;sa=D&amp;source=editors&amp;ust=1623780154800000&amp;usg=AOvVaw1_wnKSXQQo2QN4fT4s0bMa"
                        >We catch a David Bowie-looking serial killer with a
                        hand fetish?</a
                    ></span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Not that one, either.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_mvdavgwk1mn-0">
            <li class="c3 li-bullet-0">
                <span class="c10">The Chase</span
                ><span class="c5 c8"
                    >&nbsp;is an iterative algorithm used to generate a
                    universal model of a knowledge base.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In The Chase, we use our rules as &ldquo;generators&rdquo;
                    that create new relations.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_mvdavgwk1mn-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Let&rsquo;s say we have:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_mvdavgwk1mn-1 start">
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c11 c21">D = {Person(john)}</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c67 c11"
                    >&Sigma; = {&forall;x Person(x) &rarr; &exist;y
                    hasParent(x,y) &and; Person(y)}</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_mvdavgwk1mn-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s use The Chase to generate our universal
                    model!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In The Chase, we instantiate the right side using values
                    from the left.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In this rule, a Person must exist / be chosen before we can
                    instantiate the hasParent and Person on the right.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >We&rsquo;ll pick &ldquo;john&rdquo; as the person.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Now that we have our argument, we can begin instantiating
                    some new records.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>Since </span><span class="c2">x = &ldquo;john&rdquo;</span
                ><span class="c5 c8">, the right side will become:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_mvdavgwk1mn-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2">hasParent(&ldquo;john&rdquo;, z</span
                ><span class="c2 c4">1</span><span class="c2">), Person(z</span
                ><span class="c2 c4">1</span><span class="c5 c2 c11">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_mvdavgwk1mn-0">
            <li class="c3 li-bullet-0">
                <span>You may be wondering where the z</span
                ><span class="c4">1</span
                ><span class="c5 c8">&nbsp;comes from.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In The Chase, the &ldquo;there exists&rdquo; variables on
                    the right side are replaced with placeholders.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >The placeholder ID gets incremented each time a new one is
                    made, but it can be used like a proper variable now.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>We can do this step again, this time with x = z</span
                ><span class="c4">1</span><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>... and then again, with x = z</span
                ><span class="c4">2</span><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>... and then x = z</span><span class="c4">3</span
                ><span class="c5 c8">.</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >You get the point; it&rsquo;ll go on forever.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >That&rsquo;s because the universal model for this example
                    is infinite, so we&rsquo;ll be generating it forever.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >For examples with universal models that are finite, The
                    Chase algorithm will eventually end.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 416.88px;
                    height: 299.5px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image51.png"
                    style="
                        width: 416.88px;
                        height: 299.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_a343rzar75el-0 start">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Let&rsquo;s formally describe this algorithm.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>A rule </span
                ><span class="c2">&sigma; = &forall;x&forall;y (</span
                ><span class="c2 c22">&phi;(x,y)</span
                ><span class="c2">&nbsp;&rarr; &exist;z </span
                ><span class="c1">&psi;(x,z)</span><span class="c2">)</span
                ><span>&nbsp;is </span><span class="c34">applicable</span
                ><span>&nbsp;to instance </span><span class="c2">J</span
                ><span class="c5 c8">&nbsp;if:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a343rzar75el-1 start">
            <li class="c13 li-bullet-0">
                <span>There exists a homomorphism </span
                ><span class="c2">h</span><span>&nbsp;such that </span
                ><span class="c2">h(</span><span class="c2 c22">&phi;(</span
                ><span class="c22 c43 c10">x</span><span class="c2 c22">,</span
                ><span class="c22 c43 c10">y</span><span class="c2 c22">)</span
                ><span class="c5 c2 c11">) &sube; J</span>
            </li>
            <li class="c13 li-bullet-0">
                <span>There does </span><span class="c99">not</span
                ><span>&nbsp;exist a</span><span class="c2">&nbsp;h</span
                ><span class="c2 c4">|</span><span class="c4 c43 c10">x</span
                ><span class="c2">&nbsp;&sube; g </span><span>such that</span
                ><span class="c2">&nbsp;g(</span><span class="c1">&psi;(</span
                ><span class="c49 c43 c10">x</span><span class="c1">,</span
                ><span class="c49 c43 c10">z</span><span class="c1">)</span
                ><span class="c5 c2 c11">) &sube; J</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a343rzar75el-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Looking at the image below, on the left, if we&rsquo;re
                    trying to do The Chase with that model J and that rule, we
                    wouldn&rsquo;t be able to because there exists a
                    homomorphism &lsquo;g&rsquo;.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However, on the right, the rule is applicable and we can
                    create new records from that rule because a homomorphism
                    &lsquo;g&rsquo; cannot exist.</span
                >
            </li>
        </ul>
        <p class="c12">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 522.5px;
                    height: 125.85px;
                "
                ><img
                    alt=""
                    src="assets/advanced-databases-part-ii/image9.png"
                    style="
                        width: 522.5px;
                        height: 125.85px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0 start">
            <li class="c3 li-bullet-0">
                <span>Let </span
                ><span class="c2">J+ = J &cup;{g(&psi;(x,z))}</span
                ><span>, where </span><span class="c2">g &supe; h</span
                ><span class="c2 c4">|</span><span class="c4 c43 c10">z</span
                ><span>&nbsp; and </span><span class="c2">g(</span
                ><span class="c43 c10">z</span><span class="c2">)</span
                ><span class="c5 c8"
                    >&nbsp;are &ldquo;fresh&rdquo; nulls not in J</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span>The result of applying &sigma; to J is J+, denoted </span
                ><span class="c2">J&lt;&sigma;,h&gt;J+</span
                ><span>&nbsp; - a single </span
                ><span class="c5 c6">chase step</span>
            </li>
            <li class="c3 li-bullet-0">
                <span>If you do two chase steps... would that be </span
                ><span class="c34 c42"
                    ><a
                        class="c9"
                        href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Visual_J%252B%252B&amp;sa=D&amp;source=editors&amp;ust=1623780154810000&amp;usg=AOvVaw0e2B4j2ie2tLCTnZsfmbTP"
                        >J++</a
                    ></span
                ><span class="c5 c8">?</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span>A </span><span class="c10">finite chase</span
                ><span>&nbsp;of </span><span class="c21">D</span
                ><span>&nbsp;with respect to </span
                ><span class="c67">&Sigma;</span
                ><span class="c5 c8">&nbsp;is a finite sequence</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2 c21">D</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;1</span
                ><span class="c2">,h1&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">1</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;2</span
                ><span class="c2">,h2&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">2</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;3</span
                ><span class="c2">,h3&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">3</span
                ><span class="c2">&nbsp;... &lt;</span
                ><span class="c2 c67">&sigma;n</span
                ><span class="c2">,hn&gt;</span><span class="c2 c21">J</span
                ><span class="c51 c2 c4 c21">n</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span>and chase(D,&Sigma;) is defined as the instance </span
                ><span class="c21">J</span><span class="c4 c21">n</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Basically, it&rsquo;s a chase that has an end.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span>An </span><span class="c10">infinite chase</span
                ><span>&nbsp;of </span><span class="c21">D</span
                ><span>&nbsp;with respect to </span
                ><span class="c67">&Sigma;</span
                ><span>&nbsp;is a fair finite sequence </span
                ><span class="c8 c36 c61"
                    >(by fair, we mean all applicable rules will eventually be
                    applied, so it won&rsquo;t just be one rule being spam
                    applied like a depth-first search tree or something)</span
                >
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2 c21">D</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;1</span
                ><span class="c2">,h1&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">1</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;2</span
                ><span class="c2">,h2&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">2</span><span class="c2">&lt;</span
                ><span class="c2 c67">&sigma;3</span
                ><span class="c2">,h3&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">3</span
                ><span class="c2">&nbsp;... &lt;</span
                ><span class="c2 c67">&sigma;n</span
                ><span class="c2">,hn&gt;</span><span class="c2 c21">J</span
                ><span class="c2 c4 c21">n</span
                ><span class="c2 c21">&nbsp;</span><span class="c2">...</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span>and chase(D,&Sigma;) is defined as the instance </span
                ><span class="c93">&#8899;</span
                ><span class="c4 c93">k&ge;0</span
                ><span class="c93">&nbsp;</span><span class="c93 c21">J</span
                ><span class="c4 c93 c21">k</span><span class="c93">&nbsp;</span
                ><span>(where </span><span class="c21">J</span
                ><span class="c4 c21">0</span><span>&nbsp;= </span
                ><span class="c21">D</span><span class="c5 c8">)</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Basically, it&rsquo;s a chase that has no end.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Keep in mind that The Chase will not give you a unique
                    model!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Depending on the order of rule application, you might get
                    different models.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">For example:</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c11 c21">D = {P(a)}</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c67 c11"
                    >&sigma;1 = &forall;x (P(x) &rarr; &exist;y R(y))</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c51 c2 c67 c11"
                    >&sigma;2 = &forall;x (P(x) &rarr; R(x))</span
                >
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Result1 = {</span
                ><span class="c2 c21">P(a), R(z), R(a)</span
                ><span class="c2">}</span><span>&nbsp;</span
                ><span class="c36">(if you do </span
                ><span class="c2 c36">&sigma;1</span
                ><span class="c36">&nbsp;then </span
                ><span class="c2 c36">&sigma;2</span
                ><span class="c8 c61 c36">)</span>
            </li>
            <li class="c13 li-bullet-0">
                <span class="c2">Result2 = {</span
                ><span class="c2 c21">P(a), R(a)</span><span class="c2">}</span
                ><span>&nbsp;</span><span class="c36">(if you do </span
                ><span class="c2 c36">&sigma;2</span
                ><span class="c36">&nbsp;then </span
                ><span class="c2 c36">&sigma;1</span
                ><span class="c8 c61 c36">)</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >However, they are unique up to homomorphic
                    equivalence.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >In order words, they&rsquo;re all homomorphic to each
                    other.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >So semantically, there really is only one universal
                    model.</span
                >
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8">One last thing, just a quick theorem:</span>
            </li>
            <li class="c3 li-bullet-0"><span class="c5 c8">If:</span></li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2 c21">D</span><span class="c2">&nbsp;&and; </span
                ><span class="c2 c67">&Sigma;</span
                ><span class="c2">&nbsp;&#8872; </span
                ><span class="c2 c99">Q</span><span class="c2">&nbsp;iff </span
                ><span class="c2 c21">U</span
                ><span class="c2">&nbsp;&#8872; </span
                ><span class="c2 c99">Q</span><span class="c2">&nbsp;</span
                ><span>where </span><span class="c2 c21">U</span
                ><span>&nbsp;is a universal model of </span
                ><span class="c2 c21">D</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c2 c67">&Sigma;</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0"><span class="c5 c8">And:</span></li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span>chase(</span><span class="c2 c21">D</span><span>, </span
                ><span class="c2 c67">&Sigma;</span
                ><span>) is a universal model of </span
                ><span class="c2 c21">D</span
                ><span class="c2">&nbsp;&and; </span
                ><span class="c2 c67">&Sigma;</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0"><span class="c5 c8">Then:</span></li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-1 start">
            <li class="c13 li-bullet-0">
                <span class="c2 c21">D</span><span class="c2">&nbsp;&and; </span
                ><span class="c2 c67">&Sigma;</span
                ><span class="c2">&nbsp;&#8872; </span
                ><span class="c2 c99">Q</span
                ><span class="c2">&nbsp;iff chase(</span
                ><span class="c2 c21">D</span><span class="c2">,</span
                ><span class="c2 c67">&Sigma;</span
                ><span class="c2">) &#8872; </span
                ><span class="c51 c2 c11 c99">Q</span>
            </li>
        </ul>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span
                    >Basically, a knowledge base can satisfy a query if the
                    result of The Chase can satisfy it </span
                ><span class="c36"
                    >(because the result is just the universal model)</span
                ><span class="c5 c8">.</span>
            </li>
        </ul>
        <p class="c41 c48"><span class="c5 c8"></span></p>
        <ul class="c7 lst-kix_a4jjzrvnci1i-0">
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >But what happens if The Chase is infinite? Our algorithm
                    will go on forever! I need these questions answered! I
                    can&rsquo;t sleep if they&rsquo;re not answered!
                    Please!!</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Sorry, bucko, but it seems like your 30-day time trial has
                    come to a close.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is where the free demo comes to an end.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Pay me &pound;100 for your activation code for the full
                    version of these notes.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8">Just kidding!</span>
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >This is still an active research area, so either nobody
                    knows or it&rsquo;s too bleeding edge to put into a normal
                    Computer Science degree.</span
                >
            </li>
            <li class="c3 li-bullet-0">
                <span class="c5 c8"
                    >Why don&rsquo;t you become a researcher and find out
                    yourself?</span
                >
            </li>
            <li class="c3 li-bullet-0"><span>&#x1f642;</span></li>
        </ul>
    </body>
</html>
