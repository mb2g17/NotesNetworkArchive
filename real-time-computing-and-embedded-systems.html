<html>
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
        <link
            rel="stylesheet"
            href="css/real-time-computing-and-embedded-systems.css"
        />
        <link rel="stylesheet" href="css/page.css" />
    </head>
    <body class="c86">
        <p class="c63 title" id="h.4adsdth0c4fq">
            <span class="c58">Real-Time Computing and Embedded Systems</span>
        </p>
        <p class="c51 subtitle" id="h.8hzm00jg984k">
            <span class="c73 c10 c66">Joshua Gregory</span>
        </p>
        <p class="c69">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.wzytxaiy6wr7">Intro</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.wzytxaiy6wr7">7</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.z7p5r6f0gmzh">Syllabus</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.z7p5r6f0gmzh">7</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.j30qrawj4o52">Introduction</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.j30qrawj4o52">8</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.v9y64ra0za7x"
                    >What is Real-Time?</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.v9y64ra0za7x">8</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.nk2d9ce62ici">Correctness</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.nk2d9ce62ici">8</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.22n7pu6qcf1i"
                    >Steps to (non-Real-Time) correctness</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.22n7pu6qcf1i">8</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.cltppa1hahji"
                    >Embedded Development</a
                ></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.cltppa1hahji">8</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.cb7nnkf52z0z">Customer Lock-in</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.cb7nnkf52z0z">8</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.tj44g939lkc4"
                    >Tool Differentiation</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.tj44g939lkc4">9</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.7cl8go3id49a"
                    >Simple Development</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.7cl8go3id49a">9</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.ncm1esjlp08m"
                    >Tempting Alternatives</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ncm1esjlp08m">9</a></span>
        </p>
        <p class="c20">
            <span class="c0"><a class="c8" href="#h.4hkequ1q5kye">mbed</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.4hkequ1q5kye">9</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.tu6cwr5ek22n"
                    >Beware of Configuration Tools</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.tu6cwr5ek22n">9</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.nggcdn9i4j06">ARM Cortex M</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.nggcdn9i4j06">9</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.rw7vj66cx3a5">Documents</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.rw7vj66cx3a5">9</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.5u72dvkjwf4c"
                    >The Cortex M Family</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.5u72dvkjwf4c">10</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.wr9td9219qpn"
                    >ARM7 vs Cortex M3 (2006)</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.wr9td9219qpn">10</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.eq6nxydw05yx"
                    >Cortex M0+ Implementation</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.eq6nxydw05yx">12</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.60jonjouh4v1">Register Set</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.60jonjouh4v1">12</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.oe0tws3s5tlo">Memory Map</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.oe0tws3s5tlo">13</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.qjcqtbwdlf42">Magic Smoke</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.qjcqtbwdlf42">13</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.2u2m7877y0ao"
                    >Keeping the magic smoke in</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2u2m7877y0ao">14</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.1nkmzwuxy4zy"
                    >Valves (Vacuum Tubes)</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.1nkmzwuxy4zy">14</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.8aqin0mhx9qm">CMOS</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.8aqin0mhx9qm">14</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.xwkzdzigpb4s"
                    >Latch-up is not so bad now</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.xwkzdzigpb4s">15</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.837a0qeq5oe"
                    >Wires are not nodes</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.837a0qeq5oe">16</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ebsaniuh98jz"
                    >Power/ground inductance is bad</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ebsaniuh98jz">16</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.cqa18utgti7l"
                    >Beware of earth loops</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.cqa18utgti7l">16</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.f1k4nj7twfx0"
                    >Absorb noise energy</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.f1k4nj7twfx0">16</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.b4u9ttor76dy"
                    >Wires are transmission lines</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b4u9ttor76dy">16</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.1vbu1c58zmgl"
                    >Mismatched transmission lines</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.1vbu1c58zmgl">17</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.9qzzfaxwa27">Skew</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.9qzzfaxwa27">17</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.4kc6i6xn85j4">Ringing</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.4kc6i6xn85j4">18</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.z9avjovmrws3"
                    >Digital scopes lie</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.z9avjovmrws3">18</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.lkyu6oyipy0q">Ringing is bad</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.lkyu6oyipy0q">18</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.kmd8mjx1r0wp">Clean up a clock</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.kmd8mjx1r0wp">18</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.7btr7ym4enb2"
                    >Keep your fingers out</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.7btr7ym4enb2">19</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.7ule63bwf2p2"
                    >A sense of smell is good</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.7ule63bwf2p2">19</a></span>
        </p>
        <p class="c18">
            <span class="c10 c28 c34"
                ><a class="c8" href="#h.92f99p6z373t">CISC and RISC</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.92f99p6z373t">19</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.xt8vrjuompwl"
                    >Von Neumann Architecture</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.xt8vrjuompwl">19</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.myy6lmmr310u"
                    >Harvard Architecture</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.myy6lmmr310u">20</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.w8b5yonwfbz"
                    >Von Neumann vs. Harvard</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.w8b5yonwfbz">20</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.gq57onjwig2t"
                    >Modern View of Von Neumann Architecture</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.gq57onjwig2t">21</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.1qi9glmb02g4"
                    >Structure of a Harvard architecture CPU</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.1qi9glmb02g4">22</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.p37og9aztz4d"
                    >Modified Harvard Architecture</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.p37og9aztz4d">22</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ho0ovkdjh6dm"
                    >&ldquo;Harvard Mark 1&rdquo;</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ho0ovkdjh6dm">23</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.am4zc1i5frvk">CISC and RISC</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.am4zc1i5frvk">23</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.74kunwyh5hf5"
                    >Example: CISC style</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.74kunwyh5hf5">24</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.yw7bvkab947j"
                    >Example RISC style</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.yw7bvkab947j">24</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.o49hphrft1y8"
                    >Look at the x86 instruction set</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.o49hphrft1y8">24</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.4xd7k1bd5sr4">RISC Philosophy</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.4xd7k1bd5sr4">24</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.3i8186fh051p"
                    >CISC Characteristics</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.3i8186fh051p">25</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.an1755b1iwwq"
                    >One way of looking at it&hellip;</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.an1755b1iwwq">25</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.wjft25h5cmf7"
                    >The RISC 1 (1981)</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.wjft25h5cmf7">25</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.wgq6ocmasrh4"
                    >Other RISC families</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.wgq6ocmasrh4">25</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.lxn77w40fvf5">MIPS</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.lxn77w40fvf5">25</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.wwlih3ni1yoj">SPARC</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.wwlih3ni1yoj">26</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.3kb1b08ldl70">Buses: on board</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.3kb1b08ldl70">26</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.mh8ytqkuy9ps">On-board buses</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.mh8ytqkuy9ps">26</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.gdyf71rpanby"
                    >Classic On-board buses</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.gdyf71rpanby">26</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.xcbqq5jmajnj"
                    >Asynchronous serial interconnect</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.xcbqq5jmajnj">27</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.dimt28mwehac">RS232</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.dimt28mwehac">27</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.og42drtltrw0">MAX232</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.og42drtltrw0">27</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.nhk9n0vspefr"
                    >Differential serial: RS422, RS485</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.nhk9n0vspefr">27</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.sv7abggtoprr"
                    >Care is needed turning around RS485</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.sv7abggtoprr">28</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.b24ogms147ib">I2C</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b24ogms147ib">28</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.gfc7n22a8ndv">I2C Chips</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.gfc7n22a8ndv">28</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.bjzguer8s2xu">SPI</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.bjzguer8s2xu">29</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.4gj282q828aw"
                    >SPI does not need dedicated chips</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.4gj282q828aw">30</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.6736ot7zcz8b">JTAG</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.6736ot7zcz8b">30</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.2ixrc5aheqc6"
                    >LVDS (TIA/EIA-644)</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2ixrc5aheqc6">31</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.h5z0h7ey9vs8">Buses: off board</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.h5z0h7ey9vs8">31</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.o0nj60jedx4a"
                    >Reliability / Safety</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.o0nj60jedx4a">31</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.4rjsg9637t9g">Off-board buses</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.4rjsg9637t9g">32</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.noagmujarszb">RS232</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.noagmujarszb">32</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.1on4f12ft5ms">CAN-BUS</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.1on4f12ft5ms">32</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.cewqza8yn3b5">CAN-BUS parts</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.cewqza8yn3b5">32</a></span>
        </p>
        <p class="c7">
            <span class="c0"><a class="c8" href="#h.2kxx4nz3guco">USB</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2kxx4nz3guco">32</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.5mne65vyp93v"
                    >Firewire (IEEE1394)</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.5mne65vyp93v">32</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.wbjvvedy60zw">Ethernet</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.wbjvvedy60zw">33</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ilh6uyy27qnh"
                    >W5500 SPI Ethernet</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ilh6uyy27qnh">33</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.u431f7b9l5jj"
                    >Don&rsquo;t abuse RJ45 patch leads</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.u431f7b9l5jj">33</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.yvccvm9b35cq">USB</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.yvccvm9b35cq">33</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.tojap3q6rp4z">History</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.tojap3q6rp4z">33</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.h1vx2nxue3me">Evolution</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.h1vx2nxue3me">34</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.tlrea48lezb3"
                    >PC interfaces were a mess</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.tlrea48lezb3">34</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ob63kcpboix5"
                    >Basic characteristics of USB</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ob63kcpboix5">34</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.z1mzg7gcer5o"
                    >Network and Connectors</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.z1mzg7gcer5o">34</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.lb3knnk5kj98">Type C</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.lb3knnk5kj98">35</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.olpxrz66akf6"
                    >Common cable colour assignments</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.olpxrz66akf6">36</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.yxdysdgc4ee8"
                    >Connector evolution</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.yxdysdgc4ee8">36</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.32h5xgbo8vf0">Speed</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.32h5xgbo8vf0">36</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.dcbctj1dk8zq"
                    >And the new Type C</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.dcbctj1dk8zq">36</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ibrk7vru23t7"
                    >A modern standard?</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ibrk7vru23t7">37</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.jqt8t6k3omm5"
                    >Software environment</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.jqt8t6k3omm5">37</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.rygp7nz0e651"
                    >A USB network is a tree</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.rygp7nz0e651">37</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.8lmns03rxpz0">Power</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.8lmns03rxpz0">37</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.zabp1dkgl4rb">Device States</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.zabp1dkgl4rb">38</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.neqe7f6qqof0">On-the-go</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.neqe7f6qqof0">38</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.oosp5ft3ux1h"
                    >Layered protocols: Low Speed Electrical</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.oosp5ft3ux1h">40</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.30eklbqvt2js">Bit layer</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.30eklbqvt2js">40</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.n5732iih3ahq"
                    >NRZI encoding of data bits</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.n5732iih3ahq">40</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.k7v8icxe0l46">Bit-bash</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.k7v8icxe0l46">40</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.unx35uv7atfz">Protocol layer</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.unx35uv7atfz">41</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.jxmjljqurltc"
                    >Four classes of packets</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.jxmjljqurltc">42</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ttz1ejciu1hv">Transactions</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ttz1ejciu1hv">42</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.dvybwcod6ry3"
                    >Interrupt Transfers</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.dvybwcod6ry3">43</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.q23rnp4hico">Control Transfer</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.q23rnp4hico">43</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.mfrdbhy7wemr"
                    >That&rsquo;s a lot of layers</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.mfrdbhy7wemr">44</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ucr1ou80yodt"
                    >Communication Flow</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ucr1ou80yodt">45</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.olj00h7rotb0">Transfer Types</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.olj00h7rotb0">45</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.kyxnos2zffye">Endpoints</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.kyxnos2zffye">45</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.diy1y540g8gj">Device startup</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.diy1y540g8gj">46</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.oglc3v22v786">Descriptors</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.oglc3v22v786">46</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.qfezt8p3xr4i">Enumeration</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.qfezt8p3xr4i">48</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ukt9bhe6bfgs"
                    >Useful USB gizmo and books</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ukt9bhe6bfgs">48</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.rhf737wdvwje">Synchronisation</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.rhf737wdvwje">48</a></span
            >
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.p4n0bct96qxv">Synchronization</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.p4n0bct96qxv">48</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.s5yw4c633xxa">A sad story</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.s5yw4c633xxa">48</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.myn9c69aeido"
                    >Processes and Threads</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.myn9c69aeido">49</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.2xfv6vfmcizk">Process C code</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2xfv6vfmcizk">50</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.d40hmsorufvx">Thread C++ code</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.d40hmsorufvx">51</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.5dvi34kmxlro">Table</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.5dvi34kmxlro">51</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.qenzd46wc22k">Critical Regions</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.qenzd46wc22k">51</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.eumgz96irz1u"
                    >Solutions&hellip;.</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.eumgz96irz1u">51</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.f853a58x38y4"
                    >Mutual Exclusion with Busy Waiting</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.f853a58x38y4">52</a></span>
        </p>
        <p class="c56">
            <span class="c0"
                ><a class="c8" href="#h.fl0xlk2pfv92">Race Conditions</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.fl0xlk2pfv92">52</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.9ts9t3jh9d73"
                    >Another solution?</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.9ts9t3jh9d73">53</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.fl7rt1v9cv4n"
                    >Peterson&rsquo;s Solution</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.fl7rt1v9cv4n">53</a></span>
        </p>
        <p class="c20">
            <span class="c0"><a class="c8" href="#h.p39v4681ikxh">TSL</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.p39v4681ikxh">53</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.cmm1sox5act9"
                    >Test and Set on x86</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.cmm1sox5act9">54</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.5klxdq2rwjvz">Legacy</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.5klxdq2rwjvz">54</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.s2n4lo39qpjn"
                    >Mutual exclusion on the Cortex M0+</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.s2n4lo39qpjn">54</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.ryldirbmyna7"
                    >Disabling interrupts on the M0+</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ryldirbmyna7">55</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.aqfy8neb2lia"
                    >Non-busy synchronization: Sleep and Wakeup</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.aqfy8neb2lia">55</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.yo9mvpq26sf5"
                    >Producer-consumer implementation with fatal race
                    condition</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.yo9mvpq26sf5">56</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.91mo6ockdv3p"
                    >How do we fix this?</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.91mo6ockdv3p">57</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.b56zjjxeb4uq"
                    >Java&rsquo;s synchronized, wait() and notify()</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b56zjjxeb4uq">57</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.hpkuif79mdp9"
                    >Producer/Consumer in Java</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.hpkuif79mdp9">58</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.if4rhxofseml">Bad style</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.if4rhxofseml">58</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.anyc18ojueib">Just plain wrong</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.anyc18ojueib">60</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.h6rjwxw09v4w">Semaphores</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.h6rjwxw09v4w">60</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.dxln48wqjsl2"
                    >Producer-consumer problem using semaphores</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.dxln48wqjsl2">61</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.kbs87s50sayv"
                    >Memory management</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.kbs87s50sayv">61</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.125tj6ey6k4h"
                    >Semaphores in Java, before Java 1.5</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.125tj6ey6k4h">62</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.1lz45preakaj">Message Passing</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.1lz45preakaj">62</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.2nh6m2cf9qzs"
                    >Memory management etc.</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2nh6m2cf9qzs">63</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.i1f37yn6rlcp"
                    >Message queue sizes</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.i1f37yn6rlcp">63</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.xudk1kdnpy3m">Barriers</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.xudk1kdnpy3m">64</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.esme9gevfwbh"
                    >The Dining Philosopher</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.esme9gevfwbh">64</a></span>
        </p>
        <p class="c20">
            <span class="c0"><a class="c8" href="#h.frjsmppxzrxw">Java</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.frjsmppxzrxw">65</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.uuexs3hizzj9"
                    >Modifying solution&hellip;</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.uuexs3hizzj9">68</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.b96hyjbojjl">Working Solution</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b96hyjbojjl">69</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.e2zbd3br6bv6">Java Pthread</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.e2zbd3br6bv6">69</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.x7qbqdtzeqd6"
                    >Java wait() is &ldquo;truly horrid&rdquo;</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.x7qbqdtzeqd6">70</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.b2fh6tcs2bly"
                    >Java wait/notify unfairness</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b2fh6tcs2bly">70</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.mj1smmvey8tk"
                    >Java.util.concurrency</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.mj1smmvey8tk">70</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.m1zfjfqc4ug4">Old Style</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.m1zfjfqc4ug4">70</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.ag8esbiv4rq0">New(ish) Style</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.ag8esbiv4rq0">71</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.bfz3aa80uue0"
                    >AtomicInteger (or Long) is fast</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.bfz3aa80uue0">71</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.z40esu430v51"
                    >POSIX C Semaphores</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.z40esu430v51">72</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.qo12ih9upy27"
                    >The Readers and Writers Problem</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.qo12ih9upy27">73</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.x9nczhocdpen">POSIXC</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.x9nczhocdpen">73</a></span>
        </p>
        <p class="c7">
            <span class="c0"
                ><a class="c8" href="#h.2g55mhx8srdv"
                    >C 2011 language features</a
                ></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.2g55mhx8srdv">74</a></span>
        </p>
        <p class="c20">
            <span class="c0"
                ><a class="c8" href="#h.b5he2g4pfrnl">C++ 2011</a></span
            ><span class="c0"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c0"><a class="c8" href="#h.b5he2g4pfrnl">74</a></span>
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.l394zsq81j13">Scheduling</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.l394zsq81j13">74</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.8lk81buavk2f">Model Checking</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.8lk81buavk2f">74</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.gqle2i8oprw4"
                    >Verifying the correctness of our code</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.gqle2i8oprw4">74</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.nyzrnttjz2na"
                    >What can a program do?</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.nyzrnttjz2na">74</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.3xneied8yad9">Assertions</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.3xneied8yad9">75</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.9bj697963h1q"
                    >What can go wrong?</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.9bj697963h1q">75</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.pqo6svtauslf"
                    >Assert and Assume</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.pqo6svtauslf">76</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.x43v3e70ip0g"
                    >Corrected version of program</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.x43v3e70ip0g">76</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.i08jjcpiyqfx"
                    >Unbounded Model Checking Loops</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.i08jjcpiyqfx">76</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.p9wd7pedztqq"
                    >Bounded Model Checking Loops</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.p9wd7pedztqq">77</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.wvpor748w0pf">Replacement</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.wvpor748w0pf">77</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.o72f0on7knne"
                    >We now have ordinary algebra</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.o72f0on7knne">78</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.4cniq5f3awli"
                    >Feed the expression to an SMT solver</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.4cniq5f3awli">78</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.k8anjemfhk46"
                    >Proof By Induction</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.k8anjemfhk46">78</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.hnutmw5vh64x">Inductive Proof</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.hnutmw5vh64x">79</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.5ih9mzrobgze">The invariant</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.5ih9mzrobgze">79</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.ejjxuxs93k0l">Not quite enough</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.ejjxuxs93k0l">80</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.egfhp6ww6cd"
                    >Where do these invariants come from?</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"><a class="c8" href="#h.egfhp6ww6cd">80</a></span>
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.j4hesdbtm4jm"
                    >Now the proof falls into three parts:</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.j4hesdbtm4jm">81</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.fuz7pw6f3x8c">Base case</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.fuz7pw6f3x8c">81</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.kfh3m7b0sqry">Inductive step</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.kfh3m7b0sqry">81</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.4o3eg01bosxy"
                    >Termination condition</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.4o3eg01bosxy">82</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.20x9gqlr72oe"
                    >It is all much harder in practice</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.20x9gqlr72oe">82</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.7mkot9dje7gn">DSP</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.7mkot9dje7gn">82</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.lb14e79gj1n5"
                    >Model Checking Synchronisation</a
                ></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.lb14e79gj1n5">82</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.emfqakpzz66v">ESBMC</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.emfqakpzz66v">82</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.wkkdjutm4042">Automata</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.wkkdjutm4042">82</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.5g1bhhmqvt86"
                    >FreeRTOS Example?</a
                ></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.5g1bhhmqvt86">83</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.l4wbdit63o03">Lab Stuff?</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.l4wbdit63o03">83</a></span
            >
        </p>
        <p class="c18">
            <span class="c34 c10 c28"
                ><a class="c8" href="#h.thia7gavys6m">TL;DR</a></span
            ><span class="c34 c10 c28"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c34 c10 c28"
                ><a class="c8" href="#h.thia7gavys6m">83</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.htwaua983wt4"
                    >What is a real time system?</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.htwaua983wt4">83</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.900h1yogq2o4"
                    >Three types of correctness:</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.900h1yogq2o4">83</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.r4rrjvi8wdd5"
                    >Make real time system correct</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.r4rrjvi8wdd5">83</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.ub2qjf8tzif9"
                    >Embedded Development</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.ub2qjf8tzif9">84</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.u4z68alefafh">ARM Cortex M</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.u4z68alefafh">84</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.g7gwx6qhe0lg">Magic Smoke</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.g7gwx6qhe0lg">86</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.uqvmx9b4ti53"
                    >Von Neumann, Harvard, CISC and RISC</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.uqvmx9b4ti53">87</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.mo3n2dvullh8">On-board Buses</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.mo3n2dvullh8">87</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.qdptv15z75g3">Off-board Buses</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.qdptv15z75g3">88</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"><a class="c8" href="#h.uglou0ccc8a9">USB</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.uglou0ccc8a9">88</a></span
            >
        </p>
        <p class="c7">
            <span class="c10"
                ><a class="c8" href="#h.ko0anx852h2w">Synchronisation</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.ko0anx852h2w">90</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.54b50p1y85n5"
                    >Processes and Threads</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.54b50p1y85n5">90</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.4ur57qfpwbsd">Process C code</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.4ur57qfpwbsd">90</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.4dl0abpg5e2v">Thread C++ code</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.4dl0abpg5e2v">91</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.av0n2em9uwsz">Table</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.av0n2em9uwsz">92</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.6989dsnvxeta"
                    >Critical Regions (Critical Sections)</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.6989dsnvxeta">92</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.cp3sdnjsd7t3">Race Conditions</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.cp3sdnjsd7t3">92</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.w41lmiwz35wj"
                    >How will we solve these problems?</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.w41lmiwz35wj">93</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.l3ihcvjv89bu"
                    >Peterson&rsquo;s Solution</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.l3ihcvjv89bu">93</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.52zkh0gltj83"
                    >Peterson&rsquo;s Solution Code</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.52zkh0gltj83">93</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.oi3c8tadjcy7">Busy waiting:</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.oi3c8tadjcy7">94</a></span
            >
        </p>
        <p class="c57">
            <span class="c10"
                ><a class="c8" href="#h.9m4q72wnykg"
                    >Volatile Keyword Note</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"><a class="c8" href="#h.9m4q72wnykg">94</a></span>
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.gqy975wts6q5"
                    >Test and Set Lock (TSL)</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.gqy975wts6q5">94</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.28fv2nrwkkv4"
                    >Non-busy synchronization</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.28fv2nrwkkv4">95</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.roe1d2c5inox">Sleep and Wakeup</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.roe1d2c5inox">95</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.mfp6klx2cut3"
                    >Implementations in Java</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.mfp6klx2cut3">95</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.97zant66deqs"
                    >Code (for Producer/Consumer)</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.97zant66deqs">95</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.m6vu3xy1da7n">Fairness</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.m6vu3xy1da7n">96</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.cvmrw7xkd0lh">Semaphores</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.cvmrw7xkd0lh">96</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.1icocplfn8kr"
                    >Producer/Consumer with Semaphores Code</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.1icocplfn8kr">97</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.pynwrk8z6o8">POSIX</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"><a class="c8" href="#h.pynwrk8z6o8">98</a></span>
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.5jfd1xw2atk">Message Passing</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"><a class="c8" href="#h.5jfd1xw2atk">98</a></span>
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.4dsw1455nz2"
                    >Code in C Producer/Consumer</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"><a class="c8" href="#h.4dsw1455nz2">98</a></span>
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.kel3doi1l46s">Barriers</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.kel3doi1l46s">99</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.gsk1obq9ebfs"
                    >The Dining Philosophers Problem.</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.gsk1obq9ebfs">99</a></span
            >
        </p>
        <p class="c56">
            <span class="c10"
                ><a class="c8" href="#h.x3jv47qawh1d"
                    >Java code; working solution</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.x3jv47qawh1d">100</a></span
            >
        </p>
        <p class="c20">
            <span class="c10"
                ><a class="c8" href="#h.yeb5fhl3no70">Model Checking</a></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.yeb5fhl3no70">101</a></span
            >
        </p>
        <p class="c54 c59">
            <span class="c10"
                ><a class="c8" href="#h.riz8evxneh9i"
                    >Other stuff we sadly didn&rsquo;t get to do in a real time
                    module</a
                ></span
            ><span class="c10"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c10"
                ><a class="c8" href="#h.riz8evxneh9i">102</a></span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.wzytxaiy6wr7"><span class="c17">Intro</span></h1>
        <p class="c13">
            <span class="c1"
                >Basically this is a summary of the slides. Okay this module was
                a bit of a mess with the lectures, so following shows the
                updated syllabus Denis showed us on the last lecture before
                christmas.</span
            >
        </p>
        <h1 class="c25" id="h.z7p5r6f0gmzh">
            <span class="c17">Syllabus</span>
        </h1>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Issues and concepts</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Definition of real-time </span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Temporal and event determinism</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Architecture review and interfacing</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Interrupts, traps and events</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Response times and latency</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Real-time clocks</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Application domains</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0"><span class="c45">DSP</span></li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Safety critical</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Small embedded</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Large-scale distributed</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Low-level programming for real-time</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0"><span class="c1">I/O</span></li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Concurrency: memory models and synchronisation
                    primitives</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Monitors/condition variables</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Semaphores</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Optimistic scheduling</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >ARM and Intel assembly language, integration with C</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Architectural issues, </span
                ><span class="c45">memory models</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0"><span class="c45">Scheduling</span></li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0"><span class="c45">RMS</span></li>
            <li class="c13 c21 li-bullet-0"><span class="c45">EDF</span></li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Priority inversion</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Time triggered</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Operating systems</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Protected modes, virtual memory</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Device drivers</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Internet of things: TinyOS &amp; </span
                ><span class="c45">Contiki</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">FreeRTOS</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Real-Time Linux</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Languages in real-time</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">C and C++ standards: MISRA</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0"><span class="c1">Correctness</span></li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Concurrency Issues</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c45">Process algebras</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Model checkers, </span
                ><span class="c45">temporal logic</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Embedded Systems</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_1v45ik4m7wcl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Example systems/applications</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Hand-on experience with software development</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Operating systems (eg </span
                ><span class="c83">ContikiOS</span><span>, FreeRTOS, </span
                ><span class="c83">Android</span><span class="c1">)</span>
            </li>
        </ul>
        <h1 class="c25" id="h.j30qrawj4o52">
            <span class="c17">Introduction</span>
        </h1>
        <h2 class="c12" id="h.v9y64ra0za7x">
            <span class="c11">What is Real-Time?</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >A real-time system is any information processing system which
                has to respond to externally generated input stimuli within a
                finite and specified period.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                >In computer science, real-time computing (RTC), or reactive
                computing describes hardware and software systems subject to a
                &quot;real-time constraint&quot;, for example from event to
                system response. Real-time programs must guarantee response
                within specified time constraints, often referred to as
                &quot;deadlines&quot;. </span
            ><span class="c15">[-Wiki]</span>
        </p>
        <p class="c13 c14"><span class="c15"></span></p>
        <ul class="c3 lst-kix_u30w5rb6t6p-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The correctness depends not only on the logical result but
                    also the time it was delivered.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Failure to respond is as bad as the wrong response!</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.nk2d9ce62ici">
            <span class="c11">Correctness</span>
        </h2>
        <ul class="c3 lst-kix_c9pmdc947w0q-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Partial correctness: If a result is returned, it is
                    correct. Established using invariants.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Total correctness: Will terminate and returns a correct
                    result. Troubled by the halting problem.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Real-time correctness: will return a correct result by the
                    deadline.
                </span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.22n7pu6qcf1i">
            <span class="c29">Steps to (non-Real-Time) correctness</span>
        </h3>
        <ol class="c3 lst-kix_ob1ninwjt9ai-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Use idealised mathematical types to simplify the
                    reasoning.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Establish partial correctness.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Establish that the function will terminate.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Arrange to cope with any problems from C&rsquo;s restricted
                    int implementation.</span
                >
            </li>
        </ol>
        <h1 class="c25" id="h.cltppa1hahji">
            <span class="c17">Embedded Development</span>
        </h1>
        <h2 class="c12" id="h.cb7nnkf52z0z">
            <span class="c11">Customer Lock-in</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >Each vendor used to have their own architecture. But now,
                everybody makes ARM Cortex M. They try to differentiate on
                peripherals and tools.</span
            >
        </p>
        <h3 class="c31" id="h.tj44g939lkc4">
            <span class="c29">Tool Differentiation</span>
        </h3>
        <ul class="c3 lst-kix_vy8wzu8vsz3-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Build toolchain will usually be either ARM/Keil, IAR or
                    GNU.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Clang/LLVM is now a reasonable open-source choice.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >IDE is likely to be eclipse, the plugin development is
                    hard.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Differentiation is on configurable plugins, like Processor
                    Expert. They make the development chain much more
                    complex.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >They are there to offer portability between ARM and the
                    vendor&rsquo;s (legacy?) architectures, while locking you
                    out of competing vendors.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.7cl8go3id49a">
            <span class="c11">Simple Development</span>
        </h2>
        <ul class="c3 lst-kix_ekh9llmmm26e-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">vim, gcc, git, make, and a loader</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Possibly substitute Notepad++</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Realterm, gdb, C on the host</span>
            </li>
        </ul>
        <h3 class="c31" id="h.ncm1esjlp08m">
            <span class="c29">Tempting Alternatives</span>
        </h3>
        <ul class="c3 lst-kix_zh01zapu9ll8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Arduino, now also for ARM, is slightly hacked C++
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Automated includes</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Lots of libraries</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Scripts</span></li>
        </ul>
        <h3 class="c31" id="h.4hkequ1q5kye"><span class="c29">mbed</span></h3>
        <ul class="c3 lst-kix_71tsmyj2vbkz-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Internet-based environment</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Inspired in part by the StudentRobotics Python
                    environment</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.tu6cwr5ek22n">
            <span class="c11">Beware of Configuration Tools</span>
        </h2>
        <ul class="c3 lst-kix_24k4sf5i54go-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Don&rsquo;t get locked in.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Know your dependencies, or you won&rsquo;t be able to
                    debug.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The demos are seductive, but know what is actually running
                    on your board.</span
                >
            </li>
        </ul>
        <h1 class="c25" id="h.nggcdn9i4j06">
            <span class="c17">ARM Cortex M</span>
        </h1>
        <h2 class="c12" id="h.rw7vj66cx3a5">
            <span class="c11">Documents</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >There are basic documents/reference manuals available for ARM
                stuff and for our board (FRDM-KW41Z). Links can be found on
                slides.</span
            >
        </p>
        <h2 class="c12" id="h.5u72dvkjwf4c">
            <span class="c11">The Cortex M Family</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 301.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image23.png"
                    style="
                        width: 602px;
                        height: 301.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.wr9td9219qpn">
            <span class="c11">ARM7 vs Cortex M3 (2006)</span>
        </h2>
        <p class="c13 c14"><span class="c1"></span></p>
        <a id="t.f5a7ab1a4a2b66ca977bf280f24a95688afd539b"></a><a id="t.0"></a>
        <table class="c79">
            <tbody>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c32"><span class="c15">Features</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c32"><span class="c1">ARM7TDMI-S</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c32"><span class="c1">Cortex-M3</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Architecture</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">ARMv4T (von Neumann)</span>
                        </p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">ARMv7-M (Harvard)</span>
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">ISA Support</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Thumb / ARM</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">Thumb / Thumb-2</span>
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Pipeline</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">3-Stage</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">3-Stage + branch speculation</span>
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Interrupts</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">FIQ / IRQ</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1"
                                >NMI + 1 to 240 Physical Interrupts</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c15">Interrupt Latency</span>
                        </p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">24-42 Cycles</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">12 Cycles</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Sleep Modes</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">None</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Intergrated</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c15">Memory Protection</span>
                        </p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">None</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1"
                                >8 region Memory Protection Unit</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Dhrystone</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">0.95 DMIPS/MHz (ARM mode)</span>
                        </p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">1.25 DMIPS/MHz</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c15">Power Consumption</span>
                        </p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">0.28mW/MHz</span></p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">0.19mW/MHz</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c36" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Area</span></p>
                    </td>
                    <td class="c33" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">0.62mm&sup2; (Core Only)</span>
                        </p>
                    </td>
                    <td class="c24" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1"
                                >0.86mm&sup2; (Core * Peripherals)</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 508px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image41.png"
                    style="
                        width: 602px;
                        height: 508px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.eq6nxydw05yx">
            <span class="c11">Cortex M0+ Implementation</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 380px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image31.png"
                    style="
                        width: 602px;
                        height: 380px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.60jonjouh4v1">
            <span class="c11">Register Set</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 393.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image32.png"
                    style="
                        width: 602px;
                        height: 393.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.oe0tws3s5tlo">
            <span class="c11">Memory Map</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 274.29px;
                    height: 576.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image71.png"
                    style="
                        width: 274.29px;
                        height: 576.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h1 class="c25" id="h.qjcqtbwdlf42">
            <span class="c17">Magic Smoke</span>
        </h1>
        <ul class="c3 lst-kix_uagilef9uc4-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Sometimes things don&rsquo;t go how you expect when making
                    and running a hardware system.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Sometimes the &nbsp;&ldquo;</span
                ><span class="c2"
                    >m a g i c &nbsp; &nbsp;s m o k e&rdquo; &nbsp;</span
                ><span class="c1">can leak out. </span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Basically that means harmful chemicals like HF, AsH</span
                ><span class="c5">3</span><span>, SiH</span
                ><span class="c5">4</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">They kill people.</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">That is bad.</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Because people die.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Why is this bad?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Okay let&rsquo;s not get into philosophy now&hellip;.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.2u2m7877y0ao">
            <span class="c11">Keeping the magic smoke in</span>
        </h2>
        <p class="c13"><span class="c1">Good ways to keep it in are:</span></p>
        <ul class="c3 lst-kix_ypc437yciqki-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Good grounds</span></li>
        </ul>
        <ul class="c3 lst-kix_ypc437yciqki-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Short thick copper wires that cannot come disconnected,
                    even transiently.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_ypc437yciqki-0">
            <li class="c9 li-bullet-0">
                <span>Power supply (V</span><span class="c5">cc</span
                ><span class="c1"
                    >) should always be the correct voltage and the current
                    limited appropriately.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Never take an input or output outside the range 0...V</span
                ><span class="c5">cc</span><span class="c1">.</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_ypc437yciqki-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">No inputs when unpowered.</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Don&rsquo;t draw too much current from an output.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.1nkmzwuxy4zy">
            <span class="c11">Valves (Vacuum Tubes)</span>
        </h2>
        <p class="c13"><span class="c1">They were really tough.</span></p>
        <ul class="c3 lst-kix_7in5y9bn08rj-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >So long as you didn&rsquo;t break the glass, they were
                    fine.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Except for the cathode.</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_7in5y9bn08rj-1 start">
            <li class="c13 c21 li-bullet-0">
                <span
                    >The cathode had the magic metal that made the electrons and
                    you could </span
                ><span class="c2">strip </span><span>it and lose </span
                ><span class="c2">emission</span><span class="c1">.</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>And the </span><span class="c2">heater/filament.</span
                ><span class="c1"
                    >&nbsp;That could have a high inrush current and burn
                    out.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.8aqin0mhx9qm"><span class="c11">CMOS</span></h2>
        <p class="c13">
            <span class="c28"
                >(Complementary metal&ndash;oxide&ndash;semiconductor) </span
            ><span class="c1">is more fragile...</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span>Latch-up used to be a serious problem. A </span
            ><span class="c2">parasitic </span
            ><span
                >four-layer device could turn the part into a permanent short
                circuit if you took a pin outside 0..V</span
            ><span class="c5">cc</span><span class="c1">.</span>
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 386.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image47.png"
                    style="
                        width: 602px;
                        height: 386.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.xwkzdzigpb4s">
            <span class="c11">Latch-up is not so bad now</span>
        </h2>
        <ul class="c3 lst-kix_ls0j58q988uy-0 start">
            <li class="c9 li-bullet-0">
                <span>We have protective diodes between pins and 0, V</span
                ><span class="c5">cc</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >BUT: Where does the conducted current go?</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_ls0j58q988uy-1 start">
            <li class="c13 c21 li-bullet-0">
                <span>V</span><span class="c5">cc</span
                ><span class="c1">&nbsp;goes up!</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Ground goes down!</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_ls0j58q988uy-0">
            <li class="c9 li-bullet-0">
                <span>A </span><span class="c2">different </span
                ><span class="c1">chip might lose its magic smoke.</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 238.47px;
                    height: 316.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image81.png"
                    style="
                        width: 238.47px;
                        height: 316.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.837a0qeq5oe">
            <span class="c11">Wires are not nodes</span>
        </h2>
        <ul class="c3 lst-kix_q2e04xtdo3iu-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Any wire has inductance and, if you&rsquo;re unlucky,
                    resistance and capacitance too.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <img
                    src="assets/real-time-computing-and-embedded-systems/image1.png"
                />
            </li>
        </ul>
        <ul class="c3 lst-kix_q2e04xtdo3iu-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >At high frequencies (skin thickness &lt;&lt; r)</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_q2e04xtdo3iu-2 start">
            <li class="c13 c75 li-bullet-0">
                <span class="c1"
                    >L is in
                    nH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length (l)
                    and radius (r) in cm</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_q2e04xtdo3iu-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It goes up as the wire gets longer (obviously) and as the
                    wire gets thinner. Use a thick wire, or a large area of PCB
                    copper, for low inductance.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.ebsaniuh98jz">
            <span class="c11">Power/ground inductance is bad</span>
        </h2>
        <ul class="c3 lst-kix_9bd83gbxdyd2-0 start">
            <li class="c9 li-bullet-0">
                <span>Use a </span><span class="c2">ground plane </span
                ><span class="c1">or short thick wire for ground.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Use decoupling capacitors to reduce the a.c. impedance of
                    V</span
                ><span class="c5">cc</span><span class="c1">&nbsp;but,</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_9bd83gbxdyd2-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >A capacitor and it&rsquo;s leads can form a resonant
                    circuit.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Some electrolysis are rolled up aluminium foil: lots of
                    inductance.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span
                    >People often use 10&micro;F tantalum and 100nF ceramic in
                    parallel. This can, however, act as a parallel tuned circuit
                    at some frequencies, providing no </span
                ><span class="c2 c40">decoupling.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c34 c74 c66"
                >As a computer science student writing these notes, I do not
                understand &gt;70% of the words in this subsection lol.</span
            >
        </p>
        <h2 class="c12" id="h.cqa18utgti7l">
            <span class="c11">Beware of earth loops</span>
        </h2>
        <ul class="c3 lst-kix_ioq05k8jzrxs-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Use a common grounding point for all circuits.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Do not create grounded loops: any stray 50Hz fields will
                    induce an EMF (electromotive force).</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Do not disconnect protective grounds (</span
                ><span class="c70">green</span><span>/</span
                ><span class="c78">yellow </span
                ><span>mains wires): you will die </span
                ><span class="c62"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://emojipedia.org/skull-and-crossbones/&amp;sa=D&amp;source=editors&amp;ust=1623776231202000&amp;usg=AOvVaw3YYg8NHm7UrytSgl0momzT"
                        >&#9760;&#65039;</a
                    ></span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.f1k4nj7twfx0">
            <span class="c11">Absorb noise energy</span>
        </h2>
        <ul class="c3 lst-kix_tbjbdjhr0kfu-0 start">
            <li class="c9 li-bullet-0">
                <span>Decoupling conducts noise from V</span
                ><span class="c5">cc</span
                ><span class="c1">&nbsp;to ground etc.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It would be better to dissipate it as heat.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Ferrite beads, which create lossey inductors at HF, are
                    good for this.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_tbjbdjhr0kfu-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Slip them over power leads.</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span
                    >Slip them over twisted-pair signals. The signal itself is
                    unaffected (equal and opposite currents) but </span
                ><span class="c2">common mode </span
                ><span class="c1">noise is suppressed.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.b4u9ttor76dy">
            <span class="c11">Wires are transmission lines</span>
        </h2>
        <ul class="c3 lst-kix_q00gdskjm456-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The capacitance and inductance of a cable act together to
                    form a transmission line.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>The characteristic impedance, Z</span
                ><span class="c5">0</span
                ><span class="c1"
                    >, is the ratio of inductance to capacitance. It goes up as
                    the wires get thinner and down as they get closer or if you
                    use a high permittivity dielectric.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">It is usually too high&hellip;</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >If you terminate a transmission line with a (resistive)
                    load at Z</span
                ><span class="c5">0</span
                ><span>, then it looks like a load of Z</span
                ><span class="c5">0</span
                ><span class="c1"
                    >&nbsp;at the other end, regardless of length. The signal is
                    undistorted but delayed.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.1vbu1c58zmgl">
            <span class="c11">Mismatched transmission lines</span>
        </h2>
        <ul class="c3 lst-kix_zwmrbtie1us-0 start">
            <li class="c9 li-bullet-0">
                <span>If you terminate with anything other than a real Z</span
                ><span class="c5">0</span
                ><span class="c1">, then the line is mismatched.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It is like the partial reflection that happens when light
                    enters water; the refractive index discontinuity for light
                    is equivalent to the Z discontinuity for as transmission
                    line.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    style="
                        overflow: hidden;
                        display: inline-block;
                        margin: 0px 0px;
                        border: 0px solid #000000;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                        width: 550px;
                        height: 318px;
                    "
                    ><img
                        alt=""
                        src="assets/real-time-computing-and-embedded-systems/image69.png"
                        style="
                            width: 550px;
                            height: 318px;
                            margin-left: 0px;
                            margin-top: 0px;
                            transform: rotate(0rad) translateZ(0px);
                            -webkit-transform: rotate(0rad) translateZ(0px);
                        "
                        title=""
                /></span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Ooooo cooooool strawssss and they are refracted in waterrrr
                    ooooooooooooooo</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c34 c74 c66"
                    >Thought the notes were getting a bit dull.</span
                >
            </li>
            <li class="c9 li-bullet-0"><span class="c1">This is bad.</span></li>
        </ul>
        <ul class="c3 lst-kix_zwmrbtie1us-1 start">
            <li class="c13 c21 li-bullet-0">
                <span
                    >If the line is mismatched at both ends, the signal will
                    bounce backwards and forwards creating terrible </span
                ><span class="c2">ringing</span><span class="c1">.</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >In a high power system, the forward and reflected signals
                    (waves) will interfere and may cause insulation to break
                    down at voltage antinodes.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.9qzzfaxwa27"><span class="c11">Skew</span></h2>
        <ul class="c3 lst-kix_4ldwte7lxrdb-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If your transmission line is properly matched, you also
                    need to ensure that the line is the same length for all
                    signals. Otherwise, the clock and data might arrive at the
                    wrong relative times.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Sending the clock in the opposite direction to the data is
                    always a bad idea.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>I [Denis] won&rsquo;t tell you about </span
                ><span class="c2">dispersion</span
                ><span class="c1"
                    >&nbsp;yet [and probably never]; it is when different
                    frequency components travel down the transmission line at
                    different speeds. [but he just basically did tell us in the
                    slides!]</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.4kc6i6xn85j4">
            <span class="c11">Ringing</span>
        </h2>
        <ul class="c3 lst-kix_718b6b8i1cko-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Can arise whenever there is inductance and capacitance to
                    form a resonant circuit.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >There always is: all leads have inductance, all inputs have
                    capacitance. And transmission lines have lots of both.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 546.5px;
                    height: 278.7px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image56.png"
                    style="
                        width: 546.5px;
                        height: 278.7px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.z9avjovmrws3">
            <span class="c29">Digital scopes lie</span>
        </h3>
        <ul class="c3 lst-kix_c262b88uwr46-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >They make a horrid ringing signal look good.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If they are not triggering, they show misleading stale
                    data.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Test instruments also:</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_c262b88uwr46-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Load the test points,</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Create earth loops,</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Inject noise back into the system.</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_c262b88uwr46-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Using a x10 probe helps reduce loading on the circuit and
                    protects the oscilloscope. Don&rsquo;t forget to tell the
                    &lsquo;scope it&rsquo;s there.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.lkyu6oyipy0q">
            <span class="c29">Ringing is bad</span>
        </h3>
        <ul class="c3 lst-kix_rswu0x4v1v48-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If the ringing crosses a logic threshold, you&rsquo;ll see
                    an extra (clock?) pulse.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>If the ringing goes outside 0...V</span
                ><span class="c5">cc</span
                ><span class="c1"
                    >, you may get latch-up or inject signals into other parts
                    of the circuit.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Clocks are particularly problematic. Always check
                    them.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.kmd8mjx1r0wp">
            <span class="c11">Clean up a clock</span>
        </h2>
        <ul class="c3 lst-kix_g4wnv5lizizh-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Easy: a small series resistor, tens of Ohms, in the signal
                    damps ringing.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Better: a Schmidt trigger squares off the signal, e.g.
                    4584.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_g4wnv5lizizh-1 start">
            <li class="c13 c21 li-bullet-0">
                <span>See </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.fairchildsemi.com/an/AN/AN-140.pdf&amp;sa=D&amp;source=editors&amp;ust=1623776231208000&amp;usg=AOvVaw2Od0R9JHPxhJsCb3mqrwRU"
                        >http://www.fairchildsemi.com/an/AN/AN-140.pdf</a
                    ></span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_g4wnv5lizizh-0">
            <li class="c9 li-bullet-0">
                <span>Possibly: </span><span class="c2">slug</span
                ><span class="c1"
                    >&nbsp;the signal with a first order lag (R-C) before the
                    Schmidt trigger. But this delays things.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Best: Use proper line drivers/receivers and properly
                    matched twisted pair transmission line.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If all else fails: Use optical drivers/receivers and a
                    fibre.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.7btr7ym4enb2">
            <span class="c11">Keep your fingers out</span>
        </h2>
        <ul class="c3 lst-kix_7ky2gbvznhl3-0 start">
            <li class="c9 li-bullet-0">
                <span>You can carry thousands of volts of </span
                ><span class="c2">static</span
                ><span class="c1">. The magic smoke will leak you out.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>You can carry a volt of </span><span class="c2">hum</span
                ><span class="c1"
                    >. Enough to blow the speakers if you touch an audio
                    input.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Battery-powered equipment is not necessarily safe.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.7ule63bwf2p2">
            <span class="c11">A sense of smell is good</span>
        </h2>
        <p class="c13">
            <span class="c1">Different magic smokes smell different:</span>
        </p>
        <ul class="c3 lst-kix_t7a99pmb7fc4-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Epoxy smoke</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Selenium smoke</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">SRBP smoke</span></li>
            <li class="c9 li-bullet-0">
                <span
                    >Be very careful if the magic smoke leaks out of anything
                    with Beryllium Oxide insulation.</span
                >
            </li>
        </ul>
        <h1 class="c25" id="h.92f99p6z373t">
            <span class="c17">CISC and RISC</span>
        </h1>
        <p class="c51 subtitle" id="h.3rwtvkg6gkbs">
            <span class="c73 c10 c66"
                >Von Neumann, Harvard, CISC and RISC
            </span>
        </p>
        <p class="c51 subtitle" id="h.wkk8qb21a5jg">
            <span class="c73 c61 c66"
                >(Not sure if we actually went through these slides in lectures,
                but probably useful to know)</span
            >
        </p>
        <p class="c13">
            <span class="c1"
                >There are two common ways to store programs and data.</span
            >
        </p>
        <h2 class="c12" id="h.xt8vrjuompwl">
            <span class="c11">Von Neumann Architecture</span>
        </h2>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 362.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image20.png"
                    style="
                        width: 602px;
                        height: 362.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_eoowmdgk79k8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The programs and data are both stored in the same memory
                    space.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.myy6lmmr310u">
            <span class="c11">Harvard Architecture</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 348px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image58.png"
                    style="
                        width: 602px;
                        height: 348px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_2wftx95siogm-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The memory and data are stored separately.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.w8b5yonwfbz">
            <span class="c11">Von Neumann vs. Harvard</span>
        </h2>
        <p class="c13 c14"><span class="c1"></span></p>
        <a id="t.e3ec33715908e7565063d219352c7d0567e51206"></a><a id="t.1"></a>
        <table class="c79">
            <tbody>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32"><span class="c15">Von Neumann</span></p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32"><span class="c15">Harvard</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Theoretical design based on the stored-program
                                computer concept</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Modern computer architecture based on the
                                Harvard Mark I relay-based computer model</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Uses same physical memory address for
                                instructions (program) and data</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Uses separate memory and addresses for
                                instructions and data</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Processor needs two clock cycles to execute an
                                instruction</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Processor needs one cycle to complete an
                                instruction</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Simpler control unit design and development of
                                one is cheaper and faster</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Control unit for two buses is more complicated
                                which adds to the development cost</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Data transfers and instruction fetches cannot
                                be performed simultaneously</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Data transfers and instruction fetches can be
                                performed at the same time</span
                            >
                        </p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c53" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Used in personal computer, laptops and
                                workstations</span
                            >
                        </p>
                    </td>
                    <td class="c35" colspan="1" rowspan="1">
                        <p class="c32">
                            <span class="c1"
                                >Used in microcontrollers and signal
                                processing</span
                            >
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="c12" id="h.gq57onjwig2t">
            <span class="c11">Modern View of Von Neumann Architecture</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 352px;
                    height: 485px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image48.png"
                    style="
                        width: 352px;
                        height: 485px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.1qi9glmb02g4">
            <span class="c11">Structure of a Harvard architecture CPU</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 404px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image57.png"
                    style="
                        width: 602px;
                        height: 404px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_atltvnm84win-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Programs and data may have a separate address space.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h2 class="c12" id="h.p37og9aztz4d">
            <span class="c11">Modified Harvard Architecture</span>
        </h2>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 184px;
                    height: 401px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image59.png"
                    style="
                        width: 184px;
                        height: 401px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_wlanrdsi9es-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Paths to data and instructions are different/optimised but
                    link to one common RAM via caches.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Most CPUs now use this.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.ho0ovkdjh6dm">
            <span class="c11">&ldquo;Harvard Mark 1&rdquo;</span>
        </h2>
        <p class="c51 subtitle" id="h.tw08kpcad3mf">
            <span class="c73 c10 c66"
                >Or IBM Automatic Sequence Controlled Calculator</span
            >
        </p>
        <ul class="c3 lst-kix_2md26musz1v6-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Electromechanical computer from around 1944</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">No conditional branch instruction!</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Led to the term &ldquo;Harvard architecture&rdquo;</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.am4zc1i5frvk">
            <span class="c11">CISC and RISC</span>
        </h2>
        <ul class="c3 lst-kix_igbdlbreh95t-0 start">
            <li class="c9 li-bullet-0">
                <span>CISC - </span
                ><span class="c15">Complex Instruction Set Architecture</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>RISC - </span
                ><span class="c15"
                    >Reduced Set Instruction Set Architecture</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c15"></span></p>
        <ul class="c3 lst-kix_jw5optm7booo-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >University of California Berkeley RISC group coined the
                    term RISC and made a cpu called RISC 1</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Soon after Stanford made a similar cpu: MIPS</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">SPARC also emerged from SUN</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Early RISC CPUs had about 50 instructions compared to
                    200-300 aim was to simplify CPU to process (and start)
                    instructions faster</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.74kunwyh5hf5">
            <span class="c29">Example: CISC style</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >add R1, (R2)
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            >
        </p>
        <p class="c13 c23">
            <span class="c40 c2"
                >R1 = R1 + (value from address stored in R2)
            </span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">movl (%ebx, %esi, 4), %eax </span></p>
        <p class="c13 c23">
            <span class="c40 c2"
                >Multiply contents of esi by 4, add result to contents of ebx,
                treat result as an address &ndash; copy what is there to
                register eax</span
            >
        </p>
        <h3 class="c31" id="h.yw7bvkab947j">
            <span class="c29">Example RISC style</span>
        </h3>
        <p class="c13">
            <span
                >LDR R2,
                [R1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c40 c2">read from address stored in R1, into R2</span>
        </p>
        <p class="c13">
            <span
                >ADD
                R4,R2,R3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c40 c2">R4 = R2 + R3</span>
        </p>
        <p class="c13">
            <span
                >STORE
                R4,[R1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c40 c2">store result to memory address R1</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 437.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image35.png"
                    style="
                        width: 602px;
                        height: 437.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.o49hphrft1y8">
            <span class="c11">Look at the x86 instruction set</span>
        </h2>
        <p class="c51 subtitle" id="h.w1pd1d6b0214">
            <span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/X86_instruction_listings&amp;sa=D&amp;source=editors&amp;ust=1623776231220000&amp;usg=AOvVaw2tR0dOuQFuOVsDQsUwrGk_"
                    >https://en.wikipedia.org/wiki/X86_instruction_listings</a
                ></span
            >
        </p>
        <h2 class="c12" id="h.4xd7k1bd5sr4">
            <span class="c11">RISC Philosophy</span>
        </h2>
        <ol class="c3 lst-kix_coe5709h1jzz-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Instructions of fixed length executing in a single clock
                    cycle</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Pipelines to achieve one-instruction-per-one-clock-cycle
                    throughput (need to predict branches in program flow in
                    advance)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Simple control logic to increase clock speed, no
                    micro-code</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Operations performed on internal registers only; only LOAD
                    and STORE instructions access external memory</span
                >
            </li>
        </ol>
        <h2 class="c12" id="h.3i8186fh051p">
            <span class="c11">CISC Characteristics</span>
        </h2>
        <ol class="c3 lst-kix_kn8fivck2mm5-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span class="c1">Binary compatibility</span>
            </li>
        </ol>
        <ol class="c3 lst-kix_kn8fivck2mm5-1 start" start="1">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >old binary code can run on newer versions</span
                >
            </li>
        </ol>
        <ol class="c3 lst-kix_kn8fivck2mm5-0" start="2">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Complex control logic to support many instructions</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Use of micro-code</span>
            </li>
        </ol>
        <ol class="c3 lst-kix_kn8fivck2mm5-1 start" start="1">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >one program instruction can execute in many cycles</span
                >
            </li>
        </ol>
        <ol class="c3 lst-kix_kn8fivck2mm5-0" start="4">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Variable-length instructions to save program memory</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Small internal register sets compared with RISC
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Complex addressing modes, operands can reside in external
                    memory or internal registers</span
                >
            </li>
        </ol>
        <h2 class="c12" id="h.an1755b1iwwq">
            <span class="c11">One way of looking at it&hellip;</span>
        </h2>
        <p class="c13">
            <span>Runtime = </span><span class="c28">instruction-time </span
            ><span>x </span><span class="c28">cycles-per-instruction </span
            ><span>x </span><span class="c15">number-of-instructions</span>
        </p>
        <ul class="c3 lst-kix_jo6sdyuwvg4m-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >CISC tried to reduce the number of instructions</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >RISC tried to reduce the clock cycles per instruction</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.wjft25h5cmf7">
            <span class="c11">The RISC 1 (1981)</span>
        </h2>
        <ul class="c3 lst-kix_hgvviq6ojr1p-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Low transistor count 44k</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">31 instructions</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">78, 32 bit registers</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Two stage instruction pipeline</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">1MHz</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >At 4MHz it would be 2 x faster than the 5MHz VAX
                    11/750</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Code was larger, as expected (30%)</span>
            </li>
        </ul>
        <h2 class="c12" id="h.wgq6ocmasrh4">
            <span class="c11">Other RISC families</span>
        </h2>
        <ul class="c3 lst-kix_m3itv4nuaeor-0 start">
            <li class="c9 li-bullet-0"><span class="c1">MIPS</span></li>
            <li class="c9 li-bullet-0"><span class="c1">SPARC</span></li>
            <li class="c9 li-bullet-0"><span class="c1">DEC Alpha</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Power (IBM)</span></li>
            <li class="c9 li-bullet-0"><span class="c1">PA-RISC (HP)</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Itanium i860/i960</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">88000 (Motorolla)</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">ARM</span></li>
        </ul>
        <h2 class="c12" id="h.lxn77w40fvf5">
            <span class="c11">MIPS</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 143.5px;
                    height: 231.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image21.png"
                    style="
                        width: 143.5px;
                        height: 231.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h2>
        <ul class="c3 lst-kix_3a0scdz1n5zh-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">From Stanford University 1980s</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Commercially successful</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Used in routers/Playstation/Nintendo 64</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Optimised for compute/maths</span>
            </li>
        </ul>
        <h2 class="c12" id="h.wwlih3ni1yoj"><span class="c11">SPARC</span></h2>
        <ul class="c3 lst-kix_f998cix8504g-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Evolved from UC Berkeley from RISC I/II</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Tested the idea of register windows with 70-640
                    registers!</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Was 64 bit in 1993</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 283.5px;
                    height: 192.14px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image19.png"
                    style="
                        width: 283.5px;
                        height: 192.14px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.3kb1b08ldl70">
            <span class="c17">Buses: on board</span>
        </h1>
        <h2 class="c12" id="h.mh8ytqkuy9ps">
            <span class="c11">On-board buses</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >Designed to operate only in a controlled environment</span
            >
        </p>
        <ul class="c3 lst-kix_6982h2xayjav-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Good grounds, clean signal lines</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c2">Especially</span
                ><span class="c1"
                    >&nbsp;clean clocks with good rise-times, no overshoot to
                    ringing</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Usually no need for balanced pairs</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Usually used at normal logic levels, but see </span
                ><span class="c2">LVDS</span>
            </li>
        </ul>
        <h2 class="c12" id="h.gdyf71rpanby">
            <span class="c11">Classic On-board buses</span>
        </h2>
        <ul class="c3 lst-kix_fawg0r9ye9xm-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Low-voltage serial: RS232 (without drivers)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >SPI &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Serial
                    Peripheral Interface)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >I2C
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Inter-Integrated
                    Circuit)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >JTAG &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Joint
                    Test Action Group)</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.xcbqq5jmajnj">
            <span class="c11">Asynchronous serial interconnect</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 84px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image40.png"
                    style="
                        width: 602px;
                        height: 84px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_rybmqffv96iv-0 start">
            <li class="c9 li-bullet-0"><span class="c1">No clocks.</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Universally available on microcontrollers. Common speeds
                    1200, 4800, 960, 19200 Baud, or faster.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Usually one stop bit, eight data bits, no parity. Usually </span
                ><span class="c2">space</span><span>&nbsp;is Ground, </span
                ><span class="c2">mark</span><span>&nbsp;is V</span
                ><span class="c5">cc</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Idle is continuous </span><span class="c2">mark</span
                ><span>; continuous </span><span class="c2">space</span
                ><span>&nbsp;is detected as </span><span class="c2">break</span
                ><span class="c1">.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.dimt28mwehac"><span class="c11">RS232</span></h2>
        <ul class="c3 lst-kix_yovu4jto5vly-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Asynchronous communication over long distance.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c2">mark </span><span>is around -10V; </span
                ><span class="c2">space</span
                ><span class="c1">&nbsp;is around +10V.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >More than enough to fry a microcontroller!</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>You </span><span class="c2">might</span
                ><span class="c1"
                    >&nbsp;get a receiver to work with 0V, +5V.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Often lots of extra pins for </span
                ><span class="c2">modern</span><span>&nbsp;control and </span
                ><span class="c2">flow control</span
                ><span class="c1"
                    >: CTS, RTS, DCD, RI, DSR, DTR and a big 25-way connector.
                    Various magic pin-shuffles get it all to work.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Sometimes </span><span class="c2">in-band</span
                ><span>&nbsp;flow control uses </span
                ><span class="c2">ctrl-Q, ctrl-S.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.og42drtltrw0"><span class="c11">MAX232</span></h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 237.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image80.png"
                    style="
                        width: 602px;
                        height: 237.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.nhk9n0vspefr">
            <span class="c11">Differential serial: RS422, RS485</span>
        </h2>
        <ul class="c3 lst-kix_xgny4ixbbeh1-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >RS485 offers a multi-drop 3-wire bidirectional bus, if you
                    have a spare microcontroller pin to turn around the
                    transceivers. The two signal wires are a (more or less)
                    balanced pair.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Bus should be terminated with 120&#8486; at each end.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Bus can be &ldquo;biased&rdquo; to idle state.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Bus can be &ldquo;biased&rdquo; to idle state.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>FTDI cable auto-switches half duplex. </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_USB_RS485_CABLES.pdf&amp;sa=D&amp;source=editors&amp;ust=1623776231229000&amp;usg=AOvVaw1AbkzDxfwiEg7XLGqMmGUG"
                        >http://www.ftdichip.com/Support/Documents/DataSheets/Cables/DS_USB_RS485_CABLES.pdf</a
                    ></span
                ><span class="c1">&nbsp;</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c2"
                    >NMEA 0183 version 2.0 is a 4800 baud protocol over RS422
                    which is used on boats.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.sv7abggtoprr">
            <span class="c11">Care is needed turning around RS485</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 156px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image3.png"
                    style="
                        width: 602px;
                        height: 156px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_8qmnygd0m8a4-0 start">
            <li class="c9 li-bullet-0">
                <span>Isolated RS485 </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.farnell.com/datasheets/2081849.pdf?_ga%3D1.170246368.1926424347.1481104085&amp;sa=D&amp;source=editors&amp;ust=1623776231230000&amp;usg=AOvVaw1rGefq_cDEMEQkqsciN51z"
                        >http://www.farnell.com/datasheets/2081849.pdf?_ga=1.170246368.1926424347.1481104085</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Full duplex RS485 </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://www.maximintegrated.com/en/products/interface/transceivers/MAX22502E.html&amp;sa=D&amp;source=editors&amp;ust=1623776231230000&amp;usg=AOvVaw3o1kQ752zngemiLNHuFjdF"
                        >https://www.maximintegrated.com/en/products/interface/transceivers/MAX22502E.html</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Low supply voltage/low power </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://uk.farnell.com/maxim-integrated-products/max3471eua-t/rs422-rs485-txrx-64kbps-5-5v-umax/dp/2512094&amp;sa=D&amp;source=editors&amp;ust=1623776231231000&amp;usg=AOvVaw0xCa-ZUDIFpijHJ0hS1GFD"
                        >http://uk.farnell.com/maxim-integrated-products/max3471eua-t/rs422-rs485-txrx-64kbps-5-5v-umax/dp/2512094</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>The MODBUS protocol often runs over RS485</span>
            </li>
        </ul>
        <h2 class="c12" id="h.b24ogms147ib">
            <span class="c11">I2C</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 112.4px;
                    height: 124.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image49.png"
                    style="
                        width: 112.4px;
                        height: 124.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h2>
        <ul class="c3 lst-kix_4prm63gr0szb-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >An addressable chip-chip interface, originally from Philips
                    Semiconductor</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Three bidirectional open-drain lines, Ground and +5V or
                    +3.3V for SDA and SCL, pulled up by external
                    resistors.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >7-bit or 10-bit addresses, often hard-wired into the
                    slaves.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 245.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image52.png"
                    style="
                        width: 602px;
                        height: 245.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 372px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image53.png"
                    style="
                        width: 602px;
                        height: 372px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.gfc7n22a8ndv">
            <span class="c11">I2C Chips</span>
        </h2>
        <ul class="c3 lst-kix_7g0998aasdc4-0 start">
            <li class="c9 li-bullet-0">
                <span>Pressure sensor: </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://cdn.sparkfun.com/datasheets/Sensors/Pressure/BMP180.pdf&amp;sa=D&amp;source=editors&amp;ust=1623776231232000&amp;usg=AOvVaw1-PFhatkBHOt4bFCgVfZ7o"
                        >http://cdn.sparkfun.com/datasheets/Sensors/Pressure/BMP180.pdf</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>8-bit I/O expander </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.ti.com/product/pcf8574a&amp;sa=D&amp;source=editors&amp;ust=1623776231232000&amp;usg=AOvVaw3SRyftRg8aiICJqqtHRQTF"
                        >http://www.ti.com/product/pcf8574a</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>I2C specs </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.nxp.com/documents/user_manual/UM10204.pdf&amp;sa=D&amp;source=editors&amp;ust=1623776231233000&amp;usg=AOvVaw1-8lXek8_7uQijT-pJrbsq"
                        >http://www.nxp.com/documents/user_manual/UM10204.pdf</a
                    ></span
                ><span class="c1">&nbsp;</span>
            </li>
        </ul>
        <h2 class="c12" id="h.bjzguer8s2xu"><span class="c11">SPI</span></h2>
        <ul class="c3 lst-kix_b0bcn5fl5u6y-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Really simple pair of cross-coupled shift registers</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 463.39px;
                    height: 178.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image75.png"
                    style="
                        width: 463.39px;
                        height: 178.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c54 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_qhc03wmzqm86-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Can use explicit chip select, or daisy chain</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 209.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image11.png"
                    style="
                        width: 602px;
                        height: 209.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.4gj282q828aw">
            <span class="c11">SPI does not need dedicated chips</span>
        </h2>
        <p class="c13"><span class="c77">Have fun with this diagram</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 280px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image24.png"
                    style="
                        width: 602px;
                        height: 280px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.6736ot7zcz8b"><span class="c11">JTAG</span></h2>
        <ul class="c3 lst-kix_3mh8uoonbv3e-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Originally designed for board-level testing: daisy-chan
                    devices and use BSDL files.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 224px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image67.png"
                    style="
                        width: 602px;
                        height: 224px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_erpha04cxdiu-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >Nowadays used for flash programming and debug sometimes
                    with (expensive) proprietary protocols, may of which have
                    been </span
                ><span class="c40 c2">reverse engineered.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Some lower pin-count alternatives such as SWD.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.2ixrc5aheqc6">
            <span class="c11">LVDS (TIA/EIA-644)</span>
        </h2>
        <ul class="c3 lst-kix_ln71inmopx43-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Rare in embedded systems.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">655Mb/s rising to 3Gb/s</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>V</span><span class="c5">OL</span
                ><span
                    >&nbsp;=
                    1.0V&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V</span
                ><span class="c5">OH</span><span class="c1">&nbsp;= 1.4V</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 308px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image5.png"
                    style="
                        width: 602px;
                        height: 308px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h1 class="c25" id="h.h5z0h7ey9vs8">
            <span class="c17">Buses: off board</span>
        </h1>
        <h2 class="c12" id="h.o0nj60jedx4a">
            <span class="c11">Reliability / Safety</span>
        </h2>
        <ul class="c3 lst-kix_rvu9zah0qyfs-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Do you want compliance, or safety?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Tackle the real problem</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Beware common mode failure</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Fools are very ingenious</span>
            </li>
        </ul>
        <h2 class="c12" id="h.4rjsg9637t9g">
            <span class="c11">Off-board buses</span>
        </h2>
        <ul class="c3 lst-kix_gvgw5qdvr29s-0 start">
            <li class="c9 li-bullet-0">
                <span>Serious attention to EMC </span
                ><span class="c10">(ElectroMagnetic Compatibility)</span
                ><span class="c1">:</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_gvgw5qdvr29s-1 start">
            <li class="c13 c21 li-bullet-0">
                <span>ESD </span
                ><span class="c0">(ElectroStatic Discharge)</span>
            </li>
            <li class="c13 c21 li-bullet-0"><span class="c1">Noise</span></li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Termination</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Connector reliability</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Standards</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_gvgw5qdvr29s-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Normally a protocol engine (on-chip) and a dedicated
                    transceiver for EMC.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.noagmujarszb"><span class="c11">RS232</span></h2>
        <p class="c13">
            <span class="c34 c42"
                >See previous lecture as its just copy pasted slides lol.</span
            >
        </p>
        <h2 class="c12" id="h.1on4f12ft5ms">
            <span class="c11">CAN-BUS</span>
        </h2>
        <ul class="c3 lst-kix_ul0g0aobyswk-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The main configuration is high-speed CAN-BUS:
                    ISO11898-2</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Proper priority encoded multi-master protocol on a two-wire
                    bus terminated at each end.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Up to 1Mb/s. Can implement deadline scheduling through IDs.
                    Up to 8 bytes per frame.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Universal in modern automobiles: OBD-II connector</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Standard NMEA2000 uses DeviceNet protocols (IEC62026-3) and
                    connector.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.cewqza8yn3b5">
            <span class="c29">CAN-BUS parts</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 158.54px;
                    height: 126.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image78.png"
                    style="
                        width: 158.54px;
                        height: 126.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h3>
        <ul class="c3 lst-kix_t36gybvq2if2-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Controller: MCP2515</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Transceiver: TJA1050 or MCP2441</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Programmed car interface PIC: ELM327</span>
            </li>
        </ul>
        <h2 class="c12" id="h.2kxx4nz3guco"><span class="c11">USB</span></h2>
        <ul class="c3 lst-kix_ums9spj9lbp3-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Not a bus: a master-slave connection with optional
                    hubs</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Master implementation is complex.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >USB-OTG (most phones) will do master or slave. Sometimes
                    (Nexus 7) HDMI as well. But only one at a time.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Not much EMC protection.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Old-style offers 5V at 500mA. Nowadays, can configure 5A at
                    20V.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c40 c2"
                    >&ldquo;m &nbsp; &nbsp;a &nbsp; &nbsp;g &nbsp; &nbsp;i
                    &nbsp; &nbsp;c &nbsp; &nbsp; &nbsp; &nbsp;s &nbsp; &nbsp;m
                    &nbsp; &nbsp;o &nbsp; &nbsp;k &nbsp; &nbsp;e&rdquo;</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.5mne65vyp93v">
            <span class="c11">Firewire (IEEE1394)</span>
        </h2>
        <ul class="c3 lst-kix_wmq17me6zv4q-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >I [Denis] never use[s] it. Interestingly, it&rsquo;s a
                    serious security hole on PCs; it can DMA into PC
                    memory.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >So can a CardBus (new-style PCMCIA) card, which is
                    basically PCI.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.wbjvvedy60zw">
            <span class="c11">Ethernet</span>
        </h2>
        <ul class="c3 lst-kix_79eb49g885dy-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Nowadays, twisted pair on RJ45s: CAT5 etc.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">TCP/IP reasonably easy to implement.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Ethernet PHY protocol chips such as W5100.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >There is a transformer, either on the board or in the
                    socket: the first </span
                ><span class="c2">Raspberry Pi</span
                ><span class="c1"
                    >s were built without it, as the wrong sockets were
                    fitted.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>You can supply 48V </span
                ><span class="c2">power over Ethernet: </span
                ><span>think of the &ldquo;</span
                ><span class="c40 c2"
                    >m &nbsp;a &nbsp;g &nbsp;i &nbsp;c &nbsp; &nbsp; &nbsp;s
                    &nbsp;m &nbsp;o &nbsp;k &nbsp;e&rdquo;</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.ilh6uyy27qnh">
            <span class="c11">W5500 SPI Ethernet</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 486px;
                    height: 323px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image83.png"
                    style="
                        width: 486px;
                        height: 323px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c34 c74 c66">&macr;\_(&#12484;)_/&macr;</span>
        </p>
        <h2 class="c12" id="h.u431f7b9l5jj">
            <span class="c11">Don&rsquo;t abuse RJ45 patch leads</span>
        </h2>
        <ul class="c3 lst-kix_7y2kdeswcmpk-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">They get used for everything.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Don&rsquo;t go anywhere without a few hundred metres of
                    CAT5, some connectors, and a crimp tool.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">They get used for different things.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Be careful. They might be carrying 48V.</span>
            </li>
        </ul>
        <h1 class="c25" id="h.yvccvm9b35cq"><span class="c17">USB</span></h1>
        <h2 class="c12" id="h.tojap3q6rp4z">
            <span class="c11">History</span>
        </h2>
        <ul class="c3 lst-kix_sy3q0pgligx8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">USB: Universal Serial Bus</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Invented and standardized by a group of computer and
                    peripherals manufacturers in 1995.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Competes with IEEE1394 </span
                ><span class="c2">FireWire</span><span class="c1">.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.h1vx2nxue3me">
            <span class="c11">Evolution</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 340px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image33.png"
                    style="
                        width: 602px;
                        height: 340px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.tlrea48lezb3">
            <span class="c11">PC interfaces were a mess</span>
        </h2>
        <ul class="c3 lst-kix_7l88jgn3egnu-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Big Centronics printer port.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">PS/2 Mouse, Keyboard</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >RS232 serial: + - 12 V and all sorts of flow control.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Data peripherals over bidirectional Centronics port.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.ob63kcpboix5">
            <span class="c11">Basic characteristics of USB</span>
        </h2>
        <ul class="c3 lst-kix_gxy3v2rgc7ex-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Low voltage (at the time) 5V interface supplies power to
                    small peripherals.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Expandable via hubs to 127 devices, but </span
                ><span class="c2">NOT</span><span class="c1">&nbsp;a bus.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Two-wire differential signaling.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Serial protocol =&gt; no skew problems.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Largely self-configuring:</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_gxy3v2rgc7ex-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >No need for user to allocate interrupts, IO ports</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Many devices (e.g. keyboard, mouse) completely
                    self-describing.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_gxy3v2rgc7ex-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Devices can be attached and detached on a running
                    host.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.z1mzg7gcer5o">
            <span class="c11">Network and Connectors</span>
        </h2>
        <ul class="c3 lst-kix_dcsjy7sjh189-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The logical topology of the USB is a tree structure.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The (single) host polls the peripherals, possibly via hubs;
                    you cannot easily directly connect two hosts or two slaves
                    (but see USB On-the-go). The A connector is the host; B is
                    the slave.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Three generations of ever-smaller connectors.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 592px;
                    height: 225px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image76.png"
                    style="
                        width: 602px;
                        height: 225px;
                        margin-left: -10px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.lb3knnk5kj98"><span class="c11">Type C</span></h2>
        <ul class="c3 lst-kix_b4eq5zhlg28m-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Reversible</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Lots of power</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Trivial to connect as HOST </span
                ><span class="c2">or</span><span class="c1">&nbsp;DEVICE</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >OTG normally requires a dedicated support chip</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Bad cables can set things on </span
                ><span class="c28 c55">FIRE&#x1f525;</span>
            </li>
        </ul>
        <h2 class="c12" id="h.olpxrz66akf6">
            <span class="c11">Common cable colour assignments</span>
        </h2>
        <h2 class="c12" id="h.yxdysdgc4ee8">
            <span class="c11">Connector evolution</span
            ><span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 272px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image10.png"
                    style="
                        width: 602px;
                        height: 272px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </h2>
        <ul class="c3 lst-kix_noriyjvcfl3l-0 start">
            <li class="c9 li-bullet-0">
                <span>Mini A and mini AB connectors were deprecated by </span
                ><span class="c2">USB</span><span>&nbsp;</span
                ><span class="c2">Implementers Forum</span
                ><span>&nbsp;on 23</span><span class="c85">rd</span
                ><span class="c1">&nbsp;May 2007.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The micro connectors support more insertions (have a longer
                    life) and the wear is concentrated in the cable rather than
                    the device.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Micro USB B connectors are also used in standard EN
                    62684:2010 for a common mobile charger.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Lots more power (and volts) from type C.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.32h5xgbo8vf0"><span class="c11">Speed</span></h2>
        <p class="c13">
            <span class="c1"
                >The latest invocation is Super Speed USB 3.0 with a theoretical
                maximum transfer rate of 5Gbit/s, similar to PCIe Gen2, and five
                additional pins (including signal ground) in a backward
                compatible connector:</span
            >
        </p>
        <ul class="c3 lst-kix_zaspkj880yqy-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >USB 1: Low speed: 1.5Mbit/s signalling, full speed:
                    12Mbit/s</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">USB 2: &nbsp;+ High speed: 480Mbit/s</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >USB 3: + Super Speed: 5Gbit/s signalling, rising to
                    10Gbit/s</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.dcbctj1dk8zq">
            <span>And the new </span><span class="c2">Type C</span>
        </h3>
        <ul class="c3 lst-kix_rh26x4y6d8et-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">No more trying to insert upside down</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c34 c42"
                    >Look on the wiki for a table of things you probably
                    don&rsquo;t (and shouldn&rsquo;t) need to remember</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.ibrk7vru23t7">
            <span class="c11">A modern standard?</span>
        </h2>
        <ul class="c3 lst-kix_336cynchnp5y-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Most modern interface standards use serial communication
                    and support automatic configuration by interrogating
                    self-describing devices.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >In modern high-speed systems, the data communication is
                    typically </span
                ><span class="c2">unidirectional</span
                ><span>&nbsp;to avoid the delays involved in </span
                ><span class="c2">turning around</span
                ><span class="c1">&nbsp;the bus signals.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >It is also common to use separate clocks in the fastest
                    systems as </span
                ><span class="c2">clock recovery</span
                ><span class="c1"
                    >&nbsp;can be problematic at the highest speeds.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.jqt8t6k3omm5">
            <span class="c11">Software environment</span>
        </h2>
        <ul class="c3 lst-kix_5l41n323yb7j-0 start">
            <li class="c9 li-bullet-0">
                <span>The </span><span class="c2">heavy lifting</span
                ><span class="c1"
                    >&nbsp;is done by the host software; slaves can be simple.
                    The host software has to recognise various device classes
                    and install appropriate, sometimes vendor-supplies drivers.
                    It also has to manage the various hubs in the network.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Every device has to be registered with a </span
                ><span class="c2">vendor ID </span><span>and a </span
                ><span class="c2">product ID</span
                ><span class="c1">, 16 bit each.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The University of Southampton has a Vendor ID; it is
                    administered by (the one and only) Denis Nicole
                    [dan@ecs.soton.ac.uk]; he will issue Product IDs on
                    request.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.rygp7nz0e651">
            <span class="c11">A USB network is a tree</span>
        </h2>
        <ul class="c3 lst-kix_7hjgd7dye4eb-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Hubs are managed by the host. A device only need worry
                    about its Device ID.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 293.97px;
                    height: 478.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image8.png"
                    style="
                        width: 293.97px;
                        height: 478.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.8lmns03rxpz0"><span class="c11">Power</span></h2>
        <ul class="c3 lst-kix_phnbb252vy3w-0 start">
            <li class="c9 li-bullet-0">
                <span>USB supplies V</span><span class="c5">BUS</span
                ><span
                    >&nbsp;at about 5V. Do not connect a decoupling capacitor of
                    more than 10&micro;F to this line; it might crash the hub or
                    other devices with its inrush current. There </span
                ><span class="c2">must </span
                ><span>be at least 1&micro;F present (at all V</span
                ><span class="c5">BUS</span
                ><span
                    >&nbsp;voltages) to support on-the-go device recognition in
                    the absence of power on V</span
                ><span class="c5">BUS</span><span class="c1">. </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >A low-speed device announces its presence by pulling the D-
                    pin up via a 1k5&Omega; resistor. This pull-up should be
                    towards 3.3V derived from V</span
                ><span class="c5">BUS</span
                ><span
                    >, not from self power; pulling up D+ in the absence of
                    V</span
                ><span class="c5">BUS</span
                ><span class="c1">&nbsp;can confuse on-the-go devices.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >A device can draw up to 100mA in operation, but must be
                    able to reduce this to 2.5mA if </span
                ><span class="c2">suspended</span
                ><span
                    >. It can request up to 500mA, but this may not be granted.
                    Laptops have been known to agree a high current load, then
                    fail to deliver it. If you want more than 100mA, you will
                    probably need to use a </span
                ><span class="c2">powered hub</span
                ><span>. Or your device can be</span
                ><span class="c2">&nbsp;self powered</span
                ><span class="c1"
                    >. A device is suspended if the host sends it nothing for
                    3ms. Wake-up is by reversing the polarity of D+ and D-,
                    either from host or device.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Power is important; many USB connections are used </span
                ><span class="c2">only </span><span class="c1">for power.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.zabp1dkgl4rb">
            <span class="c11">Device States</span>
        </h2>
        <p class="c13">
            <span class="c34 c42"
                >Look at this coooooooooool finite state machine
                oooooooooooooo</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 508.5px;
                    height: 675.6px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image68.png"
                    style="
                        width: 508.5px;
                        height: 675.6px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.neqe7f6qqof0">
            <span class="c11">On-the-go</span>
        </h2>
        <ul class="c3 lst-kix_6h3q56r52f7p-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >There is support for systems to act as both host and
                    device, e.g. a camera might act as a device when connected
                    to a PC but as a host when connected to a printer. Such
                    systems are called </span
                ><span class="c2">on-the-go</span><span>&nbsp;</span
                ><span class="c2">(OTG)</span
                ><span class="c1"
                    >. Such units must nowadays have a Micro AB connector.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>An OTG cable </span><span class="c2">must</span
                ><span class="c1"
                    >&nbsp;have an A connector at one end and a B connector at
                    the other end. The cable grounds the ID pin (pin 5) at the A
                    end to indicate that the system should act as host.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It can get much more complicated. There are now various
                    resistances for the ID pin, and there is a protocol to swap
                    host and device, e.g. when a printer needs to supply power
                    to a camera.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.oosp5ft3ux1h">
            <span class="c11">Layered protocols: Low Speed Electrical</span>
        </h2>
        <ul class="c3 lst-kix_6sasmphd70yi-0 start">
            <li class="c9 li-bullet-0">
                <span>All modern communications protocols are </span
                ><span class="c2">layered</span
                ><span class="c1"
                    >. We describe the relationship between corresponding layers
                    at each end.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Electrical layer: on D+, D-</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_6sasmphd70yi-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >LOW is -1V to 0.3V in presence of 1.5k&Omega; pull-up</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >HIGH is 2.8V to 4.6V in presence of 1.5k &Omega;
                    pull-down</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Rise/fall times 75ns to 300ns with 200pF to 600pF
                    load</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_6sasmphd70yi-0">
            <li class="c9 li-bullet-0">
                <span>Low speed signalling is </span
                ><span class="c2">differential </span
                ><span class="c1">at 1.5Mbit/s</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Reset is signalled by holding D+, D- both low for
                    10ms</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >End of Packet (EOP) is signalled by taking D+, D- both low
                    for 2 bit times, then taking D- high (the idle state).</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >D+ and D- are never both high at the same time.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.30eklbqvt2js">
            <span class="c11">Bit layer</span>
        </h2>
        <ul class="c3 lst-kix_zcbnl8vjngt9-0 start">
            <li class="c9 li-bullet-0">
                <span>Data encoding is NRZI with </span
                ><span class="c2">bit-stuffing</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 105.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image15.png"
                    style="
                        width: 602px;
                        height: 105.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_naayr8r6h0hb-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >There will never be seven consecutive ones.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.n5732iih3ahq">
            <span class="c29">NRZI encoding of data bits</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 214.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image12.png"
                    style="
                        width: 602px;
                        height: 214.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.k7v8icxe0l46">
            <span class="c11">Bit-bash</span>
        </h2>
        <p class="c13">
            <span class="c1">You can &ldquo;bit-bash&rdquo; low speed USB</span>
        </p>
        <p class="c13">
            <span>See: </span
            ><span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.obdev.at/products/vusb/index.html&amp;sa=D&amp;source=editors&amp;ust=1623776231251000&amp;usg=AOvVaw0JTbSkdA9cPDqjLJRfYa9Z"
                    >https://www.obdev.at/products/vusb/index.html</a
                ></span
            >
        </p>
        <h2 class="c12" id="h.unx35uv7atfz">
            <span class="c11">Protocol layer</span>
        </h2>
        <p class="c13">
            <span>All data is assembled into </span
            ><span class="c2">packets:</span>
        </p>
        <ul class="c3 lst-kix_xw5s5zlsiux6-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >SYNC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronisation
                    bits: NRZI-encoded os.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Packet
                    ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;packet
                    type</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0...127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB
                    address (sender or receiver)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Endpoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0...15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Endpoints
                    within device</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Frame
                    number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you
                    wouldn&rsquo;t want to use the same data twice</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at
                    most 8 bytes for low-speed USB</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >CRC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error
                    detecting code</span
                ><span
                    style="
                        overflow: hidden;
                        display: inline-block;
                        margin: 0px 0px;
                        border: 0px solid #000000;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                        width: 280.35px;
                        height: 126.5px;
                    "
                    ><img
                        alt=""
                        src="assets/real-time-computing-and-embedded-systems/image77.png"
                        style="
                            width: 280.35px;
                            height: 126.5px;
                            margin-left: 0px;
                            margin-top: 0px;
                            transform: rotate(0rad) translateZ(0px);
                            -webkit-transform: rotate(0rad) translateZ(0px);
                        "
                        title=""
                /></span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">End of packet</span>
            </li>
        </ul>
        <h2 class="c12" id="h.jxmjljqurltc">
            <span class="c11">Four classes of packets</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 508.46px;
                    height: 611.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image44.png"
                    style="
                        width: 508.46px;
                        height: 611.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.ttz1ejciu1hv">
            <span class="c11">Transactions</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >A transactions is made up of a sequence of packets</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 272px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image37.png"
                    style="
                        width: 602px;
                        height: 272px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.dvybwcod6ry3">
            <span class="c29">Interrupt Transfers</span>
        </h3>
        <ul class="c3 lst-kix_ybmeuqfa6wk6-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Have nothing to do with processor interrupts</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">They are polled by the host</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A single IN or OUT transaction makes up an interrupt
                    transfer</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.q23rnp4hico">
            <span class="c29">Control Transfer</span>
        </h3>
        <ul class="c3 lst-kix_3rum3nw97bf0-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A control transfer is made up of several transactions,
                    moving data in both directions</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">It is divided into three stages</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This is how the device describes itself to the host</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 340px;
                    height: 435px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image6.png"
                    style="
                        width: 340px;
                        height: 435px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.mfrdbhy7wemr">
            <span class="c11">That&rsquo;s a lot of layers</span>
        </h2>
        <ul class="c3 lst-kix_nbomhy1zt3xx-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Transfers</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Transactions</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Packets</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">On-the wire NRZI</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Bit-stuffing</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Raw bits</span></li>
        </ul>
        <h2 class="c12" id="h.ucr1ou80yodt">
            <span class="c11">Communication Flow</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 701px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image62.png"
                    style="
                        width: 602px;
                        height: 731px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.olj00h7rotb0">
            <span class="c11">Transfer Types</span>
        </h2>
        <ul class="c3 lst-kix_ypgp4ouxwo5n-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Control Transfer</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Isochronous Transfer</span
                ><span class="c40 c2"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Not
                    for low-speed USB]</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Bulk Transfer</span
                ><span class="c40 c2"
                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Not
                    for low-speed USB]</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Interrupt Transfer</span>
            </li>
        </ul>
        <h2 class="c12" id="h.kyxnos2zffye">
            <span class="c11">Endpoints</span>
        </h2>
        <ul class="c3 lst-kix_hfcy2m9ge8oi-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >Every device is required to provide endpoint 0 for control
                    and enumeration: the </span
                ><span class="c2">control transfers</span
                ><span class="c1">&nbsp;are bidirectional.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Other endpoints can transfer data using </span
                ><span class="c2">interrupt transfers</span
                ><span class="c1">. These endpoints are unidirectional.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>A typical keyboard would have one </span
                ><span class="c2">device </span><span>-&gt;</span
                ><span class="c2">&nbsp;host </span
                ><span>endpoint for keyboard data and one </span
                ><span class="c2">host </span><span>-&gt; </span
                ><span class="c2">device </span
                ><span class="c1">endpoint for keyboard lights.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Low-speed USB cannot do isochronous or bulk transfers, so
                    no COM: ports or memory sticks.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.diy1y540g8gj">
            <span class="c11">Device startup</span>
        </h2>
        <ul class="c3 lst-kix_35vr0bv6riky-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The host uses control transfers to endpoint 0 to learn the
                    capabilities of the device. The first important information
                    is the maximum packet size.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >After that, there are a range of descriptors. They lead to
                    the setting up of logical devices and additional
                    endpoint.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>For the details, see USB made simple: </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.usbmadesimple.co.uk/ums_4.htm&amp;sa=D&amp;source=editors&amp;ust=1623776231257000&amp;usg=AOvVaw2Zk5bTg9-J0ZltDA5xIyaF"
                        >http://www.usbmadesimple.co.uk/ums_4.htm</a
                    ></span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.oglc3v22v786"><span>Descriptors</span></h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 386.21px;
                    height: 613.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image74.png"
                    style="
                        width: 386.21px;
                        height: 613.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.qfezt8p3xr4i">
            <span class="c11">Enumeration</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 200px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image16.png"
                    style="
                        width: 602px;
                        height: 200px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.ukt9bhe6bfgs">
            <span class="c11">Useful USB gizmo and books</span>
        </h2>
        <ul class="c3 lst-kix_6ikfuscb5ir-0 start">
            <li class="c9 li-bullet-0">
                <span class="c0"
                    >There&rsquo;s some hardware stuff you can get, look in the
                    slides</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c0"
                    >There are also books in the slides, Denis has only read 1
                    of the 2</span
                >
            </li>
            <li class="c9 li-bullet-0"><span class="c0">Ok</span></li>
        </ul>
        <h1 class="c25" id="h.rhf737wdvwje">
            <span class="c17">Synchronisation</span>
        </h1>
        <h2 class="c12" id="h.p4n0bct96qxv">
            <span class="c11">Synchronization</span>
        </h2>
        <ul class="c3 lst-kix_160mh0mny263-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Busy Waiting</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Hardware techniques, e.g. test-and-set</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Semaphores</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Dining philosophers, readers/writers</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Deadlock and its avoidance</span>
            </li>
        </ul>
        <h2 class="c12" id="h.s5yw4c633xxa">
            <span class="c11">A sad story</span>
        </h2>
        <ul class="c3 lst-kix_8nmdmkp4ls8r-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">You make a new concurrent system</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Its fast, passes tests.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">It&rsquo;s good.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">You think&hellip;</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1"
                >Essentially concurrency and synchronisation are a pain in
                computer science.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_arinqdxcfh14-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >You need enough locks to prevent uncontrolled data
                    sharing.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >You might get deadlocks, and have to use standard
                    techniques (such as breaking symmetry / breaking cycles or
                    preventing resource filling), or your own idea and then test
                    it with model checking.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.myn9c69aeido">
            <span class="c11">Processes and Threads</span>
        </h2>
        <p class="c13"><span class="c1">What&rsquo;s the difference?</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 419.5px;
                    height: 627.61px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image61.png"
                    style="
                        width: 419.5px;
                        height: 627.61px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_t2c1bqpnl8cs-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >All constructs can be used in either an inter-thread or
                    inter-process context.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >For inter-thread context, the syncing objects (semaphores,
                    test-and-sets, Peterson variables) are:</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_t2c1bqpnl8cs-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Shared variables</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Globally defined in data segment (outside any C function,
                    or with static qualifier)</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Or allocated off the heap (C&rsquo;s `malloc()` or
                    Java&rsquo;s `new`).</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_t2c1bqpnl8cs-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >For inter-process context, syncing objects are normally
                    created by host operating system and allocated in kernel
                    space; typically accessed from processes by invoking methods
                    on a handle.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.2xfv6vfmcizk">
            <span class="c11">Process C code</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 428px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image73.png"
                    style="
                        width: 602px;
                        height: 428px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.d40hmsorufvx">
            <span class="c11">Thread C++ code</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 384px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image60.png"
                    style="
                        width: 602px;
                        height: 384px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.5dvi34kmxlro"><span class="c11">Table</span></h2>
        <a id="t.4a1974104bdcb52fb4069b8660781681c543f019"></a><a id="t.2"></a>
        <table class="c79">
            <tbody>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Segment</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Mode</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Two Processes</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Two Threads</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Code</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Execute, Read?</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">May be shared</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared </span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">R/O data</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Read, Execute?</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">May be shared</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">R/W data</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Read, Write</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Copied</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Stack (in BSS)</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">Read, Write, Execute?</span>
                        </p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Copied</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">New</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="c12" id="h.qenzd46wc22k">
            <span class="c11">Critical Regions </span>
        </h2>
        <p class="c13">
            <span class="c1"
                >&ldquo;A section of code that may only be executed by one
                process at any one time.&rdquo; [-Oxford Reference]</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 320px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image30.png"
                    style="
                        width: 602px;
                        height: 320px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.eumgz96irz1u">
            <span class="c11">Solutions&hellip;.</span>
        </h2>
        <h3 class="c31" id="h.f853a58x38y4">
            <span class="c29">Mutual Exclusion with Busy Waiting</span>
        </h3>
        <p class="c13">
            <span class="c1">You could try two process with this code:</span>
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 118.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image13.png"
                    style="
                        width: 602px;
                        height: 118.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1">But this will have a race condition!</span>
        </p>
        <h4 class="c41" id="h.fl0xlk2pfv92">
            <span class="c50 c10">Race Conditions</span>
        </h4>
        <p class="c13">
            <span>&ldquo;</span
            ><span class="c46 c39"
                >A race condition occurs when two or more threads can access
                shared data and they try to change it at the same time. Because
                the thread scheduling algorithm can swap between threads at any
                time, you don&#39;t know the order in which the threads will
                attempt to access the shared data. Therefore, the result of the
                change in data is dependent on the thread scheduling algorithm,
                i.e. both threads are &quot;racing&quot; to access/change the
                data.</span
            >
        </p>
        <p class="c13 c37">
            <span class="c39 c49"
                >Problems often occur when one thread does a
                &quot;check-then-act&quot; (e.g. &quot;check&quot; if the value
                is X, then &quot;act&quot; to do something that depends on the
                value being X) and another thread does something to the value in
                between the &quot;check&quot; and the &quot;act&quot;.&rdquo; - </span
            ><span class="c19 c39"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://stackoverflow.com/questions/34510/what-is-a-race-condition&amp;sa=D&amp;source=editors&amp;ust=1623776231291000&amp;usg=AOvVaw3-InixS-YPzkgBYaxAh99T"
                    >What is a race condition?</a
                ></span
            ><span class="c46 c39">&nbsp;</span>
        </p>
        <h3 class="c37 c13 c68" id="h.9ts9t3jh9d73">
            <span class="c29">Another solution?</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 181.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image39.png"
                    style="
                        width: 602px;
                        height: 181.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1">This works but forces a strict alternation.</span>
        </p>
        <h3 class="c31" id="h.fl7rt1v9cv4n">
            <span class="c29">Peterson&rsquo;s Solution</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 313.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image2.png"
                    style="
                        width: 602px;
                        height: 313.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c34 c66 c74">Lol copy pasting whole slides</span>
        </p>
        <h3 class="c31" id="h.p39v4681ikxh"><span class="c29">TSL</span></h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 192px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image17.png"
                    style="
                        width: 602px;
                        height: 192px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1"
                >This enters and leaves a critical region using the TSL
                instruction.</span
            >
        </p>
        <p class="c13">
            <span class="c1"
                >Unfortunately, the x86 does not have the TSL instruction.</span
            >
        </p>
        <h3 class="c31" id="h.cmm1sox5act9">
            <span class="c29">Test and Set on x86</span>
        </h3>
        <p class="c13"><span class="c15">XCHG Exchange Registers</span></p>
        <p class="c13 c14"><span class="c15"></span></p>
        <p class="c13">
            <span class="c28">Logic</span
            ><span class="c1"
                >: destination &larr;&rarr; source XCHG switches the contents of
                its operands, which may be either bytes or words.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c28">Example:</span></p>
        <p class="c13">
            <span class="c1"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOCK
                XCHG SEMPHOR, &nbsp; DX</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c28">Notes:</span
            ><span class="c1"
                >&nbsp;Used in conjunction with the LOCK prefix, this
                instruction is particularly useful when implementing semaphores
                to control shared resources.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c28">LOCK </span
            ><span class="c1"
                >is a one-byte prefix that can precede any instruction. LOCK
                causes the processor to assert its bus lock signal wile the
                instruction that follows it executed. If the system is
                configured such that the LOCK signal is used, it prevents any
                external device or events from accessing the bus, including
                interrupts and DMA transfers.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c28">Notes: </span
            ><span class="c1"
                >This instruction was provided to support multiple processor
                systems with shared resources. In such a system, access to those
                resources is generally controlled via a software-hardware
                combination using semaphores. This instruction should only be
                used to prevent other bus masters from interrupting a data
                movement operation. This prefix should only be used with XCHG,
                MOV, and MOVS.</span
            >
        </p>
        <h2 class="c12" id="h.5klxdq2rwjvz"><span class="c11">Legacy</span></h2>
        <p class="c13">
            <span class="c1"
                >Remember: all this legacy stuff makes assumptions that are
                often not true in modern systems:</span
            >
        </p>
        <ul class="c3 lst-kix_vltg56dr4q2c-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Cache coherence</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Compiler optimisation and re-ordering</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Out-of-order execution</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Behaviour of volatile</span>
            </li>
        </ul>
        <h2 class="c12" id="h.s2n4lo39qpjn">
            <span class="c11">Mutual exclusion on the Cortex M0+</span>
        </h2>
        <ul class="c3 lst-kix_gmlioj2myurp-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Barriers not needed on M0+</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 472.5px;
                    height: 378px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image45.png"
                    style="
                        width: 472.5px;
                        height: 378px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.ryldirbmyna7">
            <span class="c11">Disabling interrupts on the M0+</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 84px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image88.png"
                    style="
                        width: 602px;
                        height: 84px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.aqfy8neb2lia">
            <span class="c11">Non-busy synchronization: Sleep and Wakeup</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >We can try to remove the polling load from the CPU by
                constructing new Operating System/runtime methods:</span
            >
        </p>
        <ul class="c3 lst-kix_xbo2b5ckc59m-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">sleep() will deschedual a blocked thread</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >wakeup() will enable it to be run again after a sleep</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.yo9mvpq26sf5">
            <span class="c29"
                >Producer-consumer implementation with fatal race
                condition</span
            >
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 517px;
                    height: 452px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image9.png"
                    style="
                        width: 517px;
                        height: 452px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span>The race condition can occur because access to </span
            ><span class="c2">count </span
            ><span class="c1"
                >is unconstrained. The following situation could possibly occur.
            </span>
        </p>
        <p class="c13 c14"><span class="c40 c2"></span></p>
        <ul class="c3 lst-kix_62b7lru10ts5-0 start">
            <li class="c9 li-bullet-0">
                <span>The buffer is empty and the consumer has just read </span
                ><span class="c2">count </span
                ><span class="c1">to see if it is 0. </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >At that instant, the scheduler decides to stop running the
                    consumer temporarily and start running the producer.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >The producer inserts an item in the buffer, increments </span
                ><span class="c2">count</span
                ><span class="c1"
                    >. and notices that it is now 1. Reasoning that count was
                    just 0, and thus the consumer must be sleeping, the producer
                    calls wakeup to wake the consumer up.
                </span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_vujen8kcboqs-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Unfortunately, the consumer is not yet logically asleep, so
                    the wakeup signal is lost.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >When the consumer next runs, it will test the value of </span
                ><span class="c2">count </span
                ><span class="c1"
                    >it previously read, find it to be 0, and go to sleep.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Sooner or later the producer will fill up the buffer and
                    also go to sleep.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Both will sleep forever.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_d99gs78ickom-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The essence of the problem here is that a wakeup sent to a
                    process that is not (yet) sleeping is lost.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If it were not lost, everything would work.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span>A quick fix is to modify the rules to add a </span
                ><span class="c28">wakeup waiting bit </span
                ><span class="c1">to the picture. </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >When a wakeup is sent to a process that is still awake,
                    this bit is set.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Later, when the process tries to go to sleep, if the wakeup
                    waiting bit is on, it will be turned off, but the process
                    will stay awake.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span>The wakeup waiting bit </span><span class="c28">is</span
                ><span class="c1">&nbsp;a piggy bank for wakeup signals.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1"
                >While the wakeup waiting bit saves the day in this simple
                example, it is easy to construct examples with three or more
                processes in which one wakeup waiting bit is insufficient. We
                could make another patch and add a second wakeup waiting bit, or
                maybe 8 or 32 of them, but in principle the problem is still
                there.</span
            >
        </p>
        <h2 class="c12" id="h.91mo6ockdv3p">
            <span class="c11">How do we fix this?</span>
        </h2>
        <ul class="c3 lst-kix_zc5mlfiu9kbj-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Monitors</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Mutexes and condition variables</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Semaphores</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Message passing</span>
            </li>
        </ul>
        <h2 class="c12" id="h.b56zjjxeb4uq">
            <span class="c11"
                >Java&rsquo;s synchronized, wait() and notify()</span
            >
        </h2>
        <ul class="c3 lst-kix_hzxs6z2a1nb5-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The last example makes it clear that sleep() and wakeup()
                    will normally need to be run within a critical
                    section.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This poses another problem: the critical section will not
                    be freed by a sleeping thread.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Java fixes this problem by having a set of special language
                    primitives.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`synchronized` marks a block or method as a critical
                    section.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`wait()` can only be invoked from within a synchronized
                    unit, and releases the critical section as well as causing a
                    sleep.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`notify()` can only be invoked from within a synchronized
                    unit and issues a wakeup.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.hpkuif79mdp9">
            <span class="c11">Producer/Consumer in Java</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 496px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image72.png"
                    style="
                        width: 602px;
                        height: 496px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_34814mjugzjz-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`wait()` is declared to throw an `InterruptedException` but
                    this can (should) never happen here, so we assert that it
                    doesn&rsquo;t.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >You must use a `while`, not and `if` round the `wait()`;
                    the tested condition may no longer be true when you regain
                    the `synchronized` lock. Indeed, it may never have been
                    true, the Java runtime is permitted to return you
                    unexpectedly from `wait()`.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >In general, use `notifyAll()` to prevent deadlock; in this
                    case, if we have a single producer and a single consumer, we
                    can use `notify()` and can further optimize by issuing the
                    notify only when necessary. For example, in the producer you
                    could use:</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_34814mjugzjz-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">If (count == 1) lock.notify();</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_34814mjugzjz-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It is safest to use a private object as the lock; if you
                    use something public, like `self`, there is the danger that
                    the client might `wait()` it.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >You should not normally allow synchronising classes to be
                    sub-classes; a child class can easily violate the
                    synchronisation invariant.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This whole mechanism has very bad fairness
                    properties.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.if4rhxofseml">
            <span class="c29">Bad style</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 594.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image63.png"
                    style="
                        width: 602px;
                        height: 594.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.anyc18ojueib">
            <span class="c29">Just plain wrong</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 522.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image38.png"
                    style="
                        width: 602px;
                        height: 522.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.h6rjwxw09v4w">
            <span class="c11">Semaphores</span>
        </h2>
        <ul class="c3 lst-kix_fqjjum9c22w2-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A high level construct introduced by Dijkstra: it can queue
                    processes, threads.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The semaphore object has two associated operations:</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_fqjjum9c22w2-1 start">
            <li class="c13 c21 li-bullet-0">
                <span>`down()` - or wait or P, for </span
                ><span class="c2">prolaag</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>`up()` - or signal or V, for </span
                ><span class="c2">verhoog</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_4pr1eahaguh4-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A semaphore has an associated synchronised variable.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span class="c1"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            >
        </p>
        <ul class="c3 lst-kix_5rgpwmvnso0r-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Semantics:</span></li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 554px;
                    height: 201px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image65.png"
                    style="
                        width: 554px;
                        height: 201px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.dxln48wqjsl2">
            <span class="c29">Producer-consumer problem using semaphores</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 494.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image89.png"
                    style="
                        width: 602px;
                        height: 494.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.kbs87s50sayv">
            <span class="c11">Memory management</span>
        </h2>
        <ul class="c3 lst-kix_ug1orfjpy4bw-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >Sempahore, and mutex and condition variable (synchronizing)
                    functions will contain special code (memory barriers) to
                    ensure that all caches are flushed to main memory and all
                    threads have the same </span
                ><span class="c2">view </span
                ><span class="c1">of the state of the system.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >These calls are thus likely to be expensive, but they
                    guarantee that local memory written in one thread </span
                ><span class="c2">before</span
                ><span
                    >&nbsp;a synchronization call can be read correctly from
                    another thread </span
                ><span class="c2">after</span
                ><span class="c1">&nbsp;the call.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>So such code can share memory between threads </span
                ><span class="c34 c61 c66"
                    >if there is an intervening synchronizing function
                    call.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Technically, there is also the risk that the </span
                ><span class="c2">compiler </span
                ><span class="c1"
                    >might inappropriately cache local variables in registers
                    across synchronizing function calls.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >So it is essential to use a POSIX-compatible compile; C
                    language standards before C11 do not provide the necessary
                    guarantees.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.125tj6ey6k4h">
            <span class="c11">Semaphores in Java, before Java 1.5</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 545px;
                    height: 310px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image50.png"
                    style="
                        width: 545px;
                        height: 310px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c34 c81 c66"
                >Warning: this also had bad fairness properties</span
            >
        </p>
        <p class="c13">
            <span class="c1">Java 1.5 has `java.util.concurrent`</span>
        </p>
        <h2 class="c12" id="h.1lz45preakaj">
            <span class="c11">Message Passing</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >The producer-consumer problem with N messages</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 398.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image43.png"
                    style="
                        width: 602px;
                        height: 398.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_1ic4ptiepedm-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Message passing is a third approach to thread
                    synchronisation. You normally have the choice of:</span
                >
            </li>
        </ul>
        <p class="c13 c54 c14"><span class="c1"></span></p>
        <ol class="c3 lst-kix_hiacgejtjwj0-0 start" start="1">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Monitors and condition variables (wait, notify)</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Semaphores, or</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Message passing</span>
            </li>
        </ol>
        <h2 class="c12" id="h.2nh6m2cf9qzs">
            <span class="c11">Memory management etc.</span>
        </h2>
        <ul class="c3 lst-kix_glaoe7a62t86-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >In general it is not necessary for message-passing systems
                    to flush caches during message passing.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Some do (allowing inter-thread pointers to be used), some
                    don&rsquo;t.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>The general assumption is that data is passed </span
                ><span class="c2">by value</span
                ><span class="c1">&nbsp;through the queue/mailbox.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_z28knxxmrfaw-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Note that this allows alternative implementations.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The OS could implement the queue in ordinary memory, and
                    flush caches during message passing.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It could implement the queue in special un-cached memory:
                    avoiding the overhead of cache flushing.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >It could even implement the two threads on completely
                    separate processors, and pass the queue data along a
                    physical inter-processor communication port.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.i1f37yn6rlcp">
            <span class="c11">Message queue sizes</span>
        </h2>
        <ul class="c3 lst-kix_l6s3x714zlye-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >FreeRTOS does not allow it, but it is quite reasonable to
                    have a queue size of zero, allocating no buffer to the queue
                    at all. The `occam` language works in this way.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_l6s3x714zlye-0">
            <li class="c9 li-bullet-0">
                <span>With a queue size of zero, the writer </span
                ><span class="c2">always</span><span>&nbsp;has to </span
                ><span class="c2">rendezvous </span
                ><span class="c1">&nbsp;with the reader. </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Whichever one arrives first at the communication has to
                    wait until the other arrives too, then the data is copied
                    (or maybe, in C++11, </span
                ><span class="c2">moved</span
                ><span class="c1">) directly from writer to reader.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.xudk1kdnpy3m">
            <span class="c11">Barriers</span>
        </h2>
        <p class="c13">
            <span
                >All processes have to arrive at the barrier before they can all
                proceed.</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 246.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image28.png"
                    style="
                        width: 602px;
                        height: 246.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_9kc49t3wtenq-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Use of barrier</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_9kc49t3wtenq-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1">Processes approaching a barrier</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1">All processes but one blocked at barrier</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Last process arrives, all are let through</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Natural for &ldquo;gridded&rdquo; problems</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.esme9gevfwbh">
            <span class="c11">The Dining Philosopher</span>
        </h2>
        <p class="c13">
            <span
                >This is a common example used in concurrent algorithm design to
                illustrate synchronization issues and techniques. </span
            ><span class="c40 c2">[-Wiki]</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_94p7iultai1-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Essentially there is a table with 5 plates of spaghetti on
                    it and a fork in between each plate.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 309.31px;
                    height: 304.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image26.png"
                    style="
                        width: 309.31px;
                        height: 304.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_94p7iultai1-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >There are 5 philosophers that need to eat.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >They can only eat if they are holding both forks.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >How would you design an algorithm for all philosophers to
                    get their fair share of eating?</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">They all take the fork to their left?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Then they won&rsquo;t have a fork on their right :( so none
                    of them can eat.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >How would you prevent a deadlock like this?</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.frjsmppxzrxw"><span class="c29">Java</span></h3>
        <ul class="c3 lst-kix_r50mfxhlls1x-0 start">
            <li class="c9 li-bullet-0">
                <span>This is a </span><span class="c28">NON</span
                ><span
                    >solution to the dining philosophers problem in java.</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 555.5px;
                    height: 567.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image85.png"
                    style="
                        width: 555.5px;
                        height: 567.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 352px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image51.png"
                    style="
                        width: 602px;
                        height: 450px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_r50mfxhlls1x-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A philosopher is modeled as an instance of the class
                    `DiningPhilosophers` running as a thread.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A fork is a &ldquo;passive&rdquo; instance of the class
                    `Fork`.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_yfi9qexhi1nq-0 start">
            <li class="c9 li-bullet-0">
                <span class="c34 c66 c71"
                    >The code in green is not part of the core application</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c34 c71 c66"
                    >It&rsquo;s only there for useful output.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c71"
                    >The `doze()` delays provide a reliable demonstration of </span
                ><span class="c71 c2">deadlock</span
                ><span class="c34 c71 c66"
                    >&nbsp;in the code version on the next
                    slide(??????????)</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_s6yt724555r2-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >The code appears to run, but each fork is modeled as a
                    simple object; there is nothing to stop a single fork being
                    held by two philosophers at once. The doe is </span
                ><span class="c40 c2">unsafe.</span>
            </li>
        </ul>
        <h3 class="c31" id="h.uuexs3hizzj9">
            <span class="c29">Modifying solution&hellip;</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 519.65px;
                    height: 464.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image55.png"
                    style="
                        width: 519.65px;
                        height: 464.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_r50mfxhlls1x-0">
            <li class="c9 li-bullet-0">
                <span>This is another </span><span class="c28">NON</span
                ><span class="c1"
                    >solution to the dining philosophers problem.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >We modify the definition of the Fork class so to include a
                    binary Semaphore. This ensures that a given fork can be
                    taken by at most one philosopher.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>The code is now </span><span class="c2">safe</span
                ><span class="c1"
                    >&nbsp;but suffers from possible deadlock as a cycle of
                    dependency can arise after each philosopher has taken one
                    fork.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.b96hyjbojjl">
            <span class="c29">Working Solution</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 321.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image25.png"
                    style="
                        width: 602px;
                        height: 321.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_3e9eshh0hu38-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This is a working solution to the dining philosophers
                    problem.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >We modify the `run()` method of `DiningPhilosophers` so
                    that philosopher zero takes their forks in the opposite
                    sequence to the other philosophers.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >This breaks the dependency cycle and ensures that the code
                    is </span
                ><span class="c2">live</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>It does not provide &nbsp;a guarantee of </span
                ><span class="c2">fairness</span><span class="c1">.</span>
            </li>
        </ul>
        <p class="c13">
            <span class="c72 c61"
                >The module as delivered in 2019&ndash;20 covered the slide
                decks in order up to and including </span
            ><span class="c72 c2 c61">Synchronisation</span
            ><span class="c48">&nbsp;slide 66.</span>
        </p>
        <p class="c13">
            <span
                >This is where Denis says he stopped lecturing, so stuff after
                this </span
            ><span class="c2">shouldn&rsquo;t</span
            ><span>&nbsp;be on the exam (but it probably might be lol)</span>
        </p>
        <h2 class="c12" id="h.e2zbd3br6bv6">
            <span class="c11">Java Pthread</span>
        </h2>
        <p class="c13">
            <span
                >The Java authors adopted a version of Pthreads&rsquo; mutexes
                and condition variables. The standard (</span
            ><span class="c81">but dangerous</span
            ><span class="c1"
                >. (You should use a private lock object)). usage is:</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 168px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image70.png"
                    style="
                        width: 602px;
                        height: 168px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.x7qbqdtzeqd6">
            <span class="c11">Java wait() is &ldquo;truly horrid&rdquo;</span>
        </h2>
        <ul class="c3 lst-kix_fn9wxh8955r5-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`while` &rarr; `if`results in random failure.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >What&rsquo;s with `InterruptedException`?</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Why is the lock exposed to class users?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">How does it scale?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">What are the fairness properties?</span>
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 152px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image42.png"
                    style="
                        width: 602px;
                        height: 152px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.b2fh6tcs2bly">
            <span class="c11">Java wait/notify unfairness</span>
        </h2>
        <ul class="c3 lst-kix_26sdowjtegwf-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Wot no Chickens</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_26sdowjtegwf-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://www.cs.kent.ac.uk/projects/ofa/java-threads/0.html&amp;sa=D&amp;source=editors&amp;ust=1623776231322000&amp;usg=AOvVaw1hdFCOzIk6SztKQ8SZeXYY"
                        >https://www.cs.kent.ac.uk/projects/ofa/java-threads/0.html</a
                    ></span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_26sdowjtegwf-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Specific Notification</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_26sdowjtegwf-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.profcon.com/profcon/cargill/jgf/9809/SpecificNotification.html&amp;sa=D&amp;source=editors&amp;ust=1623776231323000&amp;usg=AOvVaw2VDTzIwyJQ58Sq_xqFAyGR"
                        >http://www.profcon.com/profcon/cargill/jgf/9809/SpecificNotification.html</a
                    ></span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.mj1smmvey8tk">
            <span class="c11">Java.util.concurrency</span>
        </h2>
        <ul class="c3 lst-kix_8u99wk8ls94n-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >is the Java 1.5 fix to the known problems</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A reasonable implementation of a bad model</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Takes advantage of optimistic concurrency primitives</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c34 c74 c66"
                >Some more books with pictures of trains on them&hellip;.</span
            >
        </p>
        <h3 class="c31" id="h.m1zfjfqc4ug4">
            <span class="c29">Old Style</span>
        </h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 257.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image64.png"
                    style="
                        width: 602px;
                        height: 257.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.ag8esbiv4rq0"><span>New(ish) Style</span></h3>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 546px;
                    height: 316px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image4.png"
                    style="
                        width: 546px;
                        height: 316px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.bfz3aa80uue0">
            <span class="c11">AtomicInteger (or Long) is fast</span>
        </h2>
        <ul class="c3 lst-kix_pfdzc34agf1e-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >`compareAndSet` is implemented through
                    `sun.misc.Unsafe`</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The JVM has the opportunity to implement this using `LOCK
                    CMPXCHG r/m32, r32` on Intel 486+ processors.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>The </span><span class="c2">uncontended</span
                ><span class="c1">&nbsp;case is fast.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >What about fairness? Infinite delay is
                    &ldquo;unlikely&rdquo;.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >There is also an `incrementAndGet()` method.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.z40esu430v51">
            <span class="c11">POSIX C Semaphores</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 277.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image46.png"
                    style="
                        width: 602px;
                        height: 277.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1"
                >POSIX also has mutex/condition variable support&hellip;</span
            >
        </p>
        <h2 class="c12" id="h.qo12ih9upy27">
            <span class="c11">The Readers and Writers Problem</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 692px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image66.png"
                    style="
                        width: 602px;
                        height: 692px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.x9nczhocdpen"><span class="c29">POSIXC</span></h3>
        <ul class="c3 lst-kix_97we2ds6fz2k-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The classic synchronization problem. Many readers can
                    access the database at the same time, but only one writer,
                    which must have exclusive access.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This solution gives readers priority; a writer might never
                    gain access.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Alternative versions might give writers priority, or server
                    all requests in order.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.2g55mhx8srdv">
            <span class="c11">C 2011 language features</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 309.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image7.png"
                    style="
                        width: 602px;
                        height: 309.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.b5he2g4pfrnl">
            <span class="c29">C++ 2011</span>
        </h3>
        <ul class="c3 lst-kix_upsnb9kpsy72-0 start">
            <li class="c9 li-bullet-0"><span class="c1">See:</span></li>
        </ul>
        <ul class="c3 lst-kix_upsnb9kpsy72-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://secure.ecs.soton.ac.uk/notes/comp3215/Lectures/older/C%2520and%2520C%2B%2B%2520threading.htm&amp;sa=D&amp;source=editors&amp;ust=1623776231326000&amp;usg=AOvVaw3vng936Ytth_rlzhRFMYlj"
                        >https://secure.ecs.soton.ac.uk/notes/comp3215/Lectures/older/C%20and%20C++%20threading.htm</a
                    ></span
                >
            </li>
        </ul>
        <h1 class="c25" id="h.l394zsq81j13">
            <span class="c83">Scheduling</span>
        </h1>
        <h1 class="c25" id="h.8lk81buavk2f">
            <span class="c17">Model Checking</span>
        </h1>
        <h2 class="c12" id="h.gqle2i8oprw4">
            <span class="c11">Verifying the correctness of our code</span>
        </h2>
        <ul class="c3 lst-kix_5mtxqxd17i14-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Programming is not like algebra</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_5mtxqxd17i14-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c2">Variables</span><span>&nbsp;are not </span
                ><span class="c2">unknowns. </span
                ><span class="c1">They change with time.</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_5mtxqxd17i14-0">
            <li class="c9 li-bullet-0">
                <span class="c1">Testing is of limited value</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_5mtxqxd17i14-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >If you know all the answers, replace the program with a
                    look-up table.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Does not test for (</span><span class="c2">future) </span
                ><span class="c1">compile optimisations.</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Does not test for multi-threaded non-determinism.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_5mtxqxd17i14-0">
            <li class="c9 li-bullet-0">
                <span>We want to </span><span class="c2">verify</span
                ><span>&nbsp;against a </span
                ><span class="c2">specification</span><span class="c1">.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.nyzrnttjz2na">
            <span class="c11">What can a program do?</span>
        </h2>
        <ol class="c3 lst-kix_79m1cppgxqd5-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span>Break something (e.g. </span
                ><span class="c2">burn out </span
                ><span class="c1">the hardware)</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Fail to complete</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Complete too late</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Complete and give the </span
                ><span class="c61">wrong </span><span class="c1">result</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Complete and give the </span
                ><span class="c70">right </span><span class="c1">result</span>
            </li>
        </ol>
        <p class="c13">
            <span class="c1">But how do we specify the right result?</span>
        </p>
        <h2 class="c12" id="h.3xneied8yad9">
            <span class="c11">Assertions</span>
        </h2>
        <p class="c13">
            <span>The simplest specification is a (</span
            ><span class="c2">point</span><span class="c1">) assertion.</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                >An assertion is a predicate connected to a point in the
                program, that should always evaluate to true at that point in
                code execution. </span
            ><span class="c40 c2">[-Wiki]</span>
        </p>
        <p class="c13 c14"><span class="c40 c2"></span></p>
        <p class="c13">
            <span class="c1"
                >They are supported by the C standard as `assert()`.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 216px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image27.png"
                    style="
                        width: 602px;
                        height: 216px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13"><span class="c1">But what can go wrong?</span></p>
        <h2 class="c12" id="h.9bj697963h1q">
            <span class="c11">What can go wrong?</span>
        </h2>
        <ul class="c3 lst-kix_mcpy4l3smaql-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Firstly, assume the C `int` is a mathematical (unbounded)
                    integer.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_mcpy4l3smaql-1 start">
            <li class="c13 c21 li-bullet-0">
                <span>Then the program is </span
                ><span class="c2">partially correct</span
                ><span class="c1"
                    >. If it terminates, it terminates with the right
                    answer.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_mcpy4l3smaql-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >But a genuine C `int`is bounded by `INT_MIN` and
                    `INT_MAX`.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_mcpy4l3smaql-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >So the multiplication and the addition might
                    overflow.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >C does not specify what happens if they do.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Java </span><span class="c2">guarantees</span
                ><span class="c1">&nbsp;to give the wrong answer.</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_mcpy4l3smaql-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >We fix this with the non-standard `assume()`</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.pqo6svtauslf">
            <span class="c11">Assert and Assume</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 467px;
                    height: 237px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image79.png"
                    style="
                        width: 467px;
                        height: 237px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_zcv3w9yjsjl0-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Assert is a claim about the program&rsquo;s behaviour; it
                    fails if the predicate is false. Asserts form the
                    program&rsquo;s specification.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_pho29slrf4af-0 start">
            <li class="c9 li-bullet-0">
                <span>Assume is a way of restricting the </span
                ><span class="c2">domain</span
                ><span class="c1"
                    >&nbsp;of a function. We don&rsquo;t care how the program
                    behaves when the assume is false.</span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.x43v3e70ip0g">
            <span class="c11">Corrected version of program</span>
        </h2>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 535px;
                    height: 290px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image82.png"
                    style="
                        width: 535px;
                        height: 290px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.i08jjcpiyqfx">
            <span class="c11">Unbounded Model Checking Loops</span>
        </h2>
        <p class="c13">
            <span>For </span><span class="c2">unbounded model checking, </span
            ><span>we need to </span><span class="c2">unroll</span
            ><span class="c1">&nbsp;the loop.</span>
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 483px;
                    height: 44px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image36.png"
                    style="
                        width: 483px;
                        height: 44px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1"
                >Becomes, if we bound the unrolling at nine iterations:</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 273.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image18.png"
                    style="
                        width: 602px;
                        height: 273.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c34 c74 c66">How I used to write code&hellip;.</span>
        </p>
        <h2 class="c12" id="h.p9wd7pedztqq">
            <span>Bounded Model Checking Loops</span>
        </h2>
        <p class="c13">
            <span>In </span><span class="c2">bounded model checking</span
            ><span class="c1"
                >, we can only cope with loops up to a bounded depth.</span
            >
        </p>
        <ul class="c3 lst-kix_ya1vawgevx2e-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">See later for inductive proofs!</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>The </span><span class="c2">unwinding assertion </span
                ><span class="c1"
                    >checks that the depth is never exceeded. In this case, it
                    will fail.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>We can also make the unwinding </span
                ><span class="c2">assumption </span
                ><span>that the depth is not exceeded. This </span
                ><span class="c2">prunes </span
                ><span
                    >all input values that would have needed more depth. So it
                    is, in general, </span
                ><span class="c40 c2">unsafe.</span>
            </li>
        </ul>
        <h2 class="c12" id="h.wvpor748w0pf">
            <span class="c11">Replacement</span>
        </h2>
        <ul class="c3 lst-kix_xkisu52ljpgq-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >We need to replace the variables with single-assignment </span
                ><span class="c2">unknowns</span><span class="c1">.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">The unrolled program becomes:</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 293.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image22.png"
                    style="
                        width: 602px;
                        height: 293.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.o72f0on7knne">
            <span class="c29">We now have ordinary algebra</span>
        </h3>
        <p class="c13">
            <span>We look for </span><span class="c2">satisfying</span
            ><span class="c1"
                >&nbsp;assignments to the integer unknowns which would cause the
                assertion to fail. The program is broken if there is a set of
                assignments to `ain, b, a_0...a_9, results_0...result_9` which
                makes the following expression true:</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 246.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image34.png"
                    style="
                        width: 602px;
                        height: 246.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h2 class="c12" id="h.4cniq5f3awli">
            <span class="c11">Feed the expression to an SMT solver</span>
        </h2>
        <ul class="c3 lst-kix_l2np3dgn749p-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Z3 is a good example</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_l2np3dgn749p-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://rise4fun.com/z3&amp;sa=D&amp;source=editors&amp;ust=1623776231334000&amp;usg=AOvVaw1J3J09C6M62OhzBEOD9bW8"
                        >https://rise4fun.com/z3</a
                    ></span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_l2np3dgn749p-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Is z3 can find a satisfying set of assignments, then the
                    program is incorrect, and we know an example set of inputs
                    on which it fails.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Boolector is good too:</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_l2np3dgn749p-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://boolector.github.io/&amp;sa=D&amp;source=editors&amp;ust=1623776231335000&amp;usg=AOvVaw2ciMtVQDgf_MaRuQ56gheo"
                        >https://boolector.github.io/</a
                    ></span
                >
            </li>
        </ul>
        <h2 class="c12" id="h.k8anjemfhk46">
            <span class="c11">Proof By Induction</span>
        </h2>
        <p class="c13">
            <span class="c1"
                >A proof by induction is just like an ordinary proof in which
                every step must be justified. However it employs a neat trick
                which allows you to prove a statement about an arbitrary number
                n by first proving it is true when n is 1 and then assuming it
                is true for n=k and showing it is true for n=k+1. The idea is
                that if you want to show that someone can climb to the nth floor
                of a fire escape, you need only show that you can climb the
                ladder up to the fire escape (n=1) and then show that you know
                how to climb the stairs from any level of the fire escape (n=k)
                to the next level (n=k+1).</span
            >
        </p>
        <p class="c13">
            <span>[Source: </span
            ><span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=http://comet.lehman.cuny.edu/sormani/teaching/induction.html&amp;sa=D&amp;source=editors&amp;ust=1623776231335000&amp;usg=AOvVaw3CfCAJ4L4tp8jIy8E2acos"
                    >http://comet.lehman.cuny.edu/sormani/teaching/induction.html</a
                ></span
            ><span class="c1">]</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Another example:</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 221.33px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image87.png"
                    style="
                        width: 602px;
                        height: 221.33px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13"><span class="c1">How can it fail?</span></p>
        <h2 class="c12" id="h.hnutmw5vh64x">
            <span class="c11">Inductive Proof</span>
        </h2>
        <ol class="c3 lst-kix_nrs5kaxh95rd-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span>Assert an equality claimed to be valid for all </span
                ><span class="c2">n</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Show that it is true for </span><span class="c2">n=0</span
                ><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Show that, if it is true for </span
                ><span class="c2">n=m</span
                ><span>, then it is also true for </span
                ><span class="c2">n=m+1</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Then </span></li>
        </ol>
        <ol class="c3 lst-kix_nrs5kaxh95rd-1 start" start="1">
            <li class="c13 c21 li-bullet-0">
                <span>the </span><span class="c2">n=0</span
                ><span>&nbsp;case implies the </span><span class="c2">n=1</span
                ><span class="c1">&nbsp;case</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>the </span><span class="c2">n=1</span
                ><span>&nbsp;case implies the </span><span class="c2">n=2</span
                ><span class="c1">&nbsp;case</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>the </span><span class="c2">n=2</span
                ><span>&nbsp;case implies the </span><span class="c2">n=3</span
                ><span class="c1">&nbsp;case</span>
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>And so on for all </span><span class="c2">n &ge; 0</span
                ><span class="c1">.</span>
            </li>
        </ol>
        <h3 class="c31" id="h.5ih9mzrobgze">
            <span class="c29">The invariant</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >For a proof by induction, we need an inductive hypothesis,
                inside the loop.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                >An inductive hypothesis is just something you assume is true to
                help with the proof. </span
            ><span class="c34 c42"
                >[Correct me if I&rsquo;m wrong, just want a basic
                explanation]</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 256px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image86.png"
                    style="
                        width: 602px;
                        height: 256px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.ejjxuxs93k0l">
            <span class="c29">Not quite enough</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >We also need to control the induction variable</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 280px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image29.png"
                    style="
                        width: 602px;
                        height: 280px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.egfhp6ww6cd">
            <span class="c29">Where do these invariants come from?</span>
        </h3>
        <ul class="c3 lst-kix_y1oog7aw9982-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >In general, there is no way to deduce them</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_y1oog7aw9982-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c40 c2">Halting problem</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_y1oog7aw9982-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >For simple loops, they can sometimes be guessed.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Range analysis will often control the induction
                    variable</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_y1oog7aw9982-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >We know `(i &lt; n)` at the top of the loop.</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >We know `i` is incremented by exactly one, so `(i &lt;
                    n+1)` at the bottom of the loop.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.j4hesdbtm4jm">
            <span class="c29">Now the proof falls into three parts:</span>
        </h3>
        <ol class="c3 lst-kix_yciiabbkic2p-0 start" start="1">
            <li class="c41 c54 c80 li-bullet-0">
                <h4 id="h.fuz7pw6f3x8c" style="display: inline">
                    <span class="c10 c50">Base case</span>
                </h4>
            </li>
        </ol>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 517px;
                    height: 303px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image14.png"
                    style="
                        width: 517px;
                        height: 303px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1"
                >The base case can be extended to perform some bounded unrolling
                as well.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ol class="c3 lst-kix_yciiabbkic2p-0" start="2">
            <li class="c41 c54 c80 li-bullet-0">
                <h4 id="h.kfh3m7b0sqry" style="display: inline">
                    <span class="c50 c10">Inductive step</span>
                </h4>
            </li>
        </ol>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 508px;
                    height: 308px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image54.png"
                    style="
                        width: 508px;
                        height: 308px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span
                >Sometimes it helps to unroll the inductive step a few times
                (</span
            ><span class="c2">k-induction</span><span class="c1">)</span>
        </p>
        <ol class="c3 lst-kix_yciiabbkic2p-0" start="3">
            <li class="c41 c54 c80 li-bullet-0">
                <h4 id="h.4o3eg01bosxy" style="display: inline">
                    <span class="c50 c10">Termination condition</span>
                </h4>
            </li>
        </ol>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 584px;
                    height: 208px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image84.png"
                    style="
                        width: 584px;
                        height: 208px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13">
            <span class="c1"
                >The inductive step and the termination condition can be fused
                into a single test.</span
            >
        </p>
        <h2 class="c12" id="h.20x9gqlr72oe">
            <span>It is all </span><span class="c2">much</span
            ><span class="c11">&nbsp;harder in practice</span>
        </h2>
        <ul class="c3 lst-kix_4eesgt8yewei-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Think about arrays and pointers.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>For Object Oriented languages, worry about </span
                ><span class="c2">dynamic dispatch</span
                ><span class="c1">&nbsp;(method pointers)</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Concurrency is a real pain; all valid interleavings must be
                    considered.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Our [Denis&rsquo;] tool is ESBMC</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_4eesgt8yewei-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://esbmc.org/&amp;sa=D&amp;source=editors&amp;ust=1623776231342000&amp;usg=AOvVaw0fUqEISwGseuHdDmwsY3TD"
                        >http://esbmc.org/</a
                    ></span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_4eesgt8yewei-0">
            <li class="c9 li-bullet-0">
                <span
                    >Our (Mikhail&rsquo;s) latest achievement is the
                    acceleration of </span
                ><span class="c2">k-induction</span
                ><span>. He can also do IEEE floating point.</span>
            </li>
        </ul>
        <h1 class="c25" id="h.7mkot9dje7gn"><span class="c64">DSP</span></h1>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.lb14e79gj1n5">
            <span class="c64">Model Checking Synchronisation</span>
        </h1>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.emfqakpzz66v"><span class="c64">ESBMC</span></h1>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.wkkdjutm4042">
            <span class="c64">Automata</span>
        </h1>
        <p class="c13">
            <span class="c1"
                >If you&rsquo;re interested, check out the first half of
                Matt&rsquo;s Notes on the Theory of Computing module.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://docs.google.com/document/d/17EmbnWfWaXFRvdFtA6bvKRlKGPutJfJ4Q46hJjDKOTo/edit?usp%3Dsharing&amp;sa=D&amp;source=editors&amp;ust=1623776231344000&amp;usg=AOvVaw1TkGtEjNgliEIiz87sKjGh"
                    >Theory of Computing Notes</a
                ></span
            ><span class="c1">&nbsp;</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c77"
                >I basically wrote 7 pages of notes on these slides and it was
                just the first half of that module.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h1 class="c25" id="h.5g1bhhmqvt86">
            <span class="c17">FreeRTOS Example?</span>
        </h1>
        <p class="c13"><span class="c1">&macr;\_(&#12484;)_/&macr;</span></p>
        <h1 class="c25" id="h.l4wbdit63o03">
            <span class="c17">Lab Stuff?</span>
        </h1>
        <p class="c13">
            <span class="c1"
                >Embedded system, microcontroller, turning on LEDs, UART
                communication, FreeRTOS, C coding, OpenThread, wireless
                communications&hellip;</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.yfzt3sxx0epj">
            <span class="c29">Failover</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >When a node in a mesh network fails, communication between
                other nodes is unaffected as long as there are nodes to
                carry-over the signal</span
            >
        </p>
        <h1 class="c25" id="h.thia7gavys6m"><span class="c17">TL;DR</span></h1>
        <p class="c13">
            <span class="c27">Main presentation title goes here.</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c61 c66 c76"
                >Tbh read this cus idk how much you can really learn from just
                detailed electronics stuff unless you know it already, and the
                slides are pretty long winded and I try to explain stuff more
                usefully for the exam here as well idk lol.</span
            >
        </p>
        <h3 class="c31" id="h.htwaua983wt4">
            <span>What is a real time system?</span>
        </h3>
        <ul class="c3 lst-kix_71x09991e5ko-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >A real-time system is any information processing system
                    which has to respond to externally generated input stimuli
                    within a finite and specified period.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_c7xl0fbvscoa-0 start">
            <li class="c9 li-bullet-0">
                <span
                    >The correctness of a real time system depends on the
                    logical result </span
                ><span class="c2">and</span
                ><span class="c1">&nbsp;the time it was delivered.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Failure to respond is as bad as a wrong response.</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.900h1yogq2o4">
            <span class="c29">Three types of correctness:</span>
        </h3>
        <ul class="c3 lst-kix_fxwvgc8r03ze-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Partial - if it terminates, the result is correct</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Total - it will terminate and return correct result</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Real-time - will return a correct result by deadline</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.r4rrjvi8wdd5">
            <span>M</span><span class="c29">ake real time system correct</span>
        </h3>
        <ol class="c3 lst-kix_suqquzrlberc-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span class="c1">Use maths to simplify reasoning</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Establish partial correctness</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Establish function will terminate</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Arrange to cope with problems from C&rsquo;s int
                    implementation</span
                >
            </li>
        </ol>
        <h3 class="c31" id="h.ub2qjf8tzif9">
            <span class="c29">Embedded Development</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >Everyone makes stuff on ARM Cortex M Architecture nowadays.
                They have their own peripherals and proprietary software.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Tools:</span></p>
        <ul class="c3 lst-kix_p4u735hwvha8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Build toolchain</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">IDE, eclipse?</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Plugins</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Portability?</span></li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Simple Dev:</span></p>
        <ul class="c3 lst-kix_n88uyy8flodg-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >vim, gcc, git, make, loader, notepad++, realterm, gdb, C on
                    host</span
                >
            </li>
        </ul>
        <p class="c13"><span class="c1">Alternative</span></p>
        <ul class="c3 lst-kix_25da9tf6y0e8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Arduino, automated includes, libraries, scripts</span
                >
            </li>
        </ul>
        <p class="c13"><span class="c1">mbed</span></p>
        <ul class="c3 lst-kix_bsfkoyg95x3y-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Internet -based environment</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Config tools</span></p>
        <ul class="c3 lst-kix_5xnbf3i1hkpq-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Don&rsquo;t get locked in</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Know dependencies so you can debug</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Know what&rsquo;s running on board rather than just demos
                    (although good starting point)</span
                >
            </li>
        </ul>
        <h3 class="c31" id="h.u4z68alefafh">
            <span class="c29">ARM Cortex M</span>
        </h3>
        <p class="c13">
            <span
                >The ARM Cortex-M is a group of 32-bit RISC ARM processor cores.
                [</span
            ><span class="c28">-Wiki</span><span class="c1">]</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_djo1o3o0kzw6-0 start">
            <li class="c9 li-bullet-0"><span class="c1">M0</span></li>
            <li class="c9 li-bullet-0"><span class="c1">M0+</span></li>
            <li class="c9 li-bullet-0"><span class="c1">M3</span></li>
            <li class="c9 li-bullet-0"><span class="c1">M4</span></li>
            <li class="c9 li-bullet-0"><span class="c1">M7</span></li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1">Cortex M3 is &ldquo;better&rdquo; than ARM7</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c15">Memory Map:</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 496.5px;
                    height: 326.11px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image32.png"
                    style="
                        width: 496.5px;
                        height: 326.11px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c15">Registers:</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 245.5px;
                    height: 519.69px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image71.png"
                    style="
                        width: 245.5px;
                        height: 519.69px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.g7gwx6qhe0lg">
            <span class="c29">Magic Smoke</span>
        </h3>
        <ul class="c3 lst-kix_d2bs11722atl-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Making hardware bad gases can leak out.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Harmful chemicals</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">How to stop this?</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_d2bs11722atl-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Have good grounds - short thick copper wire</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Correct voltage for power supply and limited current</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span>Never tale input outside range 0...V</span
                ><span class="c5 c60">cc</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c28">CMOS </span
            ><span class="c1"
                >(Complementary metal&ndash;oxide&ndash;semiconductor)</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span
                >CMOS is basically a battery powered chip that gives information
                like date and time &amp; hardware settings to computer&rsquo;s
                BIOS (Basic Input Output System). [</span
            ><span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.quora.com/What-is-the-definition-of-CMOS&amp;sa=D&amp;source=editors&amp;ust=1623776231352000&amp;usg=AOvVaw0OOGzbNpW_UsrXsEdmFjee"
                    >Source</a
                ></span
            ><span class="c1">]</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Latch-up&hellip;.</span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1">Power/ground inductance is bad..</span>
        </p>
        <ul class="c3 lst-kix_afqzvrs4vce-0 start">
            <li class="c9 li-bullet-0">
                <span>Use a </span><span class="c2">ground plane </span
                ><span class="c1">or short thick wire for ground</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Beware of earth loops</span></p>
        <ul class="c3 lst-kix_resr2mlrsvzr-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Use common grounding point for all circuits</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Do not disconnect grounds</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1">Transmission lines, mismatched lines</span>
        </p>
        <ul class="c3 lst-kix_et7v9jk8x12j-0 start">
            <li class="c9 li-bullet-0">
                <span>The characteristic impedance, Z</span
                ><span class="c5">0</span
                ><span class="c1"
                    >, is the ratio of inductance to capacitance. It goes up as
                    the wires get thinner and down as they get closer or if you
                    use a high permittivity dielectric.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >If the line is mismatched at both ends, the signal will
                    bounce backwards and forwards creating terrible </span
                ><span class="c2">ringing</span><span class="c1">.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Skew</span></p>
        <ul class="c3 lst-kix_d0qu9vgljnjj-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >If your transmission line is properly matched, you also
                    need to ensure that the line is the same length for all
                    signals. Otherwise, the clock and data might arrive at the
                    wrong relative times.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Sending the clock in the opposite direction to the data is
                    always a bad idea.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Ringing</span></p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 372.5px;
                    height: 191.23px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image56.png"
                    style="
                        width: 372.5px;
                        height: 191.23px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <ul class="c3 lst-kix_yf1ex6992fme-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Ringing is bad, can see extra clock pulses</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.uqvmx9b4ti53">
            <span class="c29">Von Neumann, Harvard, CISC and RISC </span>
        </h3>
        <p class="c13">
            <span class="c1"
                >Are a thing but probably won&rsquo;t be in exam. Basically RISC
                used in embedded real time stuff.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.mo3n2dvullh8">
            <span class="c29">On-board Buses</span>
        </h3>
        <p class="c13">
            <span class="c1">Buses are data transmission lines.</span>
        </p>
        <p class="c13">
            <span class="c1"
                >Some will be on-board/inside an electrical system.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">They need:</span></p>
        <ul class="c3 lst-kix_lukuq7q88wuv-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Good grounds</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Clean clock signals</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Low-voltage serial RS232</span></p>
        <ul class="c3 lst-kix_r9pahzn5tcqt-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Async - no clocks, 1 stop bit, 8 data bits, no
                    parity.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1">SPI (Serial Peripheral Interface)</span>
        </p>
        <ul class="c3 lst-kix_z9p2shkubaph-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Really simple pair of cross-coupled shift registers</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Can use explicit chip select, or daisy chain</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Does not need dedicated chips</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">I2C</span></p>
        <ul class="c3 lst-kix_2s4k1xv95ft4-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Addressable chip-chip interface</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Three bidirectional open-drain lines, Ground and +5V or
                    +3.3V for SDA and SCL, pulled up by external
                    resistors.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1">JTAG (Joint Tested Action Group)</span>
        </p>
        <ul class="c3 lst-kix_vifs6sljqlor-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Originally designed for board-level testing: daisy-chan
                    devices and use BSDL files.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Used now for flash programming and debug.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.qdptv15z75g3">
            <span class="c29">Off-board Buses</span>
        </h3>
        <ul class="c3 lst-kix_jcs7e8cvz77u-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Need to be reliable and safe</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Trade-offs in compliance and safety</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Attention to electromagnetic compatibility</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">RS232 again lol</span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">CAN-BUS</span></p>
        <ul class="c3 lst-kix_sn20whooso3v-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Proper priority encoded multi-master protocol on a two-wire
                    bus terminated at each end.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Up to 1Mb/s. Can implement deadline scheduling through IDs.
                    Up to 8 bytes per frame.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">USB (Universal Serial Bus)</span></p>
        <p class="c13"><span class="c47">(Not even a bus lol)</span></p>
        <ul class="c3 lst-kix_qex9lc6y29k-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Master-slave connection with optional hubs</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Master implementation complex</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Firewire</span></p>
        <ul class="c3 lst-kix_48k2chy6m8v0-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">A serious security hole on PCs</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Has direct memory access, security issue</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Ethernet</span></p>
        <ul class="c3 lst-kix_9rph5snrqt7q-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Twisted pair on RJ45s: CAT5&hellip;</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">TCP/IP implemented on it</span>
            </li>
        </ul>
        <h3 class="c31" id="h.uglou0ccc8a9"><span class="c29">USB</span></h3>
        <ul class="c3 lst-kix_sy3q0pgligx8-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Invented and standardized by a group of computer and
                    peripherals manufacturers in 1995.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_sy3q0pgligx8-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Low voltage (at the time) 5V interface supplies power to
                    small peripherals.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Expandable via hubs to 127 devices, but </span
                ><span class="c2">NOT</span><span class="c1">&nbsp;a bus.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Two-wire differential signaling.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Serial protocol =&gt; no skew problems.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Largely self-configuring:</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_sy3q0pgligx8-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >No need for user to allocate interrupts, IO ports</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Many devices (e.g. keyboard, mouse) completely
                    self-describing.</span
                >
            </li>
        </ul>
        <ul class="c3 lst-kix_sy3q0pgligx8-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Devices can be attached and detached on a running
                    host.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_5ardo8khr93y-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The logical topology of the USB is a tree structure.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The (single) host polls the peripherals, possibly via hubs;
                    you cannot easily directly connect two hosts or two slaves
                    (but see USB On-the-go). The A connector is the host; B is
                    the slave.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Three generations of ever-smaller connectors.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Type-C</span></p>
        <ul class="c3 lst-kix_yfqe477f9jgb-0 start">
            <li class="c9 li-bullet-0"><span class="c1">Reversible</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Lots of power</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Trivial to connect as HOST </span
                ><span class="c2">or</span><span class="c1">&nbsp;DEVICE</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_noriyjvcfl3l-0">
            <li class="c9 li-bullet-0">
                <span>Mini A and mini AB connectors were deprecated by </span
                ><span class="c2">USB</span><span>&nbsp;</span
                ><span class="c2">Implementers Forum</span
                ><span>&nbsp;on 23</span><span class="c85">rd</span
                ><span class="c1">&nbsp;May 2007.</span
                ><span
                    style="
                        overflow: hidden;
                        display: inline-block;
                        margin: 0px 0px;
                        border: 0px solid #000000;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                        width: 602px;
                        height: 272px;
                    "
                    ><img
                        alt=""
                        src="assets/real-time-computing-and-embedded-systems/image10.png"
                        style="
                            width: 602px;
                            height: 272px;
                            margin-left: 0px;
                            margin-top: 0px;
                            transform: rotate(0rad) translateZ(0px);
                            -webkit-transform: rotate(0rad) translateZ(0px);
                        "
                        title=""
                /></span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The micro connectors support more insertions (have a longer
                    life) and the wear is concentrated in the cable rather than
                    the device.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Micro USB B connectors are also used in standard EN
                    62684:2010 for a common mobile charger.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Lots more power (and volts) from type C.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1"
                >The latest invocation is Super Speed USB 3.0 with a theoretical
                maximum transfer rate of 5Gbit/s, similar to PCIe Gen2, and five
                additional pins (including signal ground) in a backward
                compatible connector:</span
            >
        </p>
        <ul class="c3 lst-kix_zaspkj880yqy-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >USB 1: Low speed: 1.5Mbit/s signalling, full speed:
                    12Mbit/s</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">USB 2: &nbsp;+ High speed: 480Mbit/s</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >USB 3: + Super Speed: 5Gbit/s signalling, rising to
                    10Gbit/s</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_336cynchnp5y-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Most modern interface standards use serial communication
                    and support automatic configuration by interrogating
                    self-describing devices.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >In modern high-speed systems, the data communication is
                    typically </span
                ><span class="c2">unidirectional</span
                ><span>&nbsp;to avoid the delays involved in </span
                ><span class="c2">turning around</span
                ><span class="c1">&nbsp;the bus signals.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >It is also common to use separate clocks in the fastest
                    systems as </span
                ><span class="c2">clock recovery</span
                ><span class="c1"
                    >&nbsp;can be problematic at the highest speeds.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_bkk295c2wlzc-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">A USB network is a tree</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_phnbb252vy3w-0">
            <li class="c9 li-bullet-0">
                <span>USB supplies V</span><span class="c5">BUS</span
                ><span class="c1">&nbsp;at about 5V.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Power is important; many USB connections are used </span
                ><span class="c2">only </span><span class="c1">for power.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_6sasmphd70yi-0">
            <li class="c9 li-bullet-0">
                <span>All modern communications protocols are </span
                ><span class="c2">layered</span
                ><span class="c1"
                    >. We describe the relationship between corresponding layers
                    at each end.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Electrical layer: on D+, D-</span>
            </li>
        </ul>
        <ul class="c3 lst-kix_6sasmphd70yi-1 start">
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >LOW is -1V to 0.3V in presence of 1.5k&Omega; pull-up</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >HIGH is 2.8V to 4.6V in presence of 1.5k &Omega;
                    pull-down</span
                >
            </li>
            <li class="c13 c21 li-bullet-0">
                <span class="c1"
                    >Rise/fall times 75ns to 300ns with 200pF to 600pF
                    load</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">...</span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_nbomhy1zt3xx-0">
            <li class="c9 li-bullet-0"><span class="c1">Transfers</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Transactions</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Packets</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">On-the wire NRZI</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Bit-stuffing</span></li>
            <li class="c9 li-bullet-0"><span class="c1">Raw bits</span></li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h2 class="c12" id="h.ko0anx852h2w">
            <span class="c11">Synchronisation</span>
        </h2>
        <h3 class="c31" id="h.54b50p1y85n5">
            <span class="c29">Processes and Threads</span>
        </h3>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Process</span></p>
        <ul class="c3 lst-kix_kffs77jazgn4-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Instance of computer program which is running</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Has private address space</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Heavyweight, more resources, more difficult to create</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c1">Thread</span></p>
        <ul class="c3 lst-kix_szq6o7pblrcw-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">A component of a process</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Shared single address space; shared variables</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Lightweight, less resources, easier to create</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Fast inter-thread communication as threads share the same
                    memory address space</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.geeksforgeeks.org/multithreading-c-2/&amp;sa=D&amp;source=editors&amp;ust=1623776231373000&amp;usg=AOvVaw39doy0x_qjJwjn-jpjYjUH"
                    >https://www.geeksforgeeks.org/multithreading-c-2/</a
                ></span
            >
        </p>
        <h4 class="c41" id="h.4ur57qfpwbsd">
            <span class="c50 c10">Process C code</span>
        </h4>
        <p class="c13">
            <span>Important methods: </span
            ><span class="c6">fork(); getpid(); getppid();</span>
        </p>
        <p class="c13">
            <span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.geeksforgeeks.org/fork-system-call/&amp;sa=D&amp;source=editors&amp;ust=1623776231376000&amp;usg=AOvVaw0JB1RX2pyx38dwZT2jHUoX"
                    >https://www.geeksforgeeks.org/fork-system-call/</a
                ></span
            >
        </p>
        <p class="c13">
            <span class="c19"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.geeksforgeeks.org/getppid-getpid-linux/&amp;sa=D&amp;source=editors&amp;ust=1623776231378000&amp;usg=AOvVaw1wtoP3tAh8FRqHmpk3m0vV"
                    >https://www.geeksforgeeks.org/getppid-getpid-linux/</a
                ></span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c6">#include &lt;stdlib.h&gt;</span></p>
        <p class="c13"><span class="c6">#include &lt;stdio.h&gt;</span></p>
        <p class="c13"><span class="c6">#include &lt;unistd.h&gt;</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">int main()</span></p>
        <p class="c13"><span class="c6">{</span></p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c16">int </span><span class="c6">id;</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&ldquo;Hello,
                World!\n&rdquo;);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id=fork();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(id&gt;0)</span
            >
        </p>
        <p class="c13 c54"><span class="c6">{</span></p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c16">/* Parent Process */</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&ldquo;This
                is the parent, my PID: %d, child PID: %d\n&rdquo;, getpid(),
                id);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
                if(id==0)</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span
            >
        </p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c16">/* Child Process */</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&ldquo;This
                is the child, my PID: %d, parent PID: %d\n&rdquo;, getpid(),
                getppid());</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</span
            >
        </p>
        <p class="c13 c23"><span class="c6">{</span></p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c16">/* Fork Failed */</span>
        </p>
        <p class="c13">
            <span class="c16 c84"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c6"
                >fprintf(stderr, &ldquo;fork creation failed!\n&rdquo;);
                exit(EXIT_FILURE);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(EXIT_SUCCESS);</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <h4 class="c41" id="h.4dl0abpg5e2v"><span>Thread C++ code</span></h4>
        <p class="c13">
            <span class="c43 c16"
                >// Compile with: g++ -std=c++14 -o th th.cpp</span
            >
        </p>
        <p class="c13">
            <span class="c43 c16"
                >// On old compilers, you needed an extra option
                &ldquo;-pthread&rdquo; or it</span
            >
        </p>
        <p class="c13">
            <span class="c43 c16">// would fail silently at run-time</span>
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">#include &lt;iostream&gt;</span></p>
        <p class="c13"><span class="c6">#include &lt;thread&gt;</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c16 c84"
                >// This function will be called from a thread</span
            >
        </p>
        <p class="c13"><span class="c6">void call_from_thread() {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout
                &lt;&lt; &ldquo;Hello from a C++ 11 thread.&rdquo; &lt;&lt;
                std::end1;</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">int main() {</span></p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c16">// Launch a thread</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::thread
                t1(call_from_thread);</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            ><span class="c43 c16"
                >// Join the thread with the main thread</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1.join();</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <h4 class="c41" id="h.av0n2em9uwsz">
            <span class="c50 c10">Table</span>
        </h4>
        <a id="t.4a1974104bdcb52fb4069b8660781681c543f019"></a><a id="t.3"></a>
        <table class="c79">
            <tbody>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Segment</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Mode</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Two Processes</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c15">Two Threads</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Code</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Execute, Read?</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">May be shared</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared </span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">R/O data</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Read, Execute?</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">May be shared</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">R/W data</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Read, Write</span></p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Copied</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Shared</span></p>
                    </td>
                </tr>
                <tr class="c30">
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Stack (in BSS)</span></p>
                    </td>
                    <td class="c44" colspan="1" rowspan="1">
                        <p class="c4">
                            <span class="c1">Read, Write, Execute?</span>
                        </p>
                    </td>
                    <td class="c22" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">Copied</span></p>
                    </td>
                    <td class="c38" colspan="1" rowspan="1">
                        <p class="c4"><span class="c1">New</span></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.6989dsnvxeta">
            <span class="c29">Critical Regions (Critical Sections)</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >&ldquo;A section of code that may only be executed by one
                process at any one time.&rdquo; [-Oxford Reference]</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <ul class="c3 lst-kix_y5hanouc3att-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Example: a bank account balance.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Race conditions for these regions can destroy data
                    integrity</span
                >
            </li>
        </ul>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 523.62px;
                    height: 278.5px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image30.png"
                    style="
                        width: 523.62px;
                        height: 278.5px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <h3 class="c31" id="h.cp3sdnjsd7t3">
            <span class="c29">Race Conditions</span>
        </h3>
        <p class="c13">
            <span>&ldquo;</span
            ><span class="c34 c49 c28"
                >A race condition occurs when two or more threads can access
                shared data and they try to change it at the same time.
            </span>
        </p>
        <p class="c13">
            <span class="c26"
                >Because the thread scheduling algorithm can swap between
                threads at any time, you don&#39;t know the order in which the
                threads will attempt to access the shared data. Therefore, the
                result of the change in data is dependent on the thread
                scheduling algorithm, i.e. both threads are &quot;racing&quot;
                to access/change the data.&rdquo;
            </span>
        </p>
        <p class="c13">
            <span class="c39 c49">-</span
            ><span class="c19 c39"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://stackoverflow.com/questions/34510/what-is-a-race-condition&amp;sa=D&amp;source=editors&amp;ust=1623776231412000&amp;usg=AOvVaw30GMOZvmJ42t38JRX03flx"
                    >What is a race condition?</a
                ></span
            >
        </p>
        <p class="c13 c14"><span class="c39 c46"></span></p>
        <h3 class="c31" id="h.w41lmiwz35wj">
            <span class="c29">How will we solve these problems?</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >There are many ways to try and make your code protected against
                synchronisation problems, and many of them look like they might
                work, but there usually is a cheeky race condition in there
                somewhere.</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c49"
                >Here&rsquo;s some solutions that actually work:</span
            >
        </p>
        <h4 class="c41" id="h.l3ihcvjv89bu">
            <span class="c50 c10">Peterson&rsquo;s Solution</span>
        </h4>
        <ul class="c3 lst-kix_2k8vo636hu4d-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Peterson&#39;s algorithm is a concurrent programming
                    algorithm for mutual exclusion that allows two or more
                    processes to share a single-use resource without conflict,
                    using only shared memory for communication.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >While Peterson&#39;s original formulation worked with only
                    two processes, the algorithm can be generalized for more
                    than two.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h4 class="c41" id="h.52zkh0gltj83">
            <span class="c50 c10">Peterson&rsquo;s Solution Code</span>
        </h4>
        <p class="c13">
            <span class="c16 c43"
                >// This version of the code is for two threads</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">#define FALSE 0</span></p>
        <p class="c13"><span class="c6">#define TRUE (!FALSE)</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">volatile int turn;</span></p>
        <p class="c13"><span class="c6">volatile int interested[2];</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">void enter_region(int thread)</span></p>
        <p class="c13"><span class="c6">{</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int
                other;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other =
                1-thread;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interested[thread]
                = TRUE;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn =
                other;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (turn ==
                other &amp;&amp; interested[other]);</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">void leave_region(int thread)</span></p>
        <p class="c13"><span class="c6">{</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interested[thread]
                = FALSE;</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >// The code would be used from the threads as follows (might be
                a bit bugged on smaller resolutions, change it I must!)</span
            >
        </p>
        <p class="c13"><span class="c6">//</span></p>
        <p class="c13">
            <span class="c6"
                >// Thread
                0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread
                1</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >// while(TRUE)
                {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(TRUE)
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >//
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enter_region(0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp; enter_region(1);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;critical_region();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp; critical_region();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leave_region(0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp; leave_region(1);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noncritical_region();
                }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp; noncritical_region(); }</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c15">Explanation</span></p>
        <ul class="c3 lst-kix_k6x4t9wdxges-0 start">
            <li class="c9 li-bullet-0">
                <span>The algorithm </span
                ><span>uses two variables, a bool array flag of size 2 (</span
                ><span class="c16">interested[2]</span
                ><span>) and an int variable (</span
                ><span class="c16">turn</span><span class="c1">).</span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Initially the flags are false. When a process wants to
                    execute it&rsquo;s critical section, it sets its flag to
                    true and </span
                ><span class="c16">turn</span
                ><span class="c1"
                    >&nbsp;as the index of the other process.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >This means that the process wants to execute but it will
                    allow the other process to run first. The process
                    performs</span
                ><span class="c2">&nbsp;</span
                ><span class="c28">busy waiting</span
                ><span
                    >&nbsp;until the other process has finished its own critical
                    section.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >After this the current process enters it&rsquo;s critical
                    section and adds or removes a random number from the shared
                    buffer [?].
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >After completing the critical section, it sets its own flag
                    to false, indication it does not wish to execute
                    anymore.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>[</span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://www.geeksforgeeks.org/petersons-algorithm-in-process-synchronization/&amp;sa=D&amp;source=editors&amp;ust=1623776231419000&amp;usg=AOvVaw2uHG20QM74J0xrk0v4HkLu"
                        >Source</a
                    ></span
                ><span>]</span>
            </li>
        </ul>
        <h4 class="c41" id="h.oi3c8tadjcy7">
            <span class="c50 c10">Busy waiting:</span>
        </h4>
        <p class="c13">
            <span class="c1"
                >When a process repeatedly checks to see if a condition is true,
                such as a lock becoming available.</span
            >
        </p>
        <h5 class="c68 c82" id="h.9m4q72wnykg">
            <span class="c0">Volatile Keyword Note</span>
        </h5>
        <p class="c13">
            <span class="c52"
                >&ldquo;The volatile keyword is intended to prevent the compiler
                from applying any optimizations on objects that can change in
                ways that cannot be determined by the compiler.&rdquo; [</span
            ><span class="c19 c52"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://www.geeksforgeeks.org/understanding-volatile-qualifier-in-c/&amp;sa=D&amp;source=editors&amp;ust=1623776231419000&amp;usg=AOvVaw002m11GhC3rVzMc_FefC4r"
                    >Source</a
                ></span
            ><span class="c1">]</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h4 class="c41" id="h.gqy975wts6q5">
            <span class="c50 c10">Test and Set Lock (TSL)</span>
        </h4>
        <ul class="c3 lst-kix_gyct74420l83-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This is a low level processor instruction (unfortunately
                    not on x86).</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This instructions reads the contents of a memory location,
                    stores it in a register and then stores a non-zero value at
                    the address.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >The operation is guaranteed to be indivisible. That is, no
                    other process can access that memory location until the TSL
                    instruction has finished.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>[</span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://www.cs.nott.ac.uk/~pszgxk/courses/g53ops/Processes/proc08-tsl.html&amp;sa=D&amp;source=editors&amp;ust=1623776231420000&amp;usg=AOvVaw2BDvEjoKbe4swlHFsLlrtT"
                        >Source</a
                    ></span
                ><span class="c1">]</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span>However you can use </span><span class="c28">XCHG</span
            ><span>&nbsp;</span><span class="c28">Exchange Registers </span
            ><span class="c1">on x86.</span>
        </p>
        <ul class="c3 lst-kix_2xbz0lm2uexq-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >XCHG switches the contents of its operands, which may be
                    either bytes or words.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>E.g.: </span
                ><span class="c16">LOCK XCHG SEMPHOR, &nbsp; DX</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.28fv2nrwkkv4">
            <span class="c29">Non-busy synchronization</span>
        </h3>
        <p class="c13">
            <span class="c1"
                >To remove the polling load from CPU you can do these:</span
            >
        </p>
        <ul class="c3 lst-kix_83gppzoz6j9j-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Monitors - construct that allows threads to have both
                    mutual exclusion and the ability to wait.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Condition variables - primitives that enable threads to
                    wait until a particular condition occurs.</span
                >
            </li>
        </ul>
        <h4 class="c41" id="h.roe1d2c5inox">
            <span class="c50 c10">Sleep and Wakeup</span>
        </h4>
        <ul class="c3 lst-kix_i8z8zuqqdjlo-0 start">
            <li class="c9 li-bullet-0">
                <span class="c16">sleep()- </span
                ><span class="c1">will deschedual a blocked thread</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c16">wakeup()- </span
                ><span class="c1"
                    >will enable it to be run again after a sleep</span
                >
            </li>
        </ul>
        <h4 class="c41" id="h.mfp6klx2cut3">
            <span>Implementations in Java</span>
        </h4>
        <ul class="c3 lst-kix_ld2yuh60k3wi-0 start">
            <li class="c9 li-bullet-0">
                <span class="c16">Synchronized (</span
                ><span class="c1"
                    >keyword) - marks a block or method as a critical
                    section.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c16">wait()-</span
                ><span class="c1"
                    >&nbsp;can only be invoked from within a synchronized unit,
                    and releases the critical section as well as causing a
                    sleep.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c16">notify()- </span
                ><span class="c1"
                    >can only be invoked from within a synchronized unit and
                    issues a wakeup.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c16">notifyAll() - </span
                ><span class="c1"
                    >basically wakes up all threads that are waiting.</span
                >
            </li>
        </ul>
        <h4 class="c41" id="h.97zant66deqs">
            <span class="c50 c10">Code (for Producer/Consumer)</span>
        </h4>
        <p class="c13">
            <span class="c47"
                >(there will be no Java coding in the exam, only C, so get your
                cross compilers out ;) )</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c6"
                >// Best not to allow inheritance as subclasses violate
                the</span
            >
        </p>
        <p class="c13"><span class="c6">//synchronisation variants.</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6">public final class ProducerConsumer {</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final N =
                100;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private int
                count = 0;</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c54">
            <span class="c6"
                >// Use a dedicated private object to ensure no non-class</span
            >
        </p>
        <p class="c13 c54">
            <span class="c6">//method tries to use the lock</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private Object
                lock = new Object();</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c54">
            <span class="c6">// Run this as the producer thread</span>
        </p>
        <p class="c13 c54">
            <span class="c6"
                >// The class should probably be generic, tagged with the
                type</span
            >
        </p>
        <p class="c13 c54"><span class="c6">//of item</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void producer()
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object
                item;</span
            >
        </p>
        <p class="c13 c54 c23"><span class="c6">try {</span></p>
        <p class="c13 c23 c54">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item =
                Producer.produce_item();</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized(lock)
                {</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while
                (count == N)</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.wait();</span
            >
        </p>
        <p class="c13 c67 c14 c23"><span class="c6"></span></p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Buffer.insert_item(item);</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count
                = count + 1;</span
            >
        </p>
        <p class="c13 c23 c67">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.notifyAll();</span
            >
        </p>
        <p class="c13 c67 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c67 c23"><span class="c6">}</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//
                This should never happen</span
            >
        </p>
        <p class="c13">
            <span class="c16"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch
                (</span
            ><span class="c16">InterruptedExcecption</span
            ><span class="c6">&nbsp;e) {</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw
                new AssertionError(e);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Run this as
                the consumer thread</span
            >
        </p>
        <p class="c13 c23"><span class="c6">void consumer() {</span></p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object
                item;</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized(lock)
                {</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(count
                == 0)</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.wait();</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item
                = Buffer.remove_item();</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count
                = count - 1;</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lock.notifyAll();</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Consumer.consume_item(item);</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c54 c23">
            <span class="c6">// This should never happen either</span>
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch
                (InterruptedException e) {</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw
                new AssertionError(e);</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c23"><span class="c6">}</span></p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1"
                >This whole mechanism has very bad fairness properties.</span
            >
        </p>
        <h4 class="c41" id="h.m6vu3xy1da7n">
            <span class="c50 c10">Fairness</span>
        </h4>
        <p class="c13">
            <span>&ldquo;</span
            ><span class="c39 c49"
                >Fairness basically resembles the likelihood that different
                threads are able to </span
            ><span class="c39 c2 c49">advance</span
            ><span class="c46 c39"
                >&nbsp;whatever they are doing. 100% fairness means: all threads
                should be advancing their work in almost equal portions; 0%
                fairness means that one single thread might be advancing all the
                time, and all other threads never (or almost never) make any
                progress.</span
            >
        </p>
        <p class="c37 c13">
            <span class="c39 c49"
                >It very much depends on your requirements exactly how </span
            ><span class="c39 c2 c49">fairness</span
            ><span class="c39 c49">&nbsp;is required or achieved.&rdquo; [</span
            ><span class="c19 c39"
                ><a
                    class="c8"
                    href="https://www.google.com/url?q=https://stackoverflow.com/questions/44964979/what-is-fairness-in-multi-threading-programming&amp;sa=D&amp;source=editors&amp;ust=1623776231429000&amp;usg=AOvVaw0ewroX1wr7nQVo6CsraIKc"
                    >Source</a
                ></span
            ><span>]</span>
        </p>
        <h3 class="c31" id="h.cvmrw7xkd0lh">
            <span class="c29">Semaphores</span>
        </h3>
        <ul class="c3 lst-kix_443zjlij0swy-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Synchronization tool which does not have
                    busy-waiting.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span>Uses a single integer variable: </span
                ><span class="c2">S</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Uses two indivisible atomic operations: </span
                ><span class="c2">P </span><span>&amp; </span
                ><span class="c2">V</span>
            </li>
        </ul>
        <p class="c13 c54 c14"><span class="c1"></span></p>
        <p class="c13">
            <span>P (prolaag) - wait, sleep, </span
            ><span class="c16">down </span><span class="c1">operation.</span>
        </p>
        <p class="c13">
            <span>V (verhoog) - signal, wakeup, </span
            ><span class="c16">up </span><span class="c1">operation.</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c6">//wait when s is 0, else decrement it</span>
        </p>
        <p class="c13"><span class="c6">down() {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (s&gt;0)
            </span>
        </p>
        <p class="c13 c54 c23"><span class="c6">s--;</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
            </span>
        </p>
        <p class="c13 c54 c23"><span class="c6">WAIT;</span></p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">up() {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if
                (THREADS_WAITING)</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WAKE_ONE;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s++;</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <ol class="c3 lst-kix_5un3nlyxel9f-0 start" start="1">
            <li class="c9 li-bullet-0">
                <span class="c28">Binary Semaphore</span
                ><span class="c1"
                    >&nbsp;&ndash; This is also known as mutex lock. It can have
                    only two values &ndash; 0 and 1. Its value is initialized to
                    1. It is used to implement the solution of critical section
                    problem with multiple processes.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c28">Counting Semaphore</span
                ><span class="c1"
                    >&nbsp;&ndash; Its value can range over an unrestricted
                    domain. It is used to control access to a resource that has
                    multiple instances.</span
                >
            </li>
        </ol>
        <p class="c13 c14"><span class="c1"></span></p>
        <h4 class="c41" id="h.1icocplfn8kr">
            <span class="c50 c10">Producer/Consumer with Semaphores Code</span>
        </h4>
        <p class="c13">
            <span class="c6"
                >#include &lt;semaphore.h&gt; // uses POSIX semaphores</span
            >
        </p>
        <p class="c13"><span class="c6">sem_t mutex, empty, full;</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">void init(void) {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_init(&amp;mutex,
                0, 1);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_init(&amp;empty,
                0, N); //N is initial value</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6">sem_init(&amp;full, 0, 0);</span>
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">// run in producer thread</span></p>
        <p class="c13"><span class="c6">void producer(void) {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item
                *pitem;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pitem
                = prduce_pitem();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_wait(&amp;empty);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_wait(&amp;mutex);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert_item(pitem);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_post(&amp;mutex);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_post(&amp;full);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">// run in consumer thread</span></p>
        <p class="c13"><span class="c6">void consumer(void) {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item
                *pitem;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_wait(&amp;full);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_wait(&amp;mutex);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pitem
                = remove_item();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_post(&amp;mutex);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sem_post(&amp;empty);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;consume_pitem(pitem);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <h3 class="c31" id="h.pynwrk8z6o8"><span class="c29">POSIX</span></h3>
        <p class="c13">
            <span
                >&ldquo;The Portable Operating System Interface (POSIX) is a
                family of standards specified by the IEEE Computer Society for
                maintaining compatibility between operating systems.&rdquo;
                [-Wiki]</span
            >
        </p>
        <h3 class="c31" id="h.5jfd1xw2atk">
            <span class="c29">Message Passing</span>
        </h3>
        <ul class="c3 lst-kix_nctxfytg0zp8-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >In a message-passing model, the sending and receiving
                    processes need to coordinate sending and receiving messages
                    with each other so that messages sent are eventually
                    received and that messages received have actually been sent.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span>[</span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=https://www.cs.cmu.edu/afs/cs/academic/class/15671-f95/www/handouts/concurrency/node7.html&amp;sa=D&amp;source=editors&amp;ust=1623776231436000&amp;usg=AOvVaw2qEr-OWh0Y1aSvN5cDQ8R2"
                        >Source</a
                    ></span
                ><span class="c1"
                    >] (and give the page a read as well maybe)</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This is used in FreeRTOS and implemented using a shared
                    queue.</span
                >
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h4 class="c41" id="h.4dsw1455nz2">
            <span class="c50 c10">Code in C Producer/Consumer</span>
        </h4>
        <p class="c13"><span class="c6">#include &lt;FreeRTOS.h&gt;</span></p>
        <p class="c13"><span class="c6">#include &lt;queue.h&gt;</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">xQueuehandle queue;</span></p>
        <p class="c13"><span class="c6">void init(void) {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queue =
                xQueueCreat(N, sizeof(Item));</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">// run in producer thread</span></p>
        <p class="c13"><span class="c6">void producer(void)</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item
                item;</span
            >
        </p>
        <p class="c13 c23"><span class="c6">while(true) {</span></p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item =
                produce_item();</span
            >
        </p>
        <p class="c13 c23">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)xQueueSendToBack(queue,
                &amp;item, portMAX_DELAY);</span
            >
        </p>
        <p class="c13 c23"><span class="c6">}</span></p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13"><span class="c6">// wait forever if necessary</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13"><span class="c6">void consumer(void) {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item
                item;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)xQueueReceive(queue,
                &amp;item, portMAX_DELAY);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;consume_item(item);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >// WARNING: infinite wait only works if INDLUDE_vTaskSuspend is
                set</span
            >
        </p>
        <p class="c13"><span class="c6">//to 1 in FreeRTOSConfig.h</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >// Note that message passing is normally pass-by-value, not
                by</span
            >
        </p>
        <p class="c13"><span class="c6">//reference.</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <h3 class="c31" id="h.kel3doi1l46s">
            <span class="c29">Barriers</span>
        </h3>
        <p class="c13">
            <span
                >All processes have to arrive at the barrier before they can all
                proceed.</span
            >
        </p>
        <p class="c13">
            <span
                style="
                    overflow: hidden;
                    display: inline-block;
                    margin: 0px 0px;
                    border: 0px solid #000000;
                    transform: rotate(0rad) translateZ(0px);
                    -webkit-transform: rotate(0rad) translateZ(0px);
                    width: 602px;
                    height: 246.67px;
                "
                ><img
                    alt=""
                    src="assets/real-time-computing-and-embedded-systems/image28.png"
                    style="
                        width: 602px;
                        height: 246.67px;
                        margin-left: 0px;
                        margin-top: 0px;
                        transform: rotate(0rad) translateZ(0px);
                        -webkit-transform: rotate(0rad) translateZ(0px);
                    "
                    title=""
            /></span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.gsk1obq9ebfs">
            <span class="c29">The Dining Philosophers Problem.</span>
        </h3>
        <ul class="c3 lst-kix_94p7iultai1-0">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Essentially there is a table with 5 plates of spaghetti on
                    it and a fork in between each plate.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >There are 5 philosophers that need to eat.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >They can only eat if they are holding both forks.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >How would you design an algorithm for all philosophers to
                    get their fair share of eating?</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">They all take the fork to their left?</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Then they won&rsquo;t have a fork on their right :( so none
                    of them can eat.</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >How would you prevent a deadlock like this?</span
                >
            </li>
        </ul>
        <h4 class="c41" id="h.x3jv47qawh1d">
            <span class="c50 c10">Java code; working solution</span>
        </h4>
        <ul class="c3 lst-kix_27hs4t8fsx0t-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >This uses Semaphores and makes sure the Forks can only be
                    held by one Philosopher at a time.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Also the in the </span><span class="c16">run()</span
                ><span class="c1"
                    >method the first philosopher takes their forks in the
                    opposite sequence to the others.
                </span>
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >This breaks the dependency cycle and ensure that the code
                    is </span
                ><span class="c2">live</span><span class="c1">.</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>It does not provide a guarantee of </span
                ><span class="c2">fairness</span><span class="c1">.</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13"><span class="c6">class Fork {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Semaphore
                s;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int
                number;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fork(int
                number) {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.number
                = number;</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s
                = new Semaphore(1);</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void take()
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DiningPhilosophers
                p = (DiningPhilosophers)Thread.currentThread();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s.acquireUninterruptibly();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c23"><span class="c6">void drop() {</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DiningPhilosophers
                p = (DiningPhilosophers)Thread.currentThread();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s.release();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c16">class</span
            ><span class="c6">&nbsp;DiningPhilosophers extends Thread {</span>
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static final
                int N=2; &nbsp;// N &gt;= 2</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private static
                Fork[] forks = new Fork[N];</span
            >
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13 c23"><span class="c6">public void run()</span></p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(number
                == 0) {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[(number+1)].take();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[number].take();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
                {</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[number].take();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[(number+1)%N].take();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[number].drop();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forks[(number+1)%N].drop();</span
            >
        </p>
        <p class="c13">
            <span class="c6"
                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span
            >
        </p>
        <p class="c13 c23"><span class="c6">}</span></p>
        <p class="c13"><span class="c6">}</span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c6">public static final void main(String[] s) {</span>
        </p>
        <p class="c13 c23">
            <span class="c6">for (int i=0; i&lt;N; i++)</span>
        </p>
        <p class="c13 c54 c23">
            <span class="c6">forks[i] = new Fork(i);</span>
        </p>
        <p class="c13 c23">
            <span class="c6">for (int i=0; i&lt;N; i++)</span>
        </p>
        <p class="c13 c54 c23">
            <span class="c6">(new DiningPhilosophers(i)).start(); </span>
        </p>
        <p class="c13"><span class="c6">} </span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13 c14"><span class="c6"></span></p>
        <p class="c13">
            <span class="c72 c61"
                >The module as delivered in 2019&ndash;20 covered the slide
                decks in order up to and including </span
            ><span class="c2 c61 c72">Synchronisation</span
            ><span class="c48">&nbsp;slide 66.</span>
        </p>
        <p class="c13 c14"><span class="c1"></span></p>
        <p class="c13">
            <span class="c1"
                >This TLDR goes up to slide 66. I&rsquo;ll do a really short
                summary for other stuff, (cus we did actually have these
                lectures but Denis uhhhhh?)<br
            /></span>
        </p>
        <ul class="c3 lst-kix_sxjga16vx54o-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">There are Java Pthreads</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>Java&rsquo;s </span><span class="c16">wait() </span
                ><span class="c1">is bad</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">There&rsquo;s unfairness</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Java.util.concurrency fixes problems</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">AtomicInteger is fast</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">POSIXC Semaphores?</span>
            </li>
        </ul>
        <p class="c13 c14"><span class="c1"></span></p>
        <h3 class="c31" id="h.yeb5fhl3no70">
            <span class="c29">Model Checking</span>
        </h3>
        <ul class="c3 lst-kix_o2m8rrekcdk9-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Verify correctness of code</span>
            </li>
            <li class="c9 li-bullet-0"><span class="c1">Assertions</span></li>
            <li class="c9 li-bullet-0">
                <span class="c1">Assert and assume functions</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1"
                    >Unbounded and bounded model checking loops</span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Proof by induction and inductive proof</span>
            </li>
        </ul>
        <h3 class="c31" id="h.riz8evxneh9i">
            <span class="c29"
                >Other stuff we sadly didn&rsquo;t get to do in a real time
                module</span
            >
        </h3>
        <ul class="c3 lst-kix_8h2f3k22tp29-0 start">
            <li class="c9 li-bullet-0">
                <span class="c1">Scheduling :(</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">DSP? -&gt; Digital Signal Processing</span>
            </li>
            <li class="c9 li-bullet-0">
                <span class="c1">Model Checking Synchronisation</span>
            </li>
            <li class="c9 li-bullet-0">
                <span>ESBMC? -&gt; </span
                ><span class="c19"
                    ><a
                        class="c8"
                        href="https://www.google.com/url?q=http://esbmc.org/&amp;sa=D&amp;source=editors&amp;ust=1623776231448000&amp;usg=AOvVaw3J_UK2SOL2BRUlOujuBP5c"
                        >Efficient SMT-based Bounded Model Checker</a
                    ></span
                >
            </li>
            <li class="c9 li-bullet-0">
                <span
                    >Automata (basically foundations of comp sci sets and first
                    bit of theory of computing)</span
                >
            </li>
        </ul>
    </body>
</html>
